function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],o=!0,i=!1,a=void 0;try{for(var r,c=t[Symbol.iterator]();!(o=(r=c.next()).done)&&(n.push(r.value),!e||n.length!==e);o=!0);}catch(s){i=!0,a=s}finally{try{o||null==c.return||c.return()}finally{if(i)throw a}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){return function(){var e,n=_getPrototypeOf(t);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{mrSG:function(t,e,n){"use strict";function o(t,e,n,o){return new(n||(n=Promise))((function(i,a){function r(t){try{s(o.next(t))}catch(e){a(e)}}function c(t){try{s(o.throw(t))}catch(e){a(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}s((o=o.apply(t,e||[])).next())}))}n.d(e,"a",(function(){return o}))},tgyP:function(t,e,n){"use strict";n.r(e),n.d(e,"ControlPanelModule",(function(){return No}));var o,i,a,r,c=n("L4f4"),s=n("wVxG"),l=n("sIil"),b=n("AytR"),u=n("XNiG"),m=n("fXoL"),f=n("nm5K"),p=((r=function(){function t(e){_classCallCheck(this,t),this.api=e}return _createClass(t,[{key:"list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new u.a,o=b.a.api.pathologies;if(t&&(o+="?"+l.a.getQueryString(t)),e){var i=l.a.getOrderQueryString(e);o.indexOf("?")>=0?o+="&"+i:o+="?"+i}return this.api.httpGet(o).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"findById",value:function(t){var e=new u.a;return this.api.httpGet("".concat(b.a.api.pathologies,"/").concat(t)).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"create",value:function(t){var e=new u.a;return this.api.httpPost(b.a.api.pathologies,t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"updateById",value:function(t,e){var n=new u.a;return this.api.httpPut(b.a.api.pathologies+t,e).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"delete",value:function(t){var e=new u.a;return this.api.httpDelete(b.a.api.pathologies+t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||r)(m.ac(f.a))},r.\u0275prov=m.Jb({token:r,factory:r.\u0275fac}),r),g=((a=function(){function t(e){_classCallCheck(this,t),this.api=e}return _createClass(t,[{key:"list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new u.a,o=b.a.api.medications;if(t&&(o+="?"+l.a.getQueryString(t)),e){var i=l.a.getOrderQueryString(e);o.indexOf("?")>=0?o+="&"+i:o+="?"+i}return this.api.httpGet(o).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"findById",value:function(t){var e=new u.a;return this.api.httpGet("".concat(b.a.api.medications,"/").concat(t)).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"create",value:function(t){var e=new u.a;return this.api.httpPost(b.a.api.medications,t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"updateById",value:function(t,e){var n=new u.a;return this.api.httpPut(b.a.api.medications+t,e).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"delete",value:function(t){var e=new u.a;return this.api.httpDelete(b.a.api.medications+t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||a)(m.ac(f.a))},a.\u0275prov=m.Jb({token:a,factory:a.\u0275fac}),a),d=((i=function(){function t(e){_classCallCheck(this,t),this.api=e}return _createClass(t,[{key:"list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new u.a,o=b.a.api.arrhythmias;if(t&&(o+="?"+l.a.getQueryString(t)),e){var i=l.a.getOrderQueryString(e);o.indexOf("?")>=0?o+="&"+i:o+="?"+i}return this.api.httpGet(o).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"findById",value:function(t){var e=new u.a;return this.api.httpGet("".concat(b.a.api.arrhythmias,"/").concat(t)).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"create",value:function(t){var e=new u.a;return this.api.httpPost(b.a.api.arrhythmias,t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"updateById",value:function(t,e){var n=new u.a;return this.api.httpPut(b.a.api.arrhythmias+t,e).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"delete",value:function(t){var e=new u.a;return this.api.httpDelete(b.a.api.arrhythmias+t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||i)(m.ac(f.a))},i.\u0275prov=m.Jb({token:i,factory:i.\u0275fac}),i),h=((o=function(){function t(e){_classCallCheck(this,t),this.api=e}return _createClass(t,[{key:"list",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new u.a,o=b.a.api.animalSpecies;if(t&&(o+="?"+l.a.getQueryString(t)),e){var i=l.a.getOrderQueryString(e);o.indexOf("?")>=0?o+="&"+i:o+="?"+i}return this.api.httpGet(o).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"findById",value:function(t){var e=new u.a;return this.api.httpGet("".concat(b.a.api.animalSpecies,"/").concat(t)).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"create",value:function(t){var e=new u.a;return this.api.httpPost(b.a.api.animalSpecies,t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"updateById",value:function(t,e){var n=new u.a;return this.api.httpPut(b.a.api.animalSpecies+t,e).subscribe((function(t){n.next(t)}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"delete",value:function(t){var e=new u.a;return this.api.httpDelete(b.a.api.animalSpecies+t).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||o)(m.ac(f.a))},o.\u0275prov=m.Jb({token:o,factory:o.\u0275fac}),o),v=n("ofXK"),S=n("tyNb"),y=n("oaey"),C=n("3Pt+"),R=n("/uUt"),k=n("5eHb"),O=n("Ut+n"),P=n("R1EA"),_=n("mrSG"),x=n("1kSV");function I(t,e){1&t&&(m.Sb(0,"button",5),m.Ob(1,"span",6),m.Ec(2," Loading... "),m.Rb())}function E(t,e){if(1&t&&(m.Sb(0,"tr",16),m.Sb(1,"td",17),m.Ec(2),m.Rb(),m.Sb(3,"td",17),m.Ec(4),m.Rb(),m.Sb(5,"td",17),m.Ec(6),m.hc(7,"date"),m.Rb(),m.Sb(8,"td",17),m.Sb(9,"div",18),m.Ob(10,"input",19),m.Rb(),m.Rb(),m.Rb()),2&t){var n=e.$implicit,o=e.index;m.zb(2),m.Gc(" ",n.name," "),m.zb(2),m.Gc(" ",n.description," "),m.zb(2),m.Gc(" ",m.ic(7,5,n.updated_at)," "),m.zb(3),m.mc("formGroupName",o),m.zb(1),m.nc("value",o)}}function z(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,E,11,7,"tr",15),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.mc("ngForOf",n.scenarios)}}function w(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",20),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}function M(t,e){1&t&&(m.Sb(0,"button",21),m.Ec(1,"Select"),m.Rb())}function G(t,e){if(1&t){var n=m.Tb();m.Sb(0,"form",7),m.ec("ngSubmit",(function(){return m.vc(n),m.gc().onSelect()})),m.Sb(1,"table",8),m.Sb(2,"thead",9),m.Sb(3,"tr"),m.Sb(4,"th",10),m.Ec(5," Name "),m.Rb(),m.Sb(6,"th",10),m.Ec(7," Description "),m.Rb(),m.Sb(8,"th",10),m.Ec(9," Latest update "),m.Rb(),m.Ob(10,"th",10),m.Rb(),m.Rb(),m.Cc(11,z,2,1,"tbody",11),m.Cc(12,w,4,0,"tbody",11),m.Rb(),m.Sb(13,"div",12),m.Cc(14,M,2,0,"button",13),m.Sb(15,"button",14),m.ec("click",(function(){return m.vc(n),m.gc().onCancel()})),m.Ec(16," Close "),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=m.gc();m.mc("formGroup",o.formGroup),m.zb(11),m.mc("ngIf",o.scenarios),m.zb(1),m.mc("ngIf",!o.scenarios||0===o.scenarios.length),m.zb(2),m.mc("ngIf",o.containsTrue())}}var N,F,A=((F=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i){var a;return _classCallCheck(this,n),(a=e.call(this)).activeModal=t,a.fb=o,a.scenariosService=i,a.scenarios=[],a}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup()}},{key:"loadData",value:function(){return Object(_.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){e.scenariosService.listWithParams().subscribe((function(e){e&&t(e)}),(function(t){n(t)}))})));case 1:case"end":return t.stop()}}),t)})))}},{key:"onCancel",value:function(){this.activeModal.close()}},{key:"onSelect",value:function(){this.setSubmitForm(!0);for(var t=[],e=0;e<this.formGroup.value.scenarioSelected.length;e+=1)this.formGroup.value.scenarioSelected[e].value&&t.push(this.scenarios[e]);this.activeModal.close(t)}},{key:"initFormGroup",value:function(){var t=this;this.setLoading(!0),this.formGroup=this.fb.group({scenarioSelected:this.fb.array([])}),this.loadData().then((function(e){e&&(t.scenarios=e.data,t.scenarios&&t.scenarios.forEach((function(){t.formGroup.get("scenarioSelected").push(t.fb.group({value:[!1]}))}))),t.setLoading(!1)})).catch((function(t){console.log(t)}))}},{key:"containsTrue",value:function(){return this.formGroup.value.scenarioSelected.some((function(t){return 1==t.value}))}}]),n}(y.a)).\u0275fac=function(t){return new(t||F)(m.Nb(x.a),m.Nb(C.e),m.Nb(s.a))},F.\u0275cmp=m.Hb({type:F,selectors:[["ng-component"]],features:[m.wb],decls:7,vars:2,consts:[[1,"modal-header","title"],[1,"modal-body"],[1,"col"],["class","btn btn-primary btn-spinner","type","button","disabled","",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["type","button","disabled","",1,"btn","btn-primary","btn-spinner"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[3,"formGroup","ngSubmit"],[1,"table","table-striped","table-hover"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[1,"modal-footer"],["class","btn btn-primary btn-submit","type","submit",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],["formArrayName","scenarioSelected",4,"ngFor","ngForOf"],["formArrayName","scenarioSelected"],["scope","row"],[1,"ml-4",3,"formGroupName"],["type","checkbox","formControlName","value",1,"form-check-input",3,"value"],["colspan","7"],["type","submit",1,"btn","btn-primary","btn-submit"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"h3"),m.Ec(2,"Choose Scenario"),m.Rb(),m.Rb(),m.Sb(3,"div",1),m.Sb(4,"div",2),m.Cc(5,I,3,0,"button",3),m.Cc(6,G,17,4,"form",4),m.Rb(),m.Rb()),2&t&&(m.zb(5),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()))},directives:[v.l,C.y,C.m,C.g,v.k,C.d,C.h,C.a,C.l,C.f],pipes:[v.d],styles:[".title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:#212529;text-align:center;width:100%}.modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2;min-width:650px!important}.modal-header[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;color:#fff}.btn-submit[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161!important}"]}),F),D=((N=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";return t&&t.length>0?t.forEach((function(o,i){"medications"===e?o.medication&&o.medication.name&&(n=n.concat(o.medication.name)):n=n.concat(null==o?void 0:o.name),i!==t.length-1&&(n=n.concat(","))})):n="-",n}}]),t}()).\u0275fac=function(t){return new(t||N)},N.\u0275pipe=m.Mb({name:"arrayJson",type:N,pure:!0}),N);function q(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",18),m.ec("click",(function(){m.vc(n);var t=m.gc().index;return m.gc(2).onActiveScenario(t)})),m.Ob(1,"img",19),m.Rb()}}function L(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",20),m.ec("click",(function(){m.vc(n);var t=m.gc().index;return m.gc(2).onActiveScenario(t)})),m.Ob(1,"img",21),m.Rb()}}function T(t,e){if(1&t&&(m.Ec(0),m.hc(1,"arrayJson")),2&t){var n=m.gc().$implicit;m.Gc(" ",m.ic(1,1,n.arrhythmias)," ")}}function V(t,e){1&t&&m.Ec(0," - ")}function B(t,e){if(1&t&&(m.Ec(0),m.hc(1,"arrayJson")),2&t){var n=m.gc().$implicit;m.Gc(" ",m.ic(1,1,n.pathologies)," ")}}function $(t,e){1&t&&m.Ec(0," - ")}function j(t,e){if(1&t&&(m.Ec(0),m.hc(1,"arrayJson")),2&t){var n=m.gc().$implicit;m.Gc(" ",m.jc(1,1,n.medications,"medications")," ")}}function H(t,e){1&t&&m.Ec(0," - ")}function J(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",8),m.Cc(2,q,2,0,"ng-template",9),m.Cc(3,L,2,0,"ng-template",9),m.Rb(),m.Sb(4,"td",10),m.Ec(5),m.Rb(),m.Sb(6,"td",11),m.Ec(7),m.Rb(),m.Sb(8,"td",12),m.Cc(9,T,2,3,"ng-template",9),m.Cc(10,V,1,0,"ng-template",9),m.Rb(),m.Sb(11,"td",13),m.Cc(12,B,2,3,"ng-template",9),m.Cc(13,$,1,0,"ng-template",9),m.Rb(),m.Sb(14,"td",14),m.Cc(15,j,2,4,"ng-template",9),m.Cc(16,H,1,0,"ng-template",9),m.Rb(),m.Sb(17,"td",15),m.Sb(18,"button",16),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onDelete(t)})),m.Ob(19,"img",17),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit,i=e.index,a=m.gc(2);m.zb(2),m.mc("ngIf",a.isActiveScenario(i)),m.zb(1),m.mc("ngIf",!a.isActiveScenario(i)),m.zb(2),m.Gc(" ",null==o?null:o.name," "),m.zb(2),m.Gc(" ",null==o?null:o.description," "),m.zb(2),m.mc("ngIf",o.arrhythmias),m.zb(1),m.mc("ngIf",!o.arrhythmias),m.zb(2),m.mc("ngIf",o.pathologies),m.zb(1),m.mc("ngIf",!o.pathologies),m.zb(2),m.mc("ngIf",o.medications),m.zb(1),m.mc("ngIf",!o.medications)}}function U(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,J,20,10,"tr",7),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.scenariosSelected)}}function W(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",22),m.Ec(3," No scenarios available. "),m.Rb(),m.Rb(),m.Rb())}var Q,Y=((Q=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var i;return _classCallCheck(this,n),(i=e.call(this)).modal=t,i.router=o,i.returnScenarios=new m.n,i.posScenarios=new m.n,i.isScenariosPanelRoute=!1,i.indexScenarioActive=0,i.indexScenarioEdit=0,i.isScenariosPanelRoute="/panel"===i.router.url,i}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"onLoadScenarios",value:function(){var t=this;this.modal.open(A).result.then((function(e){var n;e&&(t.scenariosSelected=(null===(n=t.scenariosSelected)||void 0===n?void 0:n.length)>0?t.scenariosSelected.concat(e):e,t.isScenariosPanelRoute&&t.returnScenarios.emit(t.scenariosSelected))}),(function(t){console.log(t)}))}},{key:"isActiveScenario",value:function(t){return t===this.indexScenarioActive}},{key:"isScenarioEdit",value:function(t){return t===this.indexScenarioEdit}},{key:"onActiveScenario",value:function(t){this.indexScenarioActive=t,this.isScenariosPanelRoute&&this.posScenarios.emit({indexEdit:this.indexScenarioEdit,indexActive:this.indexScenarioActive}),this.isScenariosPanelRoute&&this.returnScenarios.emit(this.scenariosSelected)}},{key:"onDelete",value:function(t){this.scenariosSelected.splice(t,1),this.isScenariosPanelRoute&&this.posScenarios.emit({indexEdit:this.indexScenarioEdit,indexActive:this.indexScenarioActive}),this.isScenariosPanelRoute&&this.returnScenarios.emit(this.scenariosSelected)}}]),n}(y.a)).\u0275fac=function(t){return new(t||Q)(m.Nb(x.b),m.Nb(S.b))},Q.\u0275cmp=m.Hb({type:Q,selectors:[["app-scenarios"]],inputs:{scenariosSelected:"scenariosSelected"},outputs:{returnScenarios:"returnScenarios",posScenarios:"posScenarios"},features:[m.wb],decls:21,vars:2,consts:[[1,"row"],[1,"col","text-right"],[1,"btn","btn-primary","save-changes",3,"click"],[1,"table","table-hover","table-scenarios"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","row",1,"td-icons"],[3,"ngIf"],["scope","row",1,"td-name"],["scope","row",1,"td-descr"],["scope","row",1,"td-arr"],["scope","row",1,"td-path"],["scope","row",1,"td-med"],["scope","row"],[1,"btn","btn-trash","btn-light",3,"click"],["src","https://img.icons8.com/color/26/000000/trash--v1.png"],[1,"btn","btn-ligth","btn-activate",3,"click"],["src","https://img.icons8.com/fluency/24/000000/play.png"],[1,"btn","btn-link","btn-activate",3,"click"],["src","https://img.icons8.com/external-bearicons-blue-bearicons/24/000000/external-play-essential-collection-bearicons-blue-bearicons.png"],["colspan","12"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"button",2),m.ec("click",(function(){return e.onLoadScenarios()})),m.Ec(3," Load Scenarios "),m.Rb(),m.Rb(),m.Rb(),m.Sb(4,"table",3),m.Sb(5,"thead",4),m.Sb(6,"tr"),m.Ob(7,"th",5),m.Sb(8,"th",5),m.Ec(9," Name "),m.Rb(),m.Sb(10,"th",5),m.Ec(11," Description "),m.Rb(),m.Sb(12,"th",5),m.Ec(13," Arrhythmias "),m.Rb(),m.Sb(14,"th",5),m.Ec(15," Pathologies "),m.Rb(),m.Sb(16,"th",5),m.Ec(17," Medications "),m.Rb(),m.Ob(18,"th",5),m.Rb(),m.Rb(),m.Cc(19,U,2,1,"tbody",6),m.Cc(20,W,4,0,"tbody",6),m.Rb()),2&t&&(m.zb(19),m.mc("ngIf",e.scenariosSelected&&e.scenariosSelected.length>0),m.zb(1),m.mc("ngIf",!e.scenariosSelected||0==e.scenariosSelected.length))},directives:[v.l,v.k],pipes:[D],styles:[".table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-scenarios[_ngcontent-%COMP%]{margin-top:1%}.row-2[_ngcontent-%COMP%]{margin-top:2%}.table-arr[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table-med[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table-path[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table-scenarios[_ngcontent-%COMP%], .table-scenarios[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-activate[_ngcontent-%COMP%]{padding:0;margin:0}.btn-edit[_ngcontent-%COMP%]{padding-left:5%}.btn-add[_ngcontent-%COMP%], .save-changes[_ngcontent-%COMP%]{margin-left:2%;background-color:#59478d;border-color:#59478d;color:#fff}.btn-add[_ngcontent-%COMP%]:hover, .save-changes[_ngcontent-%COMP%]:hover{color:#59478d;border-color:#fff;background-color:#fff}.td-icons[_ngcontent-%COMP%]{min-width:95px;max-width:95px}.td-arr[_ngcontent-%COMP%], .td-med[_ngcontent-%COMP%], .td-path[_ngcontent-%COMP%]{max-width:200px;overflow-x:hidden}"]}),Q);function X(t,e){if(1&t&&(m.Sb(0,"div",2),m.Ec(1),m.Rb()),2&t){var n=e.$implicit,o=m.gc(2);m.zb(1),m.Gc(" ",n[o.key]," ")}}function K(t,e){if(1&t&&m.Cc(0,X,2,1,"div",1),2&t){var n=m.gc();m.mc("ngForOf",n.errors)}}var Z,tt=((Z=function(){function t(){_classCallCheck(this,t),this.errors=null,this.key=null}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"isDisplayErrors",value:function(){var t=this;if(this.key&&this.errors){var e=!1;return this.errors.forEach((function(n){void 0!==n[t.key]&&(e=!0)})),e}return null!==this.errors}}]),t}()).\u0275fac=function(t){return new(t||Z)},Z.\u0275cmp=m.Hb({type:Z,selectors:[["app-message"]],inputs:{errors:"errors",key:"key"},decls:1,vars:1,consts:[[3,"ngIf"],["class","invalid-feedback mb-2","style","display: block",4,"ngFor","ngForOf"],[1,"invalid-feedback","mb-2",2,"display","block"]],template:function(t,e){1&t&&m.Cc(0,K,1,1,"ng-template",0),2&t&&m.mc("ngIf",e.errors&&e.isDisplayErrors())},directives:[v.l,v.k],styles:[""]}),Z),et=n("FkO/"),nt=n("kzyy"),ot=n("ZtOR"),it=n("CV0D"),at=["chart"];function rt(t,e){if(1&t&&(m.Sb(0,"div",1),m.Ob(1,"apx-chart",2,3),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("series",n.getChart().series)("stroke",n.getChart().stroke)("xaxis",n.getChart().xaxis)("yaxis",n.getChart().yaxis)("markers",n.getChart().markers)("dataLabels",n.getChart().dataLabels)("chart",n.getChart().chart)("grid",n.getChart().grid)("tooltip",n.getChart().tooltip)("legend",n.getChart().legend)("fill",n.getChart().fill)}}var ct,st=((ct=function(){function t(){_classCallCheck(this,t),this.breathCurve=!1,this.action="stop",this.timer=0,this.currentIndex=0,this.maxSize=51,this.curvesHelper=new ot.a,this.monitorConfiguration=new nt.a,this.firstSimulation=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.createDynamicChart(),this.simulateCurve()}},{key:"ngOnDestroy",value:function(){clearInterval(this.simulationTimer)}},{key:"createDynamicChart",value:function(){if(this.curves.curveValues.length>0){var t=this.curvesHelper.getMaxY(this.curves.curveValues),e=this.curvesHelper.getMinY(this.curves.curveValues),n=new et.a({colorLine:this.curves.curveConfiguration.colorLine,height:100,minX:0,maxX:3,minY:e,maxY:t,toolbar:!1}),o=null;"stop"!==this.action&&"CO2"===this.curves.curveConfiguration.label.toUpperCase()&&(o="area"),n.setChart([],o),this.chart=n.getChart()}}},{key:"simulateCurve",value:function(){var t=this;this.simulationTimer=setInterval((function(){t.updateTimer(),t.updateCurrentIndex(),"pause"!==t.action&&(t.initiateSimulation(),t.timer+=t.breathCurve?t.monitorConfiguration.getMonitorConfiguration().freqBreath/1e3:t.monitorConfiguration.getMonitorConfiguration().freqHeart/1e3),t.currentIndex+=1,t.updateChart(t.chartComponent.series)}),30)}},{key:"getChart",value:function(){return this.chart}},{key:"updateTimer",value:function(){this.firstSimulation?this.timer>=3&&(this.timer=0,this.firstSimulation=!1,this.createSimulationDataset()):this.timer>=3&&(this.timer=0,this.swapCurves())}},{key:"createSimulationDataset",value:function(){var t=this.chart.series;t&&t.push({data:[],color:t[0].color})}},{key:"swapCurves",value:function(){if(this.curves.curveValues.length>0){var t=this.chart.series;t[0].data=t[1].data,t[1].data=[],this.updateChart(t)}}},{key:"updateChart",value:function(t){var e=this.chartComponent;e&&e.updateSeries(t,!1)}},{key:"initiateSimulation",value:function(){if(this.firstSimulation)this.updateDataset();else if(this.chartComponent.series){var t=this.chartComponent.series.slice();this.updateDatasetSimulation(t)}}},{key:"updateDataset",value:function(){var t,e=null===(t=this.chart)||void 0===t?void 0:t.series.slice();e&&e[0].data.push("stop"===this.action?[this.timer,(this.chart.yaxis.min+this.chart.yaxis.max)/2]:[this.timer,this.curves.curveValues[this.currentIndex][1]])}},{key:"updateDatasetSimulation",value:function(t){var e=t[0].data,n=t[1].data;n.push("stop"===this.action?[this.timer,(this.chart.yaxis.min+this.chart.yaxis.max)/2]:[this.timer,this.curves.curveValues[this.currentIndex][1]]),this.deleteOldPoints(e,this.timer),t[0].data=e,t[1].data=n}},{key:"deleteOldPoints",value:function(t,e){for(var n=0;n<t.length&&t[n][0]<=e;)t.splice(n,1),n++}},{key:"updateCurrentIndex",value:function(){this.currentIndex>=this.maxSize&&(this.currentIndex=0)}}]),t}()).\u0275fac=function(t){return new(t||ct)},ct.\u0275cmp=m.Hb({type:ct,selectors:[["app-mini-monitor"]],viewQuery:function(t,e){var n;1&t&&m.Jc(at,!0),2&t&&m.tc(n=m.fc())&&(e.chartComponent=n.first)},inputs:{curves:"curves",breathCurve:"breathCurve",action:"action",rate:"rate"},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[3,"series","stroke","xaxis","yaxis","markers","dataLabels","chart","grid","tooltip","legend","fill"],["chart",""]],template:function(t,e){1&t&&m.Cc(0,rt,3,11,"div",0),2&t&&m.mc("ngIf",e.getChart())},directives:[v.l,it.a],styles:[""]}),ct);function lt(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",42),m.ec("click",(function(){return m.vc(n),m.gc().onSaveChanges()})),m.Ec(1,"Save changes"),m.Rb()}}function bt(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",43),m.ec("click",(function(){return m.vc(n),m.gc().onSaveChanges()})),m.Ec(1,"Save changes"),m.Rb()}}function ut(t,e){if(1&t&&m.Ob(0,"app-message",44),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","simulationName")}}function mt(t,e){if(1&t&&(m.Sb(0,"option",47),m.Ec(1),m.Rb()),2&t){var n=m.gc(2);m.mc("ngValue",n.formGroup.value.animalSpecie),m.zb(1),m.Gc(" ",n.formGroup.value.animalSpecie.name,"")}}function ft(t,e){if(1&t&&(m.Sb(0,"option",47),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function pt(t,e){if(1&t&&m.Cc(0,ft,2,2,"option",45),2&t){var n=e.$implicit,o=m.gc(2);m.mc("ngIf",o.formGroup.value.animalSpecie&&n.name!==o.formGroup.value.animalSpecie.name)}}function gt(t,e){if(1&t&&(m.Cc(0,mt,2,2,"option",45),m.Cc(1,pt,1,1,"ng-template",46)),2&t){var n=m.gc();m.mc("ngIf",null==n.formGroup.value.animalSpecie?null:n.formGroup.value.animalSpecie.name),m.zb(1),m.mc("ngForOf",n.animalSpecies)}}function dt(t,e){if(1&t&&m.Ob(0,"app-message",44),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","animalSpecie")}}function ht(t,e){1&t&&(m.Sb(0,"div",48),m.Ob(1,"div",49),m.Rb())}function vt(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",55),m.Sb(2,"span",56),m.Ec(3),m.Rb(),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.nc("value",n.heartRate),m.zb(2),m.Fc(n.heartRate)}}function St(t,e){1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",57),m.Sb(2,"span",56),m.Ec(3,"0"),m.Rb(),m.Rb())}function yt(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",58),m.Sb(2,"span",56),m.Ec(3),m.Rb(),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.nc("value",n.breathRate),m.zb(2),m.Fc(n.breathRate)}}function Ct(t,e){1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",57),m.Sb(2,"span",56),m.Ec(3,"0"),m.Rb(),m.Rb())}function Rt(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",59),m.Sb(2,"span",56),m.Ec(3),m.Rb(),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.nc("value",n.temperature),m.zb(2),m.Fc(n.temperature)}}function kt(t,e){1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",60),m.Sb(2,"span",56),m.Ec(3,"0"),m.Rb(),m.Rb())}function Ot(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",61),m.Sb(2,"span",56),m.Ec(3),m.Rb(),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.nc("value",n.spo2),m.zb(2),m.Fc(n.spo2)}}function Pt(t,e){1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",57),m.Sb(2,"span",56),m.Ec(3,"0"),m.Rb(),m.Rb())}function _t(t,e){if(1&t&&(m.Sb(0,"div",50),m.Sb(1,"form",8),m.Sb(2,"div",9),m.Sb(3,"div",51),m.Sb(4,"label",19),m.Ec(5,"Heart Rate"),m.Rb(),m.Cc(6,vt,4,2,"div",52),m.Cc(7,St,4,0,"div",52),m.Rb(),m.Sb(8,"div",51),m.Sb(9,"label",19),m.Ec(10,"Respiration Rate [rpm]"),m.Rb(),m.Cc(11,yt,4,2,"div",52),m.Cc(12,Ct,4,0,"div",52),m.Rb(),m.Sb(13,"div",51),m.Sb(14,"label",19),m.Ec(15,"Temperature [\xb0C]"),m.Rb(),m.Cc(16,Rt,4,2,"div",52),m.Cc(17,kt,4,0,"div",52),m.Rb(),m.Rb(),m.Sb(18,"div",53),m.Sb(19,"div",51),m.Sb(20,"label",19),m.Ec(21,"SPO2"),m.Rb(),m.Cc(22,Ot,4,2,"div",52),m.Cc(23,Pt,4,0,"div",52),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("formGroup",n.fromGroupParameters),m.zb(5),m.mc("ngIf","stop"!==(null==n.currentState?null:n.currentState.action)),m.zb(1),m.mc("ngIf","stop"===(null==n.currentState?null:n.currentState.action)),m.zb(4),m.mc("ngIf","stop"!==(null==n.currentState?null:n.currentState.action)),m.zb(1),m.mc("ngIf","stop"===(null==n.currentState?null:n.currentState.action)),m.zb(4),m.mc("ngIf","stop"!==(null==n.currentState?null:n.currentState.action)),m.zb(1),m.mc("ngIf","stop"===(null==n.currentState?null:n.currentState.action)),m.zb(5),m.mc("ngIf","stop"!==(null==n.currentState?null:n.currentState.action)),m.zb(1),m.mc("ngIf","stop"===(null==n.currentState?null:n.currentState.action))}}function xt(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",70),m.Sb(2,"span",71),m.Ec(3),m.Rb(),m.Rb()),2&t){var n=m.gc(5);m.zb(1),m.nc("max",n.systolicIbp-1),m.nc("value",n.diastolicIbp),m.zb(2),m.Fc(n.diastolicIbp)}}function It(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",72),m.Sb(2,"span",71),m.Ec(3,"0"),m.Rb(),m.Rb()),2&t){var n=m.gc(5);m.zb(1),m.nc("max",n.systolicIbp-1)}}function Et(t,e){if(1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",73),m.Sb(2,"span",71),m.Ec(3),m.Rb(),m.Rb()),2&t){var n=m.gc(5);m.zb(3),m.Fc(n.systolicIbp)}}function zt(t,e){1&t&&(m.Sb(0,"div",54),m.Ob(1,"input",74),m.Sb(2,"span",71),m.Ec(3,"0"),m.Rb(),m.Rb())}function wt(t,e){if(1&t&&(m.Sb(0,"div",9),m.Sb(1,"div",51),m.Sb(2,"label",19),m.Ec(3,"Dystolic Pressure"),m.Rb(),m.Cc(4,xt,4,3,"div",52),m.Cc(5,It,4,1,"div",52),m.Rb(),m.Sb(6,"div",51),m.Sb(7,"label",19),m.Ec(8,"Systolic Pressure"),m.Rb(),m.Cc(9,Et,4,1,"div",52),m.Cc(10,zt,4,0,"div",52),m.Rb(),m.Rb()),2&t){var n=m.gc(4);m.zb(4),m.mc("ngIf","stop"!==(null==n.currentState?null:n.currentState.action)),m.zb(1),m.mc("ngIf","stop"===(null==n.currentState?null:n.currentState.action)),m.zb(4),m.mc("ngIf","stop"!==(null==n.currentState?null:n.currentState.action)),m.zb(1),m.mc("ngIf","stop"===(null==n.currentState?null:n.currentState.action))}}function Mt(t,e){if(1&t&&(m.Sb(0,"div",66),m.Sb(1,"p"),m.Ec(2),m.Rb(),m.Sb(3,"form",8),m.Cc(4,wt,11,4,"div",67),m.Rb(),m.Rb(),m.Sb(5,"div",68),m.Ob(6,"app-mini-monitor",69),m.Rb()),2&t){var n=m.gc(),o=n.$implicit,i=n.index,a=m.gc(2);m.zb(2),m.Gc(" ",null==o?null:o.curveConfiguration.label,""),m.zb(1),m.mc("formGroup",a.fromGroupParameters),m.zb(1),m.mc("ngIf","IBP"==(null==o?null:o.curveConfiguration.label)),m.zb(2),m.mc("curves",o)("rate",a.getRate(i))("action",null==a.currentState?null:a.currentState.action)("breathCurve",a.breathCurve(i))}}function Gt(t,e){if(1&t&&(m.Sb(0,"div",9),m.Cc(1,Mt,7,7,"ng-template",17),m.Rb()),2&t){var n=e.$implicit;m.zb(1),m.mc("ngIf",n.curveValues.length>0)}}function Nt(t,e){if(1&t&&(m.Sb(0,"div",62),m.Sb(1,"div",63),m.Sb(2,"h3",64),m.Ec(3,"Curves Configuration"),m.Rb(),m.Rb(),m.Cc(4,Gt,2,1,"div",65),m.Rb()),2&t){var n=m.gc();m.zb(4),m.mc("ngForOf",n.currentState.curves)}}function Ft(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",31),m.ec("click",(function(){return m.vc(n),m.gc().onUnmuteAlarms()})),m.Ob(1,"img",75),m.Ec(2," \xa0 Unmute alarms"),m.Rb()}}function At(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",31),m.ec("click",(function(){return m.vc(n),m.gc().onMuteAlarms()})),m.Ob(1,"img",76),m.Ec(2," \xa0 Mute alarms "),m.Rb()}}var Dt,qt=function(){return["/monitor"]},Lt=((Dt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a,r,c){var s;return _classCallCheck(this,n),(s=e.call(this)).animalSpecieService=t,s.fb=o,s.toast=i,s.simulationService=a,s.curvesService=r,s.localStorageService=c,s.scenariosSimulation=[],s.animalSpecies=[],s.animalSpecie={},s.simulation={},s.indexActive=0,s.indexSimulationActive=0,s.originalCurves=[],s.heartRate=0,s.breathRate=0,s.temperature=0,s.spo2=0,s.muteAlarms=!1,s.systolicIbp=0,s.avgIbp=0,s.diastolicIbp=0,s}return _createClass(n,[{key:"ngOnInit",value:function(){this.localStorageService.removeValue("simulationState"),this.setSubmitForm(!1),this.setLoading(!0),this.loadData(),this.initFormGroup(),this.initFormParameters(),this.onValueChanges(),this.onLoadCurves(this.formGroup.value.animalSpecie)}},{key:"ngOnDestroy",value:function(){this.localStorageService.removeValue("simulationState")}},{key:"loadData",value:function(){var t=this;this.simulation=JSON.parse(localStorage.getItem("Simulation")),this.animalSpecieService.list().subscribe((function(e){t.animalSpecies=e.data}),(function(t){console.log(t)})),this.simulation?(this.simulation.scenarios&&(this.scenariosSimulation=this.simulation.scenarios,this.activeScenario=this.scenariosSimulation[0]),this.simulation.animalSpecie&&(this.animalSpecie=this.simulation.animalSpecie)):this.animalSpecieService.list().subscribe((function(e){t.setLoading(!1),t.animalSpecies=e.data}),(function(t){console.log(t)}))}},{key:"initFormGroup",value:function(){this.formGroup=this.fb.group({simulationName:[this.simulation?this.simulation.name:"",C.w.required],simulationDescription:[this.simulation?this.simulation.description:"",C.w.required],animalSpecie:[this.animalSpecie?this.animalSpecie:"",C.w.required]})}},{key:"initFormValues",value:function(){this.heartRate=0,this.breathRate=0,this.temperature=0,this.spo2=0,this.fromGroupParameters.setValue({heartRate:0,breathRate:0,temperature:0,spo2:0,ibpSystolic:0,ibpDiastolic:0})}},{key:"initFormParameters",value:function(){this.fromGroupParameters=this.fb.group({heartRate:[this.heartRate?this.heartRate:0],breathRate:[this.breathRate?this.breathRate:0],temperature:[this.temperature?this.temperature:0],spo2:[this.spo2?this.spo2:0],ibpSystolic:[this.systolicIbp?this.systolicIbp:0],ibpDiastolic:[this.diastolicIbp?this.diastolicIbp:0]})}},{key:"onSaveChanges",value:function(){this.submitForm=!0,this.saveSimulation()}},{key:"onValueChanges",value:function(){var t=this;this.formGroup.get("animalSpecie").valueChanges.subscribe((function(e){t.onLoadCurves(e),t.updateState()})),this.fromGroupParameters.get("heartRate").valueChanges.subscribe((function(e){t.heartRate=e})),this.fromGroupParameters.get("breathRate").valueChanges.subscribe((function(e){t.breathRate=e})),this.fromGroupParameters.get("temperature").valueChanges.subscribe((function(e){t.temperature=e})),this.fromGroupParameters.get("spo2").valueChanges.subscribe((function(e){t.spo2=e})),this.fromGroupParameters.get("ibpDiastolic").valueChanges.subscribe((function(e){t.diastolicIbp=e,t.updateDiastolicIBP()})),this.fromGroupParameters.get("ibpSystolic").valueChanges.pipe(Object(R.a)()).subscribe((function(e){t.systolicIbp=e,t.adjustPressureValues(),t.updateSystolicIBP()}))}},{key:"onLoadCurves",value:function(t){var e,n=this;(null===(e=this.activeScenario)||void 0===e?void 0:e.id_scenario)&&(null==t?void 0:t.id_as)?this.curvesService.findAll({animalSpecie:t.id_as,scenario:this.activeScenario.id_scenario}).subscribe((function(t){if(t){var e="stop",o=!1;n.currentState&&(e="play",o=!0),n.currentState=t,n.originalCurves=n.currentState.curves.slice(),n.currentState.action=e,n.currentState.muteAlarms=!1,n.currentState.newScenario=o,n.onLoadParameters(),n.applyChanges()}else n.currentState=null,n.originalCurves=[],n.localStorageService.removeValue("simulationState")}),(function(t){console.log(t)})):(this.currentState=null,this.originalCurves=[],this.localStorageService.removeValue("simulationState"))}},{key:"applyChanges",value:function(){this.localStorageService.saveValue("simulationState",JSON.stringify(this.currentState)),this.saveParameterInfo(),this.updateState()}},{key:"onLoadParameters",value:function(){var t=this;this.currentState.curves=this.currentState.curves.filter((function(e){switch(e.curveConfiguration.label.toUpperCase()){case"RESP":return t.breathRate=e.curveConfiguration.refValue,e;case"CAR":return t.heartRate=e.curveConfiguration.refValue,e;case"TEMP":return t.temperature=e.curveConfiguration.refValue,e;case"SPO2":return t.spo2=e.curveConfiguration.refValue,e;case"IBP":return t.systolicIbp=Math.round(t.getSystolicPressure(e.curveValues).value),t.diastolicIbp=Math.round(e.curveValues[0][1]),e;default:return e}})),this.fromGroupParameters.setValue({ibpSystolic:this.systolicIbp,ibpDiastolic:this.diastolicIbp,heartRate:this.heartRate,breathRate:this.breathRate,temperature:this.temperature,spo2:this.spo2})}},{key:"saveParameterInfo",value:function(){this.localStorageService.saveValue("parameterState",JSON.stringify({temperature:this.temperature,heartRate:this.heartRate,breathRate:this.breathRate,spO2:this.spo2}))}},{key:"saveSimulation",value:function(){var t=this,e={name:this.formGroup.value.simulationName,description:this.formGroup.value.simulationDescription,animalSpecie:{id_as:this.formGroup.value.animalSpecie.id_as,name:this.formGroup.value.animalSpecie.name,description:this.formGroup.value.animalSpecie.description},scenarios:this.scenariosSimulation};this.simulation?this.simulationService.updateById(this.simulation.id_simulation,e).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-left",t.toast.toastrConfig.closeButton=!0,t.toast.success("Simulation saved!")}),(function(e){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-left",t.toast.toastrConfig.closeButton=!0,t.toast.error("Error saving simulation")})):this.simulationService.create(e).subscribe((function(n){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-left",t.toast.toastrConfig.closeButton=!0,t.toast.success("Simulation saved!"),t.simulation=e,t.simulation.id_simulation=n.id_simulation}),(function(e){console.error(e),t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-left",t.toast.toastrConfig.closeButton=!0,t.toast.error("Error saving simulation")}))}},{key:"getScenarios",value:function(t){this.scenariosSimulation=t,this.activeScenario!=this.scenariosSimulation[this.indexSimulationActive]&&(this.activeScenario=this.scenariosSimulation[this.indexSimulationActive],this.currentState=null,this.initFormValues(),this.onLoadCurves(this.formGroup.value.animalSpecie))}},{key:"getPosScenarios",value:function(t){this.indexSimulationActive!=t.indexActive&&(this.indexSimulationActive=t.indexActive,this.initFormValues(),this.onLoadCurves(this.formGroup.value.animalSpecie)),this.indexActive=t.indexEdit}},{key:"onPlaySimulation",value:function(){this.currentState&&(this.currentState.action="play"),this.localStorageService.saveValue("simulationState",JSON.stringify(this.currentState))}},{key:"onPauseSimulation",value:function(){this.currentState&&(this.currentState.action="pause"),this.localStorageService.saveValue("simulationState",JSON.stringify(this.currentState))}},{key:"onMuteAlarms",value:function(){this.currentState&&(this.currentState.muteAlarms=!0),this.muteAlarms=!0,this.updateState()}},{key:"onUnmuteAlarms",value:function(){this.currentState&&(this.currentState.muteAlarms=!1),this.muteAlarms=!1,this.updateState()}},{key:"onStopSimulation",value:function(){this.currentState&&(this.currentState.action="stop"),this.localStorageService.saveValue("simulationState",JSON.stringify(this.currentState))}},{key:"updateState",value:function(){this.currentState&&(this.currentState.state++,this.currentState.newScenario=!1,this.localStorageService.saveValue("simulationState",JSON.stringify(this.currentState)))}},{key:"getRate",value:function(t){return"CO2"===this.currentState.curves[t].curveConfiguration.label.toUpperCase()?this.breathRate:this.heartRate}},{key:"breathCurve",value:function(t){var e=this.currentState.curves[t];return"ETCO2"===e.curveConfiguration.label.toUpperCase()||"CO2"===e.curveConfiguration.label.toUpperCase()}},{key:"trackByFnAnimalSpecies",value:function(t,e){return e.id_as}},{key:"updateSystolicIBP",value:function(){var t=this.originalCurves.slice();if(t&&t.length>0){var e=_slicedToArray(t.filter((function(t){return"IBP"==t.curveConfiguration.label})),1)[0],n=this.getSystolicPressure(e.curveValues),o=this.calculateAdjustRate(n.value,this.systolicIbp);this.adjustSystIBP(e.curveValues,o,!(n.value>this.systolicIbp)),e.curveValues[n.index][1]=this.systolicIbp,t[2]=e,this.currentState.curves=t}}},{key:"updateDiastolicIBP",value:function(){var t=this.originalCurves.slice();if(t&&t.length>0){var e=_slicedToArray(t.filter((function(t){return"IBP"==t.curveConfiguration.label})),1)[0];e&&(this.adjustDiastIBP(e.curveValues),t[2]=e,this.currentState.curves=t)}}},{key:"adjustPressureValues",value:function(){this.systolicIbp<=this.diastolicIbp&&(this.diastolicIbp=this.systolicIbp-1)}},{key:"adjustSystIBP",value:function(t,e,n){for(var o=1;o<t.length;){var i=t[o][1]*e;n?t[o][1]+=i:t[o][1]-=i,t[o][1]<0&&(t[o][1]=0),o++}}},{key:"adjustDiastIBP",value:function(t){t[0][1]=this.diastolicIbp;for(var e=t.length-1,n=e;n<=e-5;n--)t[n][1]=this.diastolicIbp}},{key:"calculateAdjustRate",value:function(t,e){var n=Math.abs(t-e);return t&&(n/=t),n}},{key:"getSystolicPressure",value:function(t){for(var e=t[0][1],n=0,o=0;o<t.length;o++)t[o][1]>e&&(e=t[o][1],n=o);return{index:n,value:e}}}]),n}(y.a)).\u0275fac=function(t){return new(t||Dt)(m.Nb(h),m.Nb(C.e),m.Nb(k.b),m.Nb(c.a),m.Nb(O.a),m.Nb(P.a))},Dt.\u0275cmp=m.Hb({type:Dt,selectors:[["app-panel"]],features:[m.wb],decls:59,vars:14,consts:[[1,"panel-header"],[1,"row","visualizationHeader"],[1,"col-md-10"],[1,"textSimulation"],[1,"col-md-2"],["type","submit","class","btn btn-primary saveChanges-top",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary saveChanges-top","disabled","",3,"click",4,"ngIf"],[1,"container","container-form"],[3,"formGroup"],[1,"row"],[1,"col-md-3"],["for","simulationName",1,"form-label"],["formControlName","simulationName",1,"form-control"],[3,"errors","key",4,"ngIf"],["for","animalSpecies",1,"form-label"],["id","animalSpecie","formControlName","animalSpecie",1,"form-select","form-control"],["value",""],[3,"ngIf"],[1,"col-md-6"],[1,"form-label"],["rows","4","formControlName","simulationDescription",1,"form-control"],[1,"row","mt-4"],[1,"scenario-configuration"],[1,"text-scenario","text-center"],[1,"col-md-12"],[3,"scenariosSelected","posScenarios","returnScenarios"],["class","mt-4 progress",4,"ngIf"],["class","container form-parameters",4,"ngIf"],["class","container",4,"ngIf"],[1,"footer"],[1,"container","footerBtn"],[1,"btn",3,"click"],["src","https://img.icons8.com/fluency/40/000000/refresh.png"],["src","https://img.icons8.com/fluency/40/000000/play.png","title","Play simulation"],["src","https://img.icons8.com/fluency/40/000000/pause.png","title","Freeze simulation"],["title","Stop simulation",1,"btn",3,"click"],["src","https://img.icons8.com/fluency/40/000000/stop.png"],["class","btn",3,"click",4,"ngIf"],[1,"btn"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/40/000000/external-settings-interface-kiranshastry-lineal-color-kiranshastry.png"],["target","_blank",3,"routerLink"],["src","https://img.icons8.com/external-icongeek26-flat-icongeek26/40/000000/external-ecg-pregnancy-amp-maternity-icongeek26-flat-icongeek26.png"],["type","submit",1,"btn","btn-primary","saveChanges-top",3,"click"],["type","submit","disabled","",1,"btn","btn-primary","saveChanges-top",3,"click"],[3,"errors","key"],[3,"ngValue",4,"ngIf"],["ngFor","",3,"ngForOf"],[3,"ngValue"],[1,"mt-4","progress"],["role","progressbar","aria-valuenow","60","aria-valuemin","0","aria-valuemax","100",1,"bar-separator","progress-bar","bg-info"],[1,"container","form-parameters"],[1,"col-sm-4"],["class","row ml-3",4,"ngIf"],[1,"row","mt-2"],[1,"row","ml-3"],["type","range","min","30","max","250","step","1","formControlName","heartRate",1,"form-range",3,"value"],[1,"rate-value"],["type","range","disabled","","min","30","max","250","step","1","value","0",1,"form-range"],["type","range","min","1","max","100","step","1","formControlName","breathRate",1,"form-range",3,"value"],["type","range","min","30","max","45","step","0.5","formControlName","temperature",1,"form-range",3,"value"],["type","range","min","30","max","250","step","1","value","0","disabled","",1,"form-range"],["type","range","min","30","max","250","step","1","formControlName","spo2",1,"form-range",3,"value"],[1,"container"],[1,"curves-configuration-text"],[1,"text-curves","text-center"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-6","param-configuration"],["class","row",4,"ngIf"],[1,"col-md-5","curves-configuration","mini-monitor"],[3,"curves","rate","action","breathCurve"],["type","range","min","0","step","1","formControlName","ibpDiastolic",1,"form-range","form-range-box",3,"max","value"],[1,"rate-value-box"],["type","range","min","0","step","1","value","0","disabled","",1,"form-range","form-range-box",3,"max"],["type","range","min","0","max","250","step","1","formControlName","ibpSystolic",1,"form-range","form-range-box"],["type","range","min","0","max","250","step","1","disabled","","value","0",1,"form-range","form-range-box"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/40/000000/external-mute-multimedia-kiranshastry-lineal-color-kiranshastry.png"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/40/000000/external-volume-multimedia-kiranshastry-lineal-color-kiranshastry.png"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"h3",3),m.Ec(4,"Simulation edition"),m.Rb(),m.Rb(),m.Sb(5,"div",4),m.Cc(6,lt,2,0,"button",5),m.Cc(7,bt,2,0,"button",6),m.Rb(),m.Rb(),m.Rb(),m.Sb(8,"div",7),m.Sb(9,"form",8),m.Sb(10,"div",9),m.Sb(11,"div",10),m.Sb(12,"label",11),m.Ec(13,"Simulation Name"),m.Rb(),m.Ob(14,"input",12),m.Cc(15,ut,1,2,"app-message",13),m.Rb(),m.Sb(16,"div",10),m.Sb(17,"label",14),m.Ec(18,"Animal Specie"),m.Rb(),m.Sb(19,"select",15),m.Sb(20,"option",16),m.Ec(21,"Choose Animal Specie"),m.Rb(),m.Cc(22,gt,2,2,"ng-template",17),m.Rb(),m.Cc(23,dt,1,2,"app-message",13),m.Rb(),m.Sb(24,"div",18),m.Sb(25,"label",19),m.Ec(26,"Simulation description"),m.Rb(),m.Ob(27,"textarea",20),m.Rb(),m.Rb(),m.Rb(),m.Sb(28,"div",21),m.Sb(29,"div",22),m.Sb(30,"h3",23),m.Ec(31,"Scenario Configuration"),m.Rb(),m.Rb(),m.Sb(32,"div",24),m.Sb(33,"app-scenarios",25),m.ec("posScenarios",(function(t){return e.getPosScenarios(t)}))("returnScenarios",(function(t){return e.getScenarios(t)})),m.Rb(),m.Rb(),m.Rb(),m.Cc(34,ht,2,0,"div",26),m.Rb(),m.Cc(35,_t,24,9,"div",27),m.Cc(36,Nt,5,1,"div",28),m.Sb(37,"footer",29),m.Sb(38,"div",30),m.Sb(39,"button",31),m.ec("click",(function(){return e.applyChanges()})),m.Ob(40,"img",32),m.Ec(41,"\xa0 Apply Changes "),m.Rb(),m.Sb(42,"button",31),m.ec("click",(function(){return e.onPlaySimulation()})),m.Ob(43,"img",33),m.Ec(44,"\xa0Play"),m.Rb(),m.Sb(45,"button",31),m.ec("click",(function(){return e.onPauseSimulation()})),m.Ob(46,"img",34),m.Ec(47,"\xa0Freeze"),m.Rb(),m.Sb(48,"button",35),m.ec("click",(function(){return e.onStopSimulation()})),m.Ob(49,"img",36),m.Ec(50,"\xa0Stop"),m.Rb(),m.Cc(51,Ft,3,0,"button",37),m.Cc(52,At,3,0,"button",37),m.Sb(53,"button",38),m.Ob(54,"img",39),m.Ec(55," \xa0 Monitor settings"),m.Rb(),m.Sb(56,"a",40),m.Ob(57,"img",41),m.Ec(58," \xa0 Go to Monitor "),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(6),m.mc("ngIf",e.formGroup.valid),m.zb(1),m.mc("ngIf",!e.formGroup.valid),m.zb(2),m.mc("formGroup",e.formGroup),m.zb(6),m.mc("ngIf",e.isSubmitForm()),m.zb(7),m.mc("ngIf",e.animalSpecies.length>0),m.zb(1),m.mc("ngIf",e.isSubmitForm()),m.zb(10),m.mc("scenariosSelected",e.scenariosSimulation),m.zb(1),m.mc("ngIf",(null==e.currentState||null==e.currentState.curves?null:e.currentState.curves.length)>0),m.zb(1),m.mc("ngIf",(null==e.currentState||null==e.currentState.curves?null:e.currentState.curves.length)>0),m.zb(1),m.mc("ngIf",(null==e.currentState?null:e.currentState.curves.length)>0),m.zb(15),m.mc("ngIf",e.muteAlarms),m.zb(1),m.mc("ngIf",!e.muteAlarms),m.zb(4),m.mc("routerLink",m.pc(13,qt)))},directives:[v.l,C.y,C.m,C.g,C.b,C.l,C.f,C.v,C.p,C.x,Y,S.c,tt,v.k,C.s,st],styles:[".bar-separator[_ngcontent-%COMP%], .panel-header[_ngcontent-%COMP%]{width:100%}.textSimulation[_ngcontent-%COMP%]{text-align:center;font-size:2em;margin-left:4%}.textScenario[_ngcontent-%COMP%]{width:50%;float:right;text-align:left}.visualizationHeader[_ngcontent-%COMP%]{margin-top:2%;width:100%}.scenarios[_ngcontent-%COMP%]{border:none!important;max-height:300px;overflow:auto}.imgs[_ngcontent-%COMP%]{border:2px solid #fff}.footer[_ngcontent-%COMP%]{width:100%;bottom:0;background-color:#212122;margin-top:2%;position:-webkit-sticky;position:sticky}.footerBtn[_ngcontent-%COMP%]{text-align:center}.curves-configuration[_ngcontent-%COMP%], .param-configuration[_ngcontent-%COMP%]{border-radius:10px;border:2px solid #000;max-height:300px;margin-top:20px}.param-configuration[_ngcontent-%COMP%]{margin-left:2%}.curves-configuration[_ngcontent-%COMP%]{margin-left:4%}.form-parameters[_ngcontent-%COMP%]{margin-top:3%}.rate-value[_ngcontent-%COMP%]{font-size:1.5rem;padding-left:12%}.rate-value-box[_ngcontent-%COMP%]{font-size:1em;width:30%;margin-left:12%}.form-range-box[_ngcontent-%COMP%]{width:80%;margin-left:12%}.btn[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#fff}.mini-monitor[_ngcontent-%COMP%]{background-color:#000}@media (min-width:1024px){.textSimulation[_ngcontent-%COMP%]{text-align:center;padding-left:15%;font-size:2em}.container-form[_ngcontent-%COMP%]{margin-top:4%}.saveChanges-top[_ngcontent-%COMP%]{display:block;background-color:#59478d;border-color:#59478d;color:#fff;height:60px}.saveChanges-top[_ngcontent-%COMP%]:hover{color:#59478d;border-color:#fff;background-color:#fff}.curves-configuration-text[_ngcontent-%COMP%], .scenario-configuration[_ngcontent-%COMP%]{width:100%;margin-top:2%}.text-curves[_ngcontent-%COMP%], .text-scenario[_ngcontent-%COMP%]{font-size:2em}.footerBtn[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{width:30px}}"]}),Dt);function Tt(t,e){if(1&t&&(m.Sb(0,"p",6),m.Ec(1),m.Rb()),2&t){var n=m.gc();m.zb(1),m.Fc(n.content)}}var Vt,Bt=((Vt=function(){function t(e){_classCallCheck(this,t),this.activeModal=e,this.title=null,this.content=null}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"setContent",value:function(t){this.content=t}},{key:"setTitle",value:function(t){this.title=t}},{key:"onClose",value:function(t){this.activeModal.close(t)}}]),t}()).\u0275fac=function(t){return new(t||Vt)(m.Nb(x.a))},Vt.\u0275cmp=m.Hb({type:Vt,selectors:[["app-confirm-modal"]],decls:9,vars:2,consts:[[1,"modal-body"],[1,"word-break","title"],["class","word-break",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[1,"word-break"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"p",1),m.Ec(2),m.Rb(),m.Cc(3,Tt,2,1,"p",2),m.Rb(),m.Sb(4,"div",3),m.Sb(5,"button",4),m.ec("click",(function(){return e.onClose(!0)})),m.Ec(6,"Yes"),m.Rb(),m.Sb(7,"button",5),m.ec("click",(function(){return e.onClose(!1)})),m.Ec(8,"No"),m.Rb(),m.Rb()),2&t&&(m.zb(2),m.Fc(e.title),m.zb(1),m.mc("ngIf",e.content))},directives:[v.l],styles:[".modal-body[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.title[_ngcontent-%COMP%]{font-size:1.5em}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}"]}),Vt);function $t(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Edit Animal Specie"),m.Rb())}function jt(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Create Animal Specie"),m.Rb())}function Ht(t,e){if(1&t&&m.Ob(0,"app-message",21),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","name")}}function Jt(t,e){if(1&t&&m.Ob(0,"app-message",21),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","description")}}function Ut(t,e){1&t&&(m.Sb(0,"button",22),m.Ec(1,"Save changes"),m.Rb())}function Wt(t,e){1&t&&(m.Sb(0,"button",23),m.Ec(1,"Save changes"),m.Rb())}var Qt,Yt=((Qt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var i;return _classCallCheck(this,n),(i=e.call(this)).fb=t,i.activeModal=o,i}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup()}},{key:"initFormGroup",value:function(){this.formGroup=this.fb.group({name:[this.animalSpecie?this.animalSpecie.name:"",C.w.required],description:[this.animalSpecie?this.animalSpecie.description:"",C.w.required],height:[this.animalSpecie?this.animalSpecie.height:null],weight:[this.animalSpecie?this.animalSpecie.weight:null],extraInformation:[this.animalSpecie?this.animalSpecie.extraInformation:null]})}},{key:"setAnimalSpecie",value:function(t){this.animalSpecie=t}},{key:"onSubmit",value:function(){this.setSubmitForm(!0),this.formGroup.valid&&this.activeModal.close(this.formGroup.value)}},{key:"onCancel",value:function(){this.activeModal.close()}}]),n}(y.a)).\u0275fac=function(t){return new(t||Qt)(m.Nb(C.e),m.Nb(x.a))},Qt.\u0275cmp=m.Hb({type:Qt,selectors:[["ng-component"]],features:[m.wb],decls:38,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"modal-header"],[3,"ngIf"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["type","text","id","name","formControlName","name",1,"form-control"],[3,"errors","key",4,"ngIf"],["for","description",1,"col-sm-3","col-form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["for","height",1,"col-sm-3","col-form-label"],["type","number","id","height","formControlName","height",1,"form-control"],["for","weight",1,"col-sm-3","col-form-label"],["type","number","id","weight","formControlName","weight",1,"form-control"],["for","extraInfo",1,"col-sm-3","col-form-label"],["row","4","id","extraInfo","formControlName","extraInformation",1,"form-control"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-save",4,"ngIf"],["type","submit","class","btn btn-primary btn-save","disabled","",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[3,"errors","key"],["type","submit",1,"btn","btn-primary","btn-save"],["type","submit","disabled","",1,"btn","btn-primary","btn-save"]],template:function(t,e){1&t&&(m.Sb(0,"form",0),m.ec("ngSubmit",(function(){return e.onSubmit()})),m.Sb(1,"div",1),m.Cc(2,$t,2,0,"ng-template",2),m.Cc(3,jt,2,0,"ng-template",2),m.Rb(),m.Sb(4,"div",3),m.Sb(5,"div",4),m.Sb(6,"label",5),m.Ec(7,"Name"),m.Rb(),m.Sb(8,"div",6),m.Ob(9,"input",7),m.Cc(10,Ht,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(11,"div",4),m.Sb(12,"label",9),m.Ec(13,"Description"),m.Rb(),m.Sb(14,"div",6),m.Ob(15,"input",10),m.Cc(16,Jt,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(17,"div",4),m.Sb(18,"label",11),m.Ec(19,"Height [cm]"),m.Rb(),m.Sb(20,"div",6),m.Ob(21,"input",12),m.Rb(),m.Rb(),m.Sb(22,"div",4),m.Sb(23,"label",13),m.Ec(24,"Weight [kg]"),m.Rb(),m.Sb(25,"div",6),m.Ob(26,"input",14),m.Rb(),m.Rb(),m.Sb(27,"div",4),m.Sb(28,"label",15),m.Ec(29,"Extra information"),m.Rb(),m.Sb(30,"div",6),m.Sb(31,"textarea",16),m.Ec(32,"                "),m.Rb(),m.Rb(),m.Rb(),m.Sb(33,"div",17),m.Cc(34,Ut,2,0,"button",18),m.Cc(35,Wt,2,0,"button",19),m.Sb(36,"button",20),m.ec("click",(function(){return e.onCancel()})),m.Ec(37,"Cancel"),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.mc("formGroup",e.formGroup),m.zb(2),m.mc("ngIf",e.animalSpecie),m.zb(1),m.mc("ngIf",!e.animalSpecie),m.zb(7),m.mc("ngIf",e.isSubmitForm()),m.zb(6),m.mc("ngIf",e.isSubmitForm()),m.zb(18),m.mc("ngIf",e.formGroup.valid),m.zb(1),m.mc("ngIf",!e.formGroup.valid))},directives:[C.y,C.m,C.g,v.l,C.b,C.l,C.f,C.q,tt],styles:[".modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#212529}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}"]}),Qt);function Xt(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",29),m.Ec(3," Loading... "),m.Rb(),m.Rb(),m.Rb())}function Kt(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Fc(n.weight)}}function Zt(t,e){1&t&&(m.Sb(0,"p",38),m.Ec(1,"-"),m.Rb())}function te(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Fc(n.height)}}function ee(t,e){1&t&&(m.Sb(0,"p",38),m.Ec(1,"-"),m.Rb())}function ne(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Fc(n.extraInformation)}}function oe(t,e){1&t&&(m.Sb(0,"p",38),m.Ec(1,"-"),m.Rb())}function ie(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",31),m.Ec(2),m.Rb(),m.Sb(3,"td",31),m.Ec(4),m.Rb(),m.Sb(5,"td",31),m.Cc(6,Kt,2,1,"p",25),m.Cc(7,Zt,2,0,"p",32),m.Rb(),m.Sb(8,"td",31),m.Cc(9,te,2,1,"p",25),m.Cc(10,ee,2,0,"p",32),m.Rb(),m.Sb(11,"td",31),m.Cc(12,ne,2,1,"p",25),m.Cc(13,oe,2,0,"p",32),m.Rb(),m.Sb(14,"td",31),m.Ec(15),m.hc(16,"date"),m.Rb(),m.Sb(17,"td",33),m.Sb(18,"button",34),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onEdit(t)})),m.Ob(19,"img",35),m.Rb(),m.Sb(20,"span"),m.Sb(21,"button",36),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onDelete(t)})),m.Ob(22,"img",37),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(2),m.Gc(" ",o.name," "),m.zb(2),m.Gc(" ",o.description," "),m.zb(2),m.mc("ngIf",o.weight),m.zb(1),m.mc("ngIf",!o.weight),m.zb(2),m.mc("ngIf",o.height),m.zb(1),m.mc("ngIf",!o.height),m.zb(2),m.mc("ngIf",o.extraInformation),m.zb(1),m.mc("ngIf",!o.extraInformation),m.zb(2),m.Gc(" ",m.ic(16,9,o.updated_at)," ")}}function ae(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,ie,23,11,"tr",30),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.animalSpecies)}}function re(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",29),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}function ce(t,e){if(1&t){var n=m.Tb();m.Sb(0,"ngb-pagination",39),m.ec("pageChange",(function(t){return m.vc(n),m.gc().queryOptions.page=t}))("pageChange",(function(){return m.vc(n),m.gc().onPageChange()})),m.Rb()}if(2&t){var o=m.gc();m.mc("collectionSize",o.paginatorData.totalPages)("page",o.queryOptions.page)("maxSize",o.queryOptions.pageSize)("ellipses",!0)("pageSize",o.queryOptions.pageSize)}}var se,le=((se=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a){var r;return _classCallCheck(this,n),(r=e.call(this)).fb=t,r.animalSpeciesService=o,r.toast=i,r.modal=a,r.order={orderBy:"name",order:"asc"},r.queryOptions={pageSize:5,page:1},r}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup(),this.loadData()}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setLoading(!0),this.animalSpeciesService.list({page:this.queryOptions.page,pageSize:this.queryOptions.pageSize,q:e||this.formGroup.value.q}).subscribe((function(e){e&&(t.animalSpecies=e.data,t.paginatorData={totalPages:e.total,itemsPerPage:e.per_page}),t.setLoading(!1)}),(function(e){t.setLoading(!1),console.error(e)}))}},{key:"initFormGroup",value:function(){var t=this;this.formGroup=this.fb.group({q:[""]}),this.formGroup.get("q").valueChanges.subscribe((function(e){t.setLoading(!0),t.loadData(e)}))}},{key:"onPageChange",value:function(){this.setLoading(!0),this.loadData()}},{key:"onSearch",value:function(){this.queryOptions.page=1,this.setLoading(!0),this.loadData()}},{key:"onEdit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.modal.open(Yt);null!==e?(n.componentInstance.setAnimalSpecie(this.animalSpecies[e]),n.result.then((function(n){n&&t.animalSpeciesService.updateById(t.animalSpecies[e].id_as,n).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The animal specie has been updated"),t.loadData()}),(function(t){console.error(t)}))}))):n.result.then((function(e){e&&t.animalSpeciesService.create(e).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The animal specie has been inserted"),t.loadData()}),(function(t){console.error(t)}))}))}},{key:"onDelete",value:function(t){var e=this,n=this.modal.open(Bt);n.componentInstance.setTitle("You will delete the animal "+this.animalSpecies[t].name),n.componentInstance.setContent("Are you sure?"),n.result.then((function(n){n&&e.animalSpeciesService.delete(e.animalSpecies[t].id_as).subscribe((function(){e.toast.toastrConfig.timeOut=1e3,e.toast.toastrConfig.positionClass="toast-bottom-full-width",e.toast.success("The animal has been deleted"),e.loadData()}),(function(t){console.error(t)}))}))}},{key:"onClearSearch",value:function(){this.queryOptions.page=1,this.initFormGroup(),this.loadData()}}]),n}(y.a)).\u0275fac=function(t){return new(t||se)(m.Nb(C.e),m.Nb(h),m.Nb(k.b),m.Nb(x.b))},se.\u0275cmp=m.Hb({type:se,selectors:[["app-animal-species"]],features:[m.wb],decls:49,vars:5,consts:[[1,"container"],[1,"animal-header"],[1,"row"],[1,"col-md-8"],[1,"title"],[1,"col","text-right"],[1,"btn","btn-primary","btn-add",3,"click"],[1,"search-form","row"],[1,"col-10"],[1,"form","mt-3",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-8"],["for","name"],[1,"input-group"],["type","text","id","q","formControlName","q",1,"form-control"],[1,"input-group-text"],["src","https://img.icons8.com/color/24/000000/search--v1.png"],[1,"form-group","col-md-4","d-flex","align-items-end"],[1,"btn","btn-link","btn-clear",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"row","mt-3"],[1,"col","table-bg"],[1,"table","table-animals","table-hover"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[1,"row","justify-content-center","align-items-center"],[1,"col-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange",4,"ngIf"],["colspan","7"],[4,"ngFor","ngForOf"],["scope","row"],["class","ml-2",4,"ngIf"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/26/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["src","https://img.icons8.com/color/26/000000/trash--v1.png"],[1,"ml-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," Animals "),m.Rb(),m.Rb(),m.Sb(6,"div",5),m.Sb(7,"button",6),m.ec("click",(function(){return e.onEdit()})),m.Ec(8," + Animal Specie "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(9,"div",7),m.Sb(10,"div",8),m.Sb(11,"form",9),m.ec("ngSubmit",(function(){return e.onSearch()})),m.Sb(12,"div",10),m.Sb(13,"div",11),m.Sb(14,"label",12),m.Ec(15,"Search"),m.Rb(),m.Sb(16,"div",13),m.Ob(17,"input",14),m.Sb(18,"div",15),m.Ob(19,"img",16),m.Rb(),m.Rb(),m.Rb(),m.Sb(20,"div",17),m.Sb(21,"button",18),m.ec("click",(function(){return e.onClearSearch()})),m.Ob(22,"i",19),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(23,"div",0),m.Sb(24,"div",20),m.Sb(25,"div",21),m.Sb(26,"table",22),m.Sb(27,"thead",23),m.Sb(28,"tr"),m.Sb(29,"th",24),m.Ec(30," Name "),m.Rb(),m.Sb(31,"th",24),m.Ec(32," Description "),m.Rb(),m.Sb(33,"th",24),m.Ec(34," Weigth "),m.Rb(),m.Sb(35,"th",24),m.Ec(36," Heigth "),m.Rb(),m.Sb(37,"th",24),m.Ec(38," Extra information "),m.Rb(),m.Sb(39,"th",24),m.Ec(40," Last update "),m.Rb(),m.Ob(41,"th",24),m.Rb(),m.Rb(),m.Cc(42,Xt,4,0,"tbody",25),m.Cc(43,ae,2,1,"tbody",25),m.Cc(44,re,4,0,"tbody",25),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(45,"div",0),m.Sb(46,"div",26),m.Sb(47,"div",27),m.Cc(48,ce,1,5,"ngb-pagination",28),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(11),m.mc("formGroup",e.formGroup),m.zb(31),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()&&e.animalSpecies),m.zb(1),m.mc("ngIf",!(e.isLoading()||e.animalSpecies&&0!==e.animalSpecies.length)),m.zb(4),m.mc("ngIf",!e.isLoading()&&e.paginatorData.totalPages>e.queryOptions.pageSize))},directives:[C.y,C.m,C.g,C.b,C.l,C.f,v.l,v.k,x.d],pipes:[v.d],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.animal-header[_ngcontent-%COMP%]{margin-top:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-animals[_ngcontent-%COMP%], .table-animals[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-add[_ngcontent-%COMP%], .btn-search[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-add[_ngcontent-%COMP%]:hover, .btn-search[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#42336e!important;color:#fff}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#fff!important;color:#42336e!important}"]}),se);function be(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Edit Pathology"),m.Rb())}function ue(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Create Pathology"),m.Rb())}function me(t,e){if(1&t&&m.Ob(0,"app-message",17),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","name")}}function fe(t,e){if(1&t&&m.Ob(0,"app-message",17),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","description")}}function pe(t,e){1&t&&(m.Sb(0,"button",18),m.Ec(1,"Save changes"),m.Rb())}function ge(t,e){1&t&&(m.Sb(0,"button",19),m.Ec(1,"Save changes"),m.Rb())}var de,he=((de=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var i;return _classCallCheck(this,n),(i=e.call(this)).fb=t,i.activeModal=o,i}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup()}},{key:"initFormGroup",value:function(){this.formGroup=this.fb.group({name:[this.path?this.path.name:"",C.w.required],description:[this.path?this.path.description:"",C.w.required],extraInformation:[this.path?this.path.extraInformation:null]})}},{key:"setPathology",value:function(t){this.path=t}},{key:"onSubmit",value:function(){this.setSubmitForm(!0),this.formGroup.valid&&this.activeModal.close(this.formGroup.value)}},{key:"onCancel",value:function(){this.activeModal.close()}}]),n}(y.a)).\u0275fac=function(t){return new(t||de)(m.Nb(C.e),m.Nb(x.a))},de.\u0275cmp=m.Hb({type:de,selectors:[["app-modal-edit"]],features:[m.wb],decls:28,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"modal-header"],[3,"ngIf"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["type","text","id","name","formControlName","name",1,"form-control"],[3,"errors","key",4,"ngIf"],["for","description",1,"col-sm-3","col-form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["for","extraInfo",1,"col-sm-3","col-form-label"],["row","4","id","extraInfo","formControlName","extraInformation",1,"form-control"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-save",4,"ngIf"],["type","submit","class","btn btn-primary btn-save","disabled","",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[3,"errors","key"],["type","submit",1,"btn","btn-primary","btn-save"],["type","submit","disabled","",1,"btn","btn-primary","btn-save"]],template:function(t,e){1&t&&(m.Sb(0,"form",0),m.ec("ngSubmit",(function(){return e.onSubmit()})),m.Sb(1,"div",1),m.Cc(2,be,2,0,"ng-template",2),m.Cc(3,ue,2,0,"ng-template",2),m.Rb(),m.Sb(4,"div",3),m.Sb(5,"div",4),m.Sb(6,"label",5),m.Ec(7,"Name"),m.Rb(),m.Sb(8,"div",6),m.Ob(9,"input",7),m.Cc(10,me,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(11,"div",4),m.Sb(12,"label",9),m.Ec(13,"Description"),m.Rb(),m.Sb(14,"div",6),m.Ob(15,"input",10),m.Cc(16,fe,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(17,"div",4),m.Sb(18,"label",11),m.Ec(19,"Extra information"),m.Rb(),m.Sb(20,"div",6),m.Sb(21,"textarea",12),m.Ec(22,"                        "),m.Rb(),m.Rb(),m.Rb(),m.Sb(23,"div",13),m.Cc(24,pe,2,0,"button",14),m.Cc(25,ge,2,0,"button",15),m.Sb(26,"button",16),m.ec("click",(function(){return e.onCancel()})),m.Ec(27,"Cancel"),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.mc("formGroup",e.formGroup),m.zb(2),m.mc("ngIf",e.path),m.zb(1),m.mc("ngIf",!e.path),m.zb(7),m.mc("ngIf",e.isSubmitForm()),m.zb(6),m.mc("ngIf",e.isSubmitForm()),m.zb(8),m.mc("ngIf",e.formGroup.valid),m.zb(1),m.mc("ngIf",!e.formGroup.valid))},directives:[C.y,C.m,C.g,v.l,C.b,C.l,C.f,tt],styles:[".modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#212529}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}"]}),de);function ve(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",29),m.Ec(3," Loading... "),m.Rb(),m.Rb(),m.Rb())}function Se(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Gc(" ",n.extraInformation," ")}}function ye(t,e){1&t&&(m.Sb(0,"p",39),m.Ec(1," - "),m.Rb())}function Ce(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",31),m.Ec(2),m.Rb(),m.Sb(3,"td",32),m.Ec(4),m.Rb(),m.Sb(5,"td",31),m.Cc(6,Se,2,1,"p",25),m.Cc(7,ye,2,0,"p",33),m.Rb(),m.Sb(8,"td",31),m.Ec(9),m.hc(10,"date"),m.Rb(),m.Sb(11,"td",34),m.Sb(12,"button",35),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onEdit(t)})),m.Ob(13,"img",36),m.Rb(),m.Sb(14,"span"),m.Sb(15,"button",37),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onDelete(t)})),m.Ob(16,"img",38),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(2),m.Gc(" ",o.name," "),m.zb(2),m.Gc(" ",o.description," "),m.zb(2),m.mc("ngIf",o.extraInformation),m.zb(1),m.mc("ngIf",!o.extraInformation),m.zb(2),m.Gc(" ",m.ic(10,5,o.updated_at)," ")}}function Re(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,Ce,17,7,"tr",30),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.pathologies)}}function ke(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",29),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}function Oe(t,e){if(1&t){var n=m.Tb();m.Sb(0,"ngb-pagination",40),m.ec("pageChange",(function(t){return m.vc(n),m.gc().queryOptions.page=t}))("pageChange",(function(){return m.vc(n),m.gc().onPageChange()})),m.Rb()}if(2&t){var o=m.gc();m.mc("collectionSize",o.paginatorData.totalPages)("page",o.queryOptions.page)("maxSize",o.queryOptions.pageSize)("ellipses",!0)("pageSize",o.queryOptions.pageSize)}}var Pe,_e=((Pe=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a){var r;return _classCallCheck(this,n),(r=e.call(this)).fb=t,r.pathologiesService=o,r.toast=i,r.modal=a,r.order={orderBy:"name",order:"asc"},r.queryOptions={pageSize:5,page:1},r}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup(),this.loadData()}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setLoading(!0),this.pathologiesService.list({page:this.queryOptions.page,pageSize:this.queryOptions.pageSize,q:e||this.formGroup.value.q},this.order).subscribe((function(e){t.setLoading(!1),e&&(t.pathologies=e.data,t.paginatorData={totalPages:e.total,itemsPerPage:e.per_page})}),(function(e){t.setLoading(!1),console.error(e)}))}},{key:"initFormGroup",value:function(){var t=this;this.formGroup=this.fb.group({q:[""]}),this.formGroup.get("q").valueChanges.subscribe((function(e){t.setLoading(!0),t.loadData(e)}))}},{key:"onPageChange",value:function(){this.setLoading(!0),this.loadData()}},{key:"onSearch",value:function(){this.queryOptions.page=1,this.setLoading(!0),this.loadData()}},{key:"onEdit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.modal.open(he);null!==e?(n.componentInstance.setPathology(this.pathologies[e]),n.result.then((function(n){n&&t.pathologiesService.updateById(t.pathologies[e].id_pat,n).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The pathology has been updated!"),t.loadData()}),(function(t){console.error(t)}))}))):n.result.then((function(e){e&&t.pathologiesService.create(e).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The pathology has been inserted!"),t.loadData()}),(function(t){console.error(t)}))}))}},{key:"onDelete",value:function(t){var e=this,n=this.modal.open(Bt);n.componentInstance.setTitle("You will delete the pathology "+this.pathologies[t].name),n.componentInstance.setContent("Are you sure?"),n.result.then((function(n){n&&e.pathologiesService.delete(e.pathologies[t].id_pat).subscribe((function(){e.toast.toastrConfig.timeOut=1e3,e.toast.toastrConfig.positionClass="toast-bottom-full-width",e.toast.success("The pathology has been deleted!"),e.loadData()}),(function(t){console.error(t)}))}))}},{key:"onClearSearch",value:function(){this.queryOptions.page=1,this.initFormGroup(),this.loadData()}}]),n}(y.a)).\u0275fac=function(t){return new(t||Pe)(m.Nb(C.e),m.Nb(p),m.Nb(k.b),m.Nb(x.b))},Pe.\u0275cmp=m.Hb({type:Pe,selectors:[["app-pathologies"]],features:[m.wb],decls:45,vars:5,consts:[[1,"container"],[1,"path-header"],[1,"row"],[1,"col"],[1,"title"],[1,"col","text-right"],[1,"btn","btn-primary","btn-add",3,"click"],[1,"search-form","row"],[1,"col-10"],[1,"form","mt-3",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-8"],["for","name"],[1,"input-group"],["type","text","id","q","formControlName","q",1,"form-control"],[1,"input-group-text"],["src","https://img.icons8.com/color/24/000000/search--v1.png"],[1,"form-group","col-md-4","d-flex","align-items-end"],[1,"btn","btn-link","btn-clear",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"row","mt-3"],[1,"col","table-bg"],[1,"table","table-hover","table-path"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[1,"row","justify-content-center","align-items-center"],[1,"col-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange",4,"ngIf"],["colspan","7"],[4,"ngFor","ngForOf"],["scope","row"],["scope","row",1,"row-descr"],["class","ml-2",4,"ngIf"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/26/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["src","https://img.icons8.com/color/26/000000/trash--v1.png"],[1,"ml-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," Pathologies "),m.Rb(),m.Rb(),m.Sb(6,"div",5),m.Sb(7,"button",6),m.ec("click",(function(){return e.onEdit()})),m.Ec(8," + Pathology "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(9,"div",7),m.Sb(10,"div",8),m.Sb(11,"form",9),m.ec("ngSubmit",(function(){return e.onSearch()})),m.Sb(12,"div",10),m.Sb(13,"div",11),m.Sb(14,"label",12),m.Ec(15,"Search"),m.Rb(),m.Sb(16,"div",13),m.Ob(17,"input",14),m.Sb(18,"div",15),m.Ob(19,"img",16),m.Rb(),m.Rb(),m.Rb(),m.Sb(20,"div",17),m.Sb(21,"button",18),m.ec("click",(function(){return e.onClearSearch()})),m.Ob(22,"i",19),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(23,"div",0),m.Sb(24,"div",20),m.Sb(25,"div",21),m.Sb(26,"table",22),m.Sb(27,"thead",23),m.Sb(28,"tr"),m.Sb(29,"th",24),m.Ec(30," Name "),m.Rb(),m.Sb(31,"th",24),m.Ec(32," Description "),m.Rb(),m.Sb(33,"th",24),m.Ec(34," Extra information "),m.Rb(),m.Sb(35,"th",24),m.Ec(36," Last update "),m.Rb(),m.Ob(37,"th",24),m.Rb(),m.Rb(),m.Cc(38,ve,4,0,"tbody",25),m.Cc(39,Re,2,1,"tbody",25),m.Cc(40,ke,4,0,"tbody",25),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(41,"div",0),m.Sb(42,"div",26),m.Sb(43,"div",27),m.Cc(44,Oe,1,5,"ngb-pagination",28),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(11),m.mc("formGroup",e.formGroup),m.zb(27),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()&&e.pathologies),m.zb(1),m.mc("ngIf",!(e.isLoading()||e.pathologies&&0!==e.pathologies.length)),m.zb(4),m.mc("ngIf",!e.isLoading()&&e.paginatorData.totalPages>e.queryOptions.pageSize))},directives:[C.y,C.m,C.g,C.b,C.l,C.f,v.l,v.k,x.d],pipes:[v.d],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.path-header[_ngcontent-%COMP%]{margin-top:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-path[_ngcontent-%COMP%], .table-path[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-add[_ngcontent-%COMP%], .btn-search[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-add[_ngcontent-%COMP%]:hover, .btn-search[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}.row-descr[_ngcontent-%COMP%]{max-width:200px;overflow:auto}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#42336e!important;color:#fff}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#fff!important;color:#42336e!important}"]}),Pe);function xe(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Edit Medication"),m.Rb())}function Ie(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Create Medication"),m.Rb())}function Ee(t,e){if(1&t&&m.Ob(0,"app-message",16),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","name")}}function ze(t,e){if(1&t&&m.Ob(0,"app-message",16),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","description")}}function we(t,e){if(1&t&&m.Ob(0,"app-message",16),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","description")}}function Me(t,e){1&t&&(m.Sb(0,"button",17),m.Ec(1,"Save changes"),m.Rb())}function Ge(t,e){1&t&&(m.Sb(0,"button",18),m.Ec(1,"Save changes"),m.Rb())}var Ne,Fe=((Ne=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var i;return _classCallCheck(this,n),(i=e.call(this)).fb=t,i.activeModal=o,i}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup()}},{key:"initFormGroup",value:function(){this.formGroup=this.fb.group({name:[this.med?this.med.name:"",C.w.required],description:[this.med?this.med.description:"",C.w.required],extraInformation:[this.med&&this.med.extraInformation?this.med.extraInformation:""]})}},{key:"setMedication",value:function(t){this.med=t}},{key:"onSubmit",value:function(){this.setSubmitForm(!0),this.formGroup.valid&&this.activeModal.close(this.formGroup.value)}},{key:"onCancel",value:function(){this.activeModal.close()}}]),n}(y.a)).\u0275fac=function(t){return new(t||Ne)(m.Nb(C.e),m.Nb(x.a))},Ne.\u0275cmp=m.Hb({type:Ne,selectors:[["app-modal-edit"]],features:[m.wb],decls:29,vars:8,consts:[[3,"formGroup","ngSubmit"],[1,"modal-header"],[3,"ngIf"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["type","text","id","name","formControlName","name",1,"form-control"],[3,"errors","key",4,"ngIf"],["for","description",1,"col-sm-3","col-form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["row","4","id","extraInfo","formControlName","extraInformation",1,"form-control"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-save",4,"ngIf"],["type","submit","class","btn btn-primary btn-save","disabled","",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[3,"errors","key"],["type","submit",1,"btn","btn-primary","btn-save"],["type","submit","disabled","",1,"btn","btn-primary","btn-save"]],template:function(t,e){1&t&&(m.Sb(0,"form",0),m.ec("ngSubmit",(function(){return e.onSubmit()})),m.Sb(1,"div",1),m.Cc(2,xe,2,0,"ng-template",2),m.Cc(3,Ie,2,0,"ng-template",2),m.Rb(),m.Sb(4,"div",3),m.Sb(5,"div",4),m.Sb(6,"label",5),m.Ec(7,"Name"),m.Rb(),m.Sb(8,"div",6),m.Ob(9,"input",7),m.Cc(10,Ee,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(11,"div",4),m.Sb(12,"label",9),m.Ec(13,"Description"),m.Rb(),m.Sb(14,"div",6),m.Ob(15,"input",10),m.Cc(16,ze,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(17,"div",4),m.Sb(18,"label",9),m.Ec(19,"Extra information"),m.Rb(),m.Sb(20,"div",6),m.Sb(21,"textarea",11),m.Ec(22,"                "),m.Rb(),m.Cc(23,we,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(24,"div",12),m.Cc(25,Me,2,0,"button",13),m.Cc(26,Ge,2,0,"button",14),m.Sb(27,"button",15),m.ec("click",(function(){return e.onCancel()})),m.Ec(28,"Cancel"),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.mc("formGroup",e.formGroup),m.zb(2),m.mc("ngIf",e.med),m.zb(1),m.mc("ngIf",!e.med),m.zb(7),m.mc("ngIf",e.isSubmitForm()),m.zb(6),m.mc("ngIf",e.isSubmitForm()),m.zb(7),m.mc("ngIf",e.isSubmitForm()),m.zb(2),m.mc("ngIf",e.formGroup.valid),m.zb(1),m.mc("ngIf",!e.formGroup.valid))},directives:[C.y,C.m,C.g,v.l,C.b,C.l,C.f,tt],styles:[".modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#212529}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}"]}),Ne);function Ae(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",29),m.Ec(3," Loading... "),m.Rb(),m.Rb(),m.Rb())}function De(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Fc(n.extraInformation)}}function qe(t,e){1&t&&(m.Sb(0,"p",39),m.Ec(1,"-"),m.Rb())}function Le(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",31),m.Ec(2),m.Rb(),m.Sb(3,"td",32),m.Ec(4),m.Rb(),m.Sb(5,"td",32),m.Cc(6,De,2,1,"p",25),m.Cc(7,qe,2,0,"p",33),m.Rb(),m.Sb(8,"td",31),m.Ec(9),m.hc(10,"date"),m.Rb(),m.Sb(11,"td",34),m.Sb(12,"button",35),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onEdit(t)})),m.Ob(13,"img",36),m.Rb(),m.Sb(14,"span"),m.Sb(15,"button",37),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onDelete(t)})),m.Ob(16,"img",38),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(2),m.Gc(" ",o.name," "),m.zb(2),m.Gc(" ",o.description," "),m.zb(2),m.mc("ngIf",o.extraInformation),m.zb(1),m.mc("ngIf",!o.extraInformation),m.zb(2),m.Gc(" ",m.ic(10,5,o.updated_at)," ")}}function Te(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,Le,17,7,"tr",30),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.medications)}}function Ve(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",29),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}function Be(t,e){if(1&t){var n=m.Tb();m.Sb(0,"ngb-pagination",40),m.ec("pageChange",(function(t){return m.vc(n),m.gc().queryOptions.page=t}))("pageChange",(function(){return m.vc(n),m.gc().onPageChange()})),m.Rb()}if(2&t){var o=m.gc();m.mc("collectionSize",o.paginatorData.totalPages)("page",o.queryOptions.page)("maxSize",o.queryOptions.pageSize)("ellipses",!0)("pageSize",o.queryOptions.pageSize)}}var $e,je=(($e=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a){var r;return _classCallCheck(this,n),(r=e.call(this)).fb=t,r.medicationsService=o,r.toast=i,r.modal=a,r.order={orderBy:"name",order:"asc"},r.queryOptions={pageSize:5,page:1},r}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup(),this.loadData()}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setLoading(!0),this.medicationsService.list({page:this.queryOptions.page,pageSize:this.queryOptions.pageSize,q:e||this.formGroup.value.q},this.order).subscribe((function(e){t.setLoading(!1),e&&(t.medications=e.data,t.paginatorData={totalPages:e.total,itemsPerPage:e.per_page})}),(function(e){t.setLoading(!1),console.error(e)}))}},{key:"initFormGroup",value:function(){var t=this;this.formGroup=this.fb.group({q:[""]}),this.formGroup.get("q").valueChanges.subscribe((function(e){t.setLoading(!0),t.loadData(e)}))}},{key:"onPageChange",value:function(){this.loadData()}},{key:"onSearch",value:function(){this.queryOptions.page=1,this.loadData()}},{key:"onEdit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.modal.open(Fe);null!==e?(n.componentInstance.setMedication(this.medications[e]),n.result.then((function(n){n&&t.medicationsService.updateById(t.medications[e].id_medication,n).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The medication has been updated!"),t.loadData()}),(function(t){console.error(t)}))}))):n.result.then((function(e){e&&t.medicationsService.create(e).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The medication has been inserted!"),t.loadData()}),(function(t){console.error(t)}))}))}},{key:"onDelete",value:function(t){var e=this,n=this.modal.open(Bt);n.componentInstance.setTitle("You will delete the medication "+this.medications[t].name),n.componentInstance.setContent("Are you sure?"),n.result.then((function(n){n&&e.medicationsService.delete(e.medications[t].id_medication).subscribe((function(){e.toast.toastrConfig.timeOut=1e3,e.toast.toastrConfig.positionClass="toast-bottom-full-width",e.toast.success("The medication has been deleted!"),e.loadData()}),(function(t){console.error(t)}))}))}},{key:"onClearSearch",value:function(){this.queryOptions.page=1,this.initFormGroup(),this.loadData()}}]),n}(y.a)).\u0275fac=function(t){return new(t||$e)(m.Nb(C.e),m.Nb(g),m.Nb(k.b),m.Nb(x.b))},$e.\u0275cmp=m.Hb({type:$e,selectors:[["app-medications"]],features:[m.wb],decls:46,vars:5,consts:[[1,"container"],[1,"med-header"],[1,"row"],[1,"col"],[1,"title"],[1,"col","text-right"],[1,"btn","btn-primary","btn-add",3,"click"],[1,"search-form","row"],[1,"col-10"],[1,"form","mt-3",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-8"],["for","name"],[1,"input-group"],["type","text","id","q","formControlName","q",1,"form-control"],[1,"input-group-text"],["src","https://img.icons8.com/color/24/000000/search--v1.png"],[1,"form-group","col-md-4","d-flex","align-items-end"],[1,"btn","btn-link","btn-clear",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"row","mt-3"],[1,"col","table-bg"],[1,"table","table-hover","table-med"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[1,"row","justify-content-center","align-items-center"],[1,"col-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange",4,"ngIf"],["colspan","7"],[4,"ngFor","ngForOf"],["scope","row"],["scope","row",2,"max-width","200px","overflow","auto"],["class","ml-2",4,"ngIf"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/26/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["src","https://img.icons8.com/color/26/000000/trash--v1.png"],[1,"ml-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," Medications "),m.Rb(),m.Rb(),m.Sb(6,"div",5),m.Sb(7,"div"),m.Sb(8,"button",6),m.ec("click",(function(){return e.onEdit()})),m.Ec(9," + Medication "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(10,"div",7),m.Sb(11,"div",8),m.Sb(12,"form",9),m.ec("ngSubmit",(function(){return e.onSearch()})),m.Sb(13,"div",10),m.Sb(14,"div",11),m.Sb(15,"label",12),m.Ec(16,"Search"),m.Rb(),m.Sb(17,"div",13),m.Ob(18,"input",14),m.Sb(19,"div",15),m.Ob(20,"img",16),m.Rb(),m.Rb(),m.Rb(),m.Sb(21,"div",17),m.Sb(22,"button",18),m.ec("click",(function(){return e.onClearSearch()})),m.Ob(23,"i",19),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(24,"div",0),m.Sb(25,"div",20),m.Sb(26,"div",21),m.Sb(27,"table",22),m.Sb(28,"thead",23),m.Sb(29,"tr"),m.Sb(30,"th",24),m.Ec(31," Name "),m.Rb(),m.Sb(32,"th",24),m.Ec(33," Description "),m.Rb(),m.Sb(34,"th",24),m.Ec(35," Extra information "),m.Rb(),m.Sb(36,"th",24),m.Ec(37," Last update "),m.Rb(),m.Ob(38,"th",24),m.Rb(),m.Rb(),m.Cc(39,Ae,4,0,"tbody",25),m.Cc(40,Te,2,1,"tbody",25),m.Cc(41,Ve,4,0,"tbody",25),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(42,"div",0),m.Sb(43,"div",26),m.Sb(44,"div",27),m.Cc(45,Be,1,5,"ngb-pagination",28),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(12),m.mc("formGroup",e.formGroup),m.zb(27),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()&&e.medications),m.zb(1),m.mc("ngIf",!(e.isLoading()||e.medications&&0!==e.medications.length)),m.zb(4),m.mc("ngIf",!e.isLoading()&&e.paginatorData.totalPages>e.queryOptions.pageSize))},directives:[C.y,C.m,C.g,C.b,C.l,C.f,v.l,v.k,x.d],pipes:[v.d],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.med-header[_ngcontent-%COMP%]{margin-top:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-med[_ngcontent-%COMP%], .table-med[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-add[_ngcontent-%COMP%], .btn-search[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-add[_ngcontent-%COMP%]:hover, .btn-search[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#42336e!important;color:#fff}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#fff!important;color:#42336e!important}"]}),$e);function He(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Edit Arrhythmia"),m.Rb())}function Je(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Create Arrhythmia"),m.Rb())}function Ue(t,e){if(1&t&&m.Ob(0,"app-message",17),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","name")}}function We(t,e){if(1&t&&m.Ob(0,"app-message",17),2&t){var n=m.gc();m.mc("errors",n.getErrors())("key","description")}}function Qe(t,e){1&t&&(m.Sb(0,"button",18),m.Ec(1,"Save changes"),m.Rb())}function Ye(t,e){1&t&&(m.Sb(0,"button",19),m.Ec(1,"Save changes"),m.Rb())}var Xe,Ke=((Xe=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o){var i;return _classCallCheck(this,n),(i=e.call(this)).fb=t,i.activeModal=o,i}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup()}},{key:"initFormGroup",value:function(){this.formGroup=this.fb.group({name:[this.arr?this.arr.name:"",C.w.required],description:[this.arr?this.arr.description:"",C.w.required],extraInformation:[this.arr?this.arr.extraInformation:null]})}},{key:"setArrhythmia",value:function(t){this.arr=t}},{key:"onSubmit",value:function(){this.setSubmitForm(!0),this.formGroup.valid&&this.activeModal.close(this.formGroup.value)}},{key:"onCancel",value:function(){this.activeModal.close()}}]),n}(y.a)).\u0275fac=function(t){return new(t||Xe)(m.Nb(C.e),m.Nb(x.a))},Xe.\u0275cmp=m.Hb({type:Xe,selectors:[["app-modal-edit"]],features:[m.wb],decls:28,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"modal-header"],[3,"ngIf"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["type","text","id","name","formControlName","name",1,"form-control"],[3,"errors","key",4,"ngIf"],["for","description",1,"col-sm-3","col-form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["for","extraInfo",1,"col-sm-3","col-form-label"],["row","4","id","extraInfo","formControlName","extraInformation",1,"form-control"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-save",4,"ngIf"],["type","submit","class","btn btn-primary btn-save","disabled","",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[3,"errors","key"],["type","submit",1,"btn","btn-primary","btn-save"],["type","submit","disabled","",1,"btn","btn-primary","btn-save"]],template:function(t,e){1&t&&(m.Sb(0,"form",0),m.ec("ngSubmit",(function(){return e.onSubmit()})),m.Sb(1,"div",1),m.Cc(2,He,2,0,"ng-template",2),m.Cc(3,Je,2,0,"ng-template",2),m.Rb(),m.Sb(4,"div",3),m.Sb(5,"div",4),m.Sb(6,"label",5),m.Ec(7,"Name"),m.Rb(),m.Sb(8,"div",6),m.Ob(9,"input",7),m.Cc(10,Ue,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(11,"div",4),m.Sb(12,"label",9),m.Ec(13,"Description"),m.Rb(),m.Sb(14,"div",6),m.Ob(15,"input",10),m.Cc(16,We,1,2,"app-message",8),m.Rb(),m.Rb(),m.Sb(17,"div",4),m.Sb(18,"label",11),m.Ec(19,"Extra information"),m.Rb(),m.Sb(20,"div",6),m.Sb(21,"textarea",12),m.Ec(22,"                    "),m.Rb(),m.Rb(),m.Rb(),m.Sb(23,"div",13),m.Cc(24,Qe,2,0,"button",14),m.Cc(25,Ye,2,0,"button",15),m.Sb(26,"button",16),m.ec("click",(function(){return e.onCancel()})),m.Ec(27,"Cancel"),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.mc("formGroup",e.formGroup),m.zb(2),m.mc("ngIf",e.arr),m.zb(1),m.mc("ngIf",!e.arr),m.zb(7),m.mc("ngIf",e.isSubmitForm()),m.zb(6),m.mc("ngIf",e.isSubmitForm()),m.zb(8),m.mc("ngIf",e.formGroup.valid),m.zb(1),m.mc("ngIf",!e.formGroup.valid))},directives:[C.y,C.m,C.g,v.l,C.b,C.l,C.f,tt],styles:[".modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#212529}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}"]}),Xe);function Ze(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",28),m.Ec(3," Loading... "),m.Rb(),m.Rb(),m.Rb())}function tn(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Fc(n.extraInformation)}}function en(t,e){1&t&&(m.Sb(0,"p",38),m.Ec(1,"-"),m.Rb())}function nn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",30),m.Ec(2),m.Rb(),m.Sb(3,"td",31),m.Ec(4),m.Rb(),m.Sb(5,"td",31),m.Cc(6,tn,2,1,"p",24),m.Cc(7,en,2,0,"p",32),m.Rb(),m.Sb(8,"td",30),m.Ec(9),m.hc(10,"date"),m.Rb(),m.Sb(11,"td",33),m.Sb(12,"button",34),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onEdit(t)})),m.Ob(13,"img",35),m.Rb(),m.Sb(14,"span"),m.Sb(15,"button",36),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onDelete(t)})),m.Ob(16,"img",37),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(2),m.Gc(" ",o.name," "),m.zb(2),m.Gc(" ",o.description," "),m.zb(2),m.mc("ngIf",o.extraInformation),m.zb(1),m.mc("ngIf",!o.extraInformation),m.zb(2),m.Gc(" ",m.ic(10,5,o.updated_at)," ")}}function on(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,nn,17,7,"tr",29),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.arrhythmias)}}function an(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",28),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}function rn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"ngb-pagination",39),m.ec("pageChange",(function(t){return m.vc(n),m.gc().queryOptions.page=t}))("pageChange",(function(){return m.vc(n),m.gc().onPageChange()})),m.Rb()}if(2&t){var o=m.gc();m.mc("collectionSize",o.paginatorData.totalPages)("page",o.queryOptions.page)("maxSize",o.queryOptions.pageSize)("ellipses",!0)("pageSize",o.queryOptions.pageSize)}}var cn,sn=((cn=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,o,i,a,r,c){var s;return _classCallCheck(this,n),(s=e.call(this)).fb=t,s.arrhythmiasService=o,s.toast=i,s.router=a,s.route=r,s.modal=c,s.order={orderBy:"name",order:"asc"},s.queryOptions={pageSize:5,page:1},s}return _createClass(n,[{key:"ngOnInit",value:function(){this.initFormGroup(),this.loadData()}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setLoading(!0),this.arrhythmiasService.list({page:this.queryOptions.page,pageSize:this.queryOptions.pageSize,q:e||this.formGroup.value.q},this.order).subscribe((function(e){t.setLoading(!1),e&&(t.arrhythmias=e.data,t.paginatorData={totalPages:e.total,itemsPerPage:e.per_page})}),(function(e){t.setLoading(!1),console.error(e)}))}},{key:"onAddAnimalSpecie",value:function(){}},{key:"initFormGroup",value:function(){var t=this;this.formGroup=this.fb.group({q:[""]}),this.formGroup.get("q").valueChanges.subscribe((function(e){t.setLoading(!0),t.loadData(e)}))}},{key:"onPageChange",value:function(){this.loadData()}},{key:"onSearch",value:function(){this.queryOptions.page=1,this.loadData()}},{key:"onEdit",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.modal.open(Ke);null!==e?(n.componentInstance.setArrhythmia(this.arrhythmias[e]),n.result.then((function(n){n&&t.arrhythmiasService.updateById(t.arrhythmias[e].id_arr,n).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The arrhythmia has been updated!"),t.loadData()}),(function(t){console.error(t)}))}))):n.result.then((function(e){e&&t.arrhythmiasService.create(e).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("The arrhythmia has been inserted!"),t.loadData()}),(function(t){console.error(t)}))}))}},{key:"onDelete",value:function(t){var e=this,n=this.modal.open(Bt);n.componentInstance.setTitle("You will delete the arrhythmia "+this.arrhythmias[t].name),n.componentInstance.setContent("Are you sure?"),n.result.then((function(n){n&&e.arrhythmiasService.delete(e.arrhythmias[t].id_arr).subscribe((function(){e.toast.toastrConfig.timeOut=1e3,e.toast.toastrConfig.positionClass="toast-bottom-full-width",e.toast.success("The arrhythmia has been deleted!"),e.loadData()}),(function(t){console.error(t)}))}))}},{key:"onClearSearch",value:function(){this.queryOptions.page=1,this.initFormGroup(),this.loadData()}}]),n}(y.a)).\u0275fac=function(t){return new(t||cn)(m.Nb(C.e),m.Nb(d),m.Nb(k.b),m.Nb(S.b),m.Nb(S.a),m.Nb(x.b))},cn.\u0275cmp=m.Hb({type:cn,selectors:[["app-arrhythmias"]],features:[m.wb],decls:46,vars:5,consts:[[1,"container"],[1,"arr-header"],[1,"row"],[1,"col"],[1,"title"],[1,"col","text-right"],[1,"btn","btn-primary","btn-add",3,"click"],[1,"search-form","row"],[1,"col-10"],[1,"form","mt-3",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col-md-8"],["for","name"],[1,"input-group"],["type","text","id","q","formControlName","q",1,"form-control"],[1,"input-group-text"],["src","https://img.icons8.com/color/24/000000/search--v1.png"],[1,"form-group","col-md-4","d-flex","align-items-end"],[1,"btn","btn-link","btn-clear",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"row","mt-3"],[1,"table","table-hover","table-arr"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[1,"row","justify-content-center","align-items-center"],[1,"col-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange",4,"ngIf"],["colspan","7"],[4,"ngFor","ngForOf"],["scope","row"],["scope","row",2,"max-width","200px","overflow","auto"],["class","ml-2",4,"ngIf"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/26/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["src","https://img.icons8.com/color/26/000000/trash--v1.png"],[1,"ml-2"],[3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," Arrhythmias "),m.Rb(),m.Rb(),m.Sb(6,"div",5),m.Sb(7,"div"),m.Sb(8,"button",6),m.ec("click",(function(){return e.onEdit()})),m.Ec(9," + Arrhythmia "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(10,"div",7),m.Sb(11,"div",8),m.Sb(12,"form",9),m.ec("ngSubmit",(function(){return e.onSearch()})),m.Sb(13,"div",10),m.Sb(14,"div",11),m.Sb(15,"label",12),m.Ec(16,"Search"),m.Rb(),m.Sb(17,"div",13),m.Ob(18,"input",14),m.Sb(19,"div",15),m.Ob(20,"img",16),m.Rb(),m.Rb(),m.Rb(),m.Sb(21,"div",17),m.Sb(22,"button",18),m.ec("click",(function(){return e.onClearSearch()})),m.Ob(23,"i",19),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(24,"div",0),m.Sb(25,"div",20),m.Sb(26,"div",3),m.Sb(27,"table",21),m.Sb(28,"thead",22),m.Sb(29,"tr"),m.Sb(30,"th",23),m.Ec(31," Name "),m.Rb(),m.Sb(32,"th",23),m.Ec(33," Description "),m.Rb(),m.Sb(34,"th",23),m.Ec(35," Extra information "),m.Rb(),m.Sb(36,"th",23),m.Ec(37," Last update "),m.Rb(),m.Ob(38,"th",23),m.Rb(),m.Rb(),m.Cc(39,Ze,4,0,"tbody",24),m.Cc(40,on,2,1,"tbody",24),m.Cc(41,an,4,0,"tbody",24),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(42,"div",0),m.Sb(43,"div",25),m.Sb(44,"div",26),m.Cc(45,rn,1,5,"ngb-pagination",27),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(12),m.mc("formGroup",e.formGroup),m.zb(27),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()&&e.arrhythmias),m.zb(1),m.mc("ngIf",!(e.isLoading()||e.arrhythmias&&0!==e.arrhythmias.length)),m.zb(4),m.mc("ngIf",!e.isLoading()&&e.paginatorData.totalPages>e.queryOptions.pageSize))},directives:[C.y,C.m,C.g,C.b,C.l,C.f,v.l,v.k,x.d],pipes:[v.d],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.arr-header[_ngcontent-%COMP%]{margin-top:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-arr[_ngcontent-%COMP%], .table-arr[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-add[_ngcontent-%COMP%], .btn-search[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-add[_ngcontent-%COMP%]:hover, .btn-search[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#42336e!important;color:#fff}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#fff!important;color:#42336e!important}"]}),cn);function ln(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",28),m.Ec(3," Loading... "),m.Rb(),m.Rb(),m.Rb())}function bn(t,e){1&t&&m.Ec(0," - ")}function un(t,e){if(1&t&&(m.Ec(0),m.hc(1,"arrayJson")),2&t){var n=m.gc().$implicit;m.Gc(" ",m.jc(1,1,n.medications,"medications")," ")}}function mn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",30),m.Ec(2),m.Rb(),m.Sb(3,"td",31),m.Ec(4),m.hc(5,"arrayJson"),m.Rb(),m.Sb(6,"td",32),m.Ec(7),m.hc(8,"arrayJson"),m.Rb(),m.Sb(9,"td",33),m.Cc(10,bn,1,0,"ng-template",34),m.Cc(11,un,2,4,"ng-template",34),m.Rb(),m.Sb(12,"td",35),m.Sb(13,"button",36),m.ec("click",(function(){m.vc(n);var t=e.$implicit;return m.gc(2).onEdit(t.id_scenario)})),m.Ob(14,"img",37),m.Rb(),m.Sb(15,"span"),m.Sb(16,"button",38),m.ec("click",(function(){m.vc(n);var t=e.$implicit,o=e.index;return m.gc(2).onDelete(t.id_scenario,o)})),m.Ob(17,"img",39),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(2),m.Gc(" ",o.name," "),m.zb(2),m.Gc(" ",m.ic(5,5,o.arrhythmias)," "),m.zb(3),m.Gc(" ",m.ic(8,7,o.pathologies)," "),m.zb(3),m.mc("ngIf",!o.medications),m.zb(1),m.mc("ngIf",o.medications)}}function fn(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,mn,18,9,"tr",29),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.scenarios)}}function pn(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",28),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}function gn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"ngb-pagination",40),m.ec("pageChange",(function(t){return m.vc(n),m.gc().queryOptions.page=t}))("pageChange",(function(){return m.vc(n),m.gc().onPageChange()})),m.Rb()}if(2&t){var o=m.gc();m.mc("collectionSize",o.paginatorData.totalPages)("page",o.queryOptions.page)("maxSize",o.queryOptions.pageSize)("ellipses",!0)("pageSize",o.queryOptions.pageSize)}}var dn,hn,vn=((dn=function(){function t(e,n,o,i,a){_classCallCheck(this,t),this.scenarioService=e,this.fb=n,this.router=o,this.toast=i,this.modal=a,this.loading=!0,this.queryOptions={pageSize:5,page:1},this.order={orderBy:"updatedAt",order:"asc"}}return _createClass(t,[{key:"ngOnInit",value:function(){this.initFormGroup(),this.loadData()}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.scenarioService.listWithParams({page:this.queryOptions.page,pageSize:this.queryOptions.pageSize,q:e||this.formGroup.get("q").value},this.order).subscribe((function(e){e.data&&(t.paginatorData={totalPages:e.total,itemsPerPage:e.per_page},t.scenarios=e.data),t.loading=!1}),(function(e){t.loading=!1,console.error(e)}))}},{key:"isLoading",value:function(){return this.loading}},{key:"onPageChange",value:function(){this.loading=!0,this.loadData()}},{key:"initFormGroup",value:function(){var t=this;this.formGroup=this.fb.group({q:[""]}),this.formGroup.get("q").valueChanges.subscribe((function(e){t.loading=!0,t.loadData(e)}))}},{key:"getFormGroup",value:function(){return this.formGroup}},{key:"clearSearch",value:function(){this.formGroup.get("q").reset(),this.loading=!0,this.loadData()}},{key:"onAddScenario",value:function(){this.router.navigateByUrl("/panel/scenarios/create")}},{key:"onEdit",value:function(t){this.router.navigateByUrl("/panel/scenarios/edit/"+t)}},{key:"onDelete",value:function(t,e){var n=this,o=this.modal.open(Bt);o.componentInstance.setTitle("You will delete the scenario "+this.scenarios[e].name),o.componentInstance.setContent("Are you sure?"),o.result.then((function(e){e&&(n.loading=!0,n.scenarioService.delete(t).subscribe((function(){n.toast.toastrConfig.timeOut=1e3,n.toast.toastrConfig.positionClass="toast-bottom-full-width",n.toast.success("Scenario deleted successfully"),n.loading=!1,n.loadData()}),(function(t){console.error(t)})))}))}}]),t}()).\u0275fac=function(t){return new(t||dn)(m.Nb(s.a),m.Nb(C.e),m.Nb(S.b),m.Nb(k.b),m.Nb(x.b))},dn.\u0275cmp=m.Hb({type:dn,selectors:[["app-scenario-params"]],decls:46,vars:5,consts:[[1,"container"],[1,"scenario-header"],[1,"row"],[1,"col"],[1,"title"],[1,"col","text-right"],[1,"btn","btn-primary","btn-add",3,"click"],[1,"search-form","row"],[1,"col-10"],[1,"form","mt-3",3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-8"],["for","name"],[1,"input-group"],["type","text","id","q","formControlName","q",1,"form-control"],[1,"input-group-text"],["src","https://img.icons8.com/color/24/000000/search--v1.png"],[1,"form-group","col-md-4","d-flex","align-items-end"],[1,"btn","btn-link","btn-clear",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"col","table-bg"],[1,"table","table-hover","table-scenarios"],[1,"thead-dark"],["scope","col"],[4,"ngIf"],[1,"row","justify-content-center","align-items-center"],[1,"col-2"],["class","paginator",3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange",4,"ngIf"],["colspan","7"],[4,"ngFor","ngForOf"],["scope","row"],["scope","row",1,"row-arrh"],["scope","row",1,"row-pat"],["scope","row",1,"row-med"],[3,"ngIf"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/18/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["src","https://img.icons8.com/color/18/000000/trash--v1.png"],[1,"paginator",3,"collectionSize","page","maxSize","ellipses","pageSize","pageChange"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," Scenarios "),m.Rb(),m.Rb(),m.Sb(6,"div",5),m.Sb(7,"button",6),m.ec("click",(function(){return e.onAddScenario()})),m.Ec(8," + Scenario "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(9,"div",7),m.Sb(10,"div",8),m.Sb(11,"form",9),m.Sb(12,"div",10),m.Sb(13,"div",11),m.Sb(14,"label",12),m.Ec(15,"Search"),m.Rb(),m.Sb(16,"div",13),m.Ob(17,"input",14),m.Sb(18,"div",15),m.Ob(19,"img",16),m.Rb(),m.Rb(),m.Rb(),m.Sb(20,"div",17),m.Sb(21,"button",18),m.ec("click",(function(){return e.clearSearch()})),m.Ob(22,"i",19),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(23,"div",0),m.Sb(24,"div",2),m.Sb(25,"div",20),m.Sb(26,"table",21),m.Sb(27,"thead",22),m.Sb(28,"tr"),m.Sb(29,"th",23),m.Ec(30," Name "),m.Rb(),m.Sb(31,"th",23),m.Ec(32," Arrhythmias "),m.Rb(),m.Sb(33,"th",23),m.Ec(34," Pathologies "),m.Rb(),m.Sb(35,"th",23),m.Ec(36," Medications "),m.Rb(),m.Ob(37,"th",23),m.Rb(),m.Rb(),m.Ob(38,"tbody"),m.Cc(39,ln,4,0,"tbody",24),m.Cc(40,fn,2,1,"tbody",24),m.Cc(41,pn,4,0,"tbody",24),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(42,"div",0),m.Sb(43,"div",25),m.Sb(44,"div",26),m.Cc(45,gn,1,5,"ngb-pagination",27),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(11),m.mc("formGroup",e.getFormGroup()),m.zb(28),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()&&e.scenarios),m.zb(1),m.mc("ngIf",!(e.isLoading()||e.scenarios&&0!==e.scenarios.length)),m.zb(4),m.mc("ngIf",!e.isLoading()&&e.paginatorData.totalPages>e.queryOptions.pageSize))},directives:[C.y,C.m,C.g,C.b,C.l,C.f,v.l,v.k,x.d],pipes:[D],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.scenario-header[_ngcontent-%COMP%]{margin-top:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-scenarios[_ngcontent-%COMP%], .table-scenarios[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-add[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-add[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}.row-arrh[_ngcontent-%COMP%], .row-med[_ngcontent-%COMP%], .row-pat[_ngcontent-%COMP%]{max-width:250px}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#42336e!important;color:#fff}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#fff!important;color:#42336e!important}"]}),dn),Sn=function t(){_classCallCheck(this,t)},yn=((hn=function(){function t(e){_classCallCheck(this,t),this.api=e,this.baseUrl=b.a.api.parameters}return _createClass(t,[{key:"findAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=new u.a,n=this.baseUrl;return t&&(n+="?"+l.a.getQueryString(t)),this.api.httpGet(n).subscribe((function(t){e.next(t)}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"updateParameter",value:function(t,e){var n=new u.a;return this.api.httpPut("".concat(this.baseUrl,"/").concat(t),{parameter:e}).subscribe((function(){n.next()}),(function(t){n.error(t)}),(function(){n.complete()})),n.asObservable()}},{key:"createParameter",value:function(t){var e=new u.a;return this.api.httpPost(""+this.baseUrl,{parameter:t}).subscribe((function(){e.next()}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}},{key:"deleteParameter",value:function(t){var e=new u.a;return this.api.httpDelete("".concat(this.baseUrl,"/").concat(t)).subscribe((function(){e.next()}),(function(t){e.error(t)}),(function(){e.complete()})),e.asObservable()}}]),t}()).\u0275fac=function(t){return new(t||hn)(m.ac(f.a))},hn.\u0275prov=m.Jb({token:hn,factory:hn.\u0275fac,providedIn:"root"}),hn);function Cn(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Edit Parameter"),m.Rb())}function Rn(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Add Parameter"),m.Rb())}function kn(t,e){1&t&&(m.Sb(0,"h4",10),m.Ec(1,"All parameters have been configured before."),m.Rb())}function On(t,e){if(1&t&&(m.Sb(0,"option",16),m.Ec(1),m.Rb()),2&t){var n=e.$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function Pn(t,e){if(1&t&&m.Cc(0,On,2,2,"option",15),2&t){var n=m.gc(4);m.mc("ngForOf",n.getParameters())}}function _n(t,e){if(1&t&&(m.Sb(0,"label",11),m.Ec(1,"Parameter"),m.Rb(),m.Sb(2,"div",12),m.Sb(3,"select",13),m.Sb(4,"option",14),m.Ec(5,"Choose Parameter"),m.Rb(),m.Cc(6,Pn,1,1,"ng-template",3),m.Rb(),m.Rb()),2&t){var n,o=m.gc(3),i=null==(n=o.getParameters())?null:n.length;m.zb(3),m.mc("compareWith",o.compareParams),m.zb(1),m.mc("ngValue",null),m.zb(2),m.mc("ngIf",i)}}function xn(t,e){if(1&t&&(m.Sb(0,"div",9),m.Cc(1,kn,2,0,"ng-template",3),m.Cc(2,_n,7,3,"ng-template",3),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.mc("ngIf",0==n.getParameters().length),m.zb(1),m.mc("ngIf",n.getParameters().length>0)}}function In(t,e){if(1&t){var n=m.Tb();m.Sb(0,"label",26),m.Sb(1,"input",27),m.ec("change",(function(t){return m.vc(n),m.gc(3).onFileChange(t)})),m.Rb(),m.Ec(2," Change Curves "),m.Rb(),m.Sb(3,"button",28),m.ec("click",(function(){return m.vc(n),m.gc(3).onDeleteCurves()})),m.Ob(4,"img",29),m.Rb()}}function En(t,e){if(1&t){var n=m.Tb();m.Sb(0,"label",26),m.Sb(1,"input",27),m.ec("change",(function(t){return m.vc(n),m.gc(3).onFileChange(t)})),m.Rb(),m.Ec(2," Add Curves "),m.Rb()}}function zn(t,e){if(1&t&&(m.Sb(0,"div",9),m.Sb(1,"label",17),m.Ec(2,"Name"),m.Rb(),m.Sb(3,"div",12),m.Ob(4,"input",18),m.Rb(),m.Rb(),m.Sb(5,"div",9),m.Sb(6,"label",19),m.Ec(7,"Description"),m.Rb(),m.Sb(8,"div",12),m.Ob(9,"input",20),m.Rb(),m.Rb(),m.Sb(10,"div",9),m.Sb(11,"label",21),m.Ec(12,"Alert low"),m.Rb(),m.Sb(13,"div",12),m.Ob(14,"input",22),m.Rb(),m.Rb(),m.Sb(15,"div",9),m.Sb(16,"label",21),m.Ec(17,"Alert high"),m.Rb(),m.Sb(18,"div",12),m.Ob(19,"input",23),m.Rb(),m.Rb(),m.Sb(20,"div",9),m.Sb(21,"label",24),m.Ec(22,"Value"),m.Rb(),m.Sb(23,"div",12),m.Ob(24,"input",25),m.Rb(),m.Rb(),m.Sb(25,"div",9),m.Sb(26,"label",24),m.Ec(27,"Curves"),m.Rb(),m.Cc(28,In,5,0,"ng-template",3),m.Cc(29,En,3,0,"ng-template",3),m.Rb()),2&t){var n=m.gc(2);m.zb(28),m.mc("ngIf",n.changeCurves()),m.zb(1),m.mc("ngIf",!n.changeCurves())}}function wn(t,e){1&t&&(m.Sb(0,"button",30),m.Ec(1,"Save changes"),m.Rb())}function Mn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"form",1),m.ec("ngSubmit",(function(){return m.vc(n),m.gc().onSubmit()})),m.Sb(1,"div",2),m.Cc(2,Cn,2,0,"ng-template",3),m.Cc(3,Rn,2,0,"ng-template",3),m.Rb(),m.Sb(4,"div",4),m.Cc(5,xn,3,2,"div",5),m.Cc(6,zn,30,2,"ng-template",3),m.Sb(7,"div",6),m.Cc(8,wn,2,0,"button",7),m.Sb(9,"button",8),m.ec("click",(function(){return m.vc(n),m.gc().onCancel()})),m.Ec(10,"Cancel"),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=m.gc();m.mc("formGroup",o.getFormGroup()),m.zb(2),m.mc("ngIf",o.getParameter()),m.zb(1),m.mc("ngIf",!o.getParameter()),m.zb(2),m.mc("ngIf",!o.editForm()),m.zb(1),m.mc("ngIf",o.editForm()),m.zb(2),m.mc("ngIf",o.editForm())}}var Gn,Nn=((Gn=function(){function t(e,n,o){_classCallCheck(this,t),this.fb=e,this.activeModal=n,this.paramsService=o,this.loading=!0,this.fileContent=[],this.currentParameters=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadParameters()}},{key:"setParameter",value:function(t){t&&(this.parameter=t,this.physiologicalParameter=t.animalParameters.physiologicalParameter)}},{key:"getParameter",value:function(){return this.parameter}},{key:"onSubmit",value:function(){var t,e=this.formGroup.get("value").value,n=this.formGroup.get("alert_low").value,o=this.formGroup.get("alert_high").value,i=this.formGroup.get("parameter").value;(null===(t=this.parameter)||void 0===t?void 0:t.animalParameters)?(this.parameter.animalParameters.alert_low=n,this.parameter.animalParameters.alert_high=o,this.parameter.value=e,this.parameter.curves=this.fileContent):this.parameter={animalParameters:{alert_high:o,alert_low:n,animalSpecie:this.animalSpecie,physiologicalParameter:i},value:e,curves:this.fileContent},this.activeModal.close(this.parameter)}},{key:"getFormGroup",value:function(){return this.formGroup}},{key:"initFormGroup",value:function(){var t,e,n,o,i,a,r,c,s,l,b=this,u=this.parameter?null===(e=null===(t=this.parameter)||void 0===t?void 0:t.animalParameters)||void 0===e?void 0:e.physiologicalParameter:this.physiologicalParameter;this.fileContent=null===(n=this.parameter)||void 0===n?void 0:n.curves,this.formGroup=this.fb.group({parameter:[null],name:[{value:(null==u?void 0:u.name)?null==u?void 0:u.name:"",disabled:!0},C.w.required],description:[{value:(null==u?void 0:u.description)?null==u?void 0:u.description:"",disabled:!0},C.w.required],alert_low:[(null===(i=null===(o=this.parameter)||void 0===o?void 0:o.animalParameters)||void 0===i?void 0:i.alert_low)?null===(a=this.parameter.animalParameters)||void 0===a?void 0:a.alert_low:0],alert_high:[(null===(c=null===(r=this.parameter)||void 0===r?void 0:r.animalParameters)||void 0===c?void 0:c.alert_high)?this.parameter.animalParameters.alert_high:0],value:[(null===(s=this.parameter)||void 0===s?void 0:s.value)?null===(l=this.parameter)||void 0===l?void 0:l.value:0]}),this.loading=!1,this.formGroup.get("parameter").valueChanges.subscribe((function(t){b.physiologicalParameter=t,b.formGroup.get("name").setValue(b.physiologicalParameter.name),b.formGroup.get("description").setValue(b.physiologicalParameter.description)}))}},{key:"onCancel",value:function(){this.activeModal.close(!1)}},{key:"getParameters",value:function(){return this.parameters}},{key:"isLoading",value:function(){return this.loading}},{key:"changeCurves",value:function(){var t,e;return(null===(e=null===(t=this.parameter)||void 0===t?void 0:t.curves)||void 0===e?void 0:e.length)>0}},{key:"onDeleteCurves",value:function(){this.parameter.curves=[]}},{key:"onFileChange",value:function(t){var e=this;if(t.target.files&&t.target.files.length){var n=_slicedToArray(t.target.files,1)[0],o=new FileReader;o.readAsText(n),o.onload=function(){var t=o.result.split(/\r\n|\n/),n=e.getCurvesFromCSV(t);e.fileContent=n},o.onerror=function(){console.log("error is occured while reading file!")}}}},{key:"getCurvesFromCSV",value:function(t){var e=[];try{for(var n=1;n<t.length;n++){var o=t[n].split(";");o[0]&&o[1]&&function(){o[0]=o[0].replace(",","."),o[1]=o[1].replace(",",".");var t=new Sn;t.t=Number(o[0]),t.value=Number(o[1]),e.some((function(e){return e.t===t.t}))||null==t.t&&null==t.value||e.push(t)}()}return e}catch(i){throw console.error(i),i}}},{key:"compareParams",value:function(t,e){return t&&e?t.id_pp===e.id_pp:!t&&!e}},{key:"editForm",value:function(){return null!=this.physiologicalParameter}},{key:"setAnimalSpecie",value:function(t){this.animalSpecie=t}},{key:"loadParameters",value:function(){var t=this;this.paramsService.findAll().subscribe((function(e){var n=[];e.forEach((function(e){t.currentParameters.some((function(t){return t.id_pp==e.id_pp}))||n.push(e)})),t.parameters=n,t.initFormGroup()}),(function(t){console.error(t)}))}},{key:"setCurrentParameters",value:function(t){this.currentParameters=t}}]),t}()).\u0275fac=function(t){return new(t||Gn)(m.Nb(C.e),m.Nb(x.a),m.Nb(yn))},Gn.\u0275cmp=m.Hb({type:Gn,selectors:[["app-parameters-create"]],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"modal-header"],[3,"ngIf"],[1,"modal-body"],["class","form-group row",4,"ngIf"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-save",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group","row"],[1,"text-center","text-param-configured"],["for","parameter",1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["name","parameter","id","parameter","aria-label","Select Parameter","formControlName","parameter",1,"form-select","form-control",3,"compareWith"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","name",1,"col-sm-3","col-form-label"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description",1,"col-sm-3","col-form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["for","alert-low",1,"col-sm-3","col-form-label"],["type","number","id","alert_low","formControlName","alert_low",1,"form-control"],["type","number","id","alert_high","formControlName","alert_high",1,"form-control"],["for","value",1,"col-sm-3","col-form-label"],["type","number","id","value","formControlName","value",1,"form-control"],[1,"custom-file-upload"],["id","formFile","type","file","accept",".csv",1,"form-control","curves-dataset-input",3,"change"],["title","Delete curves",1,"btn","btn-link",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/26/000000/external-close-banking-and-finance-kiranshastry-lineal-color-kiranshastry.png",1,"img-delete"],["type","submit",1,"btn","btn-primary","btn-save"]],template:function(t,e){1&t&&m.Cc(0,Mn,11,6,"form",0),2&t&&m.mc("ngIf",!e.isLoading())},directives:[v.l,C.y,C.m,C.g,C.v,C.l,C.f,C.p,C.x,v.k,C.b,C.q],styles:[".modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#212529}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}.custom-file-upload[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:5px;display:inline-block;padding:6px 12px;margin-left:3%;cursor:pointer;background-color:#fff}input[type=file][_ngcontent-%COMP%]{display:none}.text-param-configured[_ngcontent-%COMP%]{padding:3%;font-size:1.5em}.img-delete[_ngcontent-%COMP%]{margin-bottom:30%}"]}),Gn);function Fn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"button",13),m.ec("click",(function(){return m.vc(n),m.gc(2).onSaveChanges()})),m.Ec(1," Save Changes"),m.Rb()}}function An(t,e){1&t&&(m.Sb(0,"button",14),m.Ec(1," Save Changes"),m.Rb())}function Dn(t,e){if(1&t&&(m.Sb(0,"div",10),m.Cc(1,Fn,2,0,"button",11),m.Cc(2,An,2,0,"button",12),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngIf",n.getForm().valid),m.zb(1),m.mc("ngIf",!n.getForm().valid)}}function qn(t,e){1&t&&(m.Sb(0,"button",15),m.Ob(1,"span",16),m.Ec(2," Loading... "),m.Rb())}function Ln(t,e){if(1&t&&(m.Sb(0,"option",53),m.Ec(1),m.Rb()),2&t){var n=e.$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function Tn(t,e){if(1&t&&m.Cc(0,Ln,2,2,"option",52),2&t){var n=m.gc(2);m.mc("ngForOf",n.getAnimals())}}function Vn(t,e){if(1&t&&(m.Sb(0,"option",53),m.Ec(1),m.Rb()),2&t){var n=e.$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function Bn(t,e){if(1&t){var n=m.Tb();m.Qb(0,54),m.Sb(1,"tr",55),m.Sb(2,"td",56),m.Sb(3,"select",57),m.Sb(4,"option",58),m.Ec(5,"Choose Medication "),m.Rb(),m.Cc(6,Vn,2,2,"option",52),m.Rb(),m.Rb(),m.Sb(7,"td",56),m.Ob(8,"input",59),m.Rb(),m.Sb(9,"td",56),m.Ob(10,"input",60),m.Rb(),m.Sb(11,"td",56),m.Sb(12,"button",61),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).deleteRowMedication(t)})),m.Ob(13,"img",62),m.Rb(),m.Rb(),m.Rb(),m.Pb()}if(2&t){var o=e.index,i=m.gc(2);m.zb(1),m.mc("formGroupName",o),m.zb(2),m.mc("compareWith",i.compareMedications),m.zb(3),m.mc("ngForOf",i.getMedications())}}function $n(t,e){if(1&t&&(m.Sb(0,"option",53),m.Ec(1),m.Rb()),2&t){var n=e.$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function jn(t,e){if(1&t){var n=m.Tb();m.Qb(0,63),m.Sb(1,"tr",55),m.Sb(2,"td",56),m.Sb(3,"select",64),m.Sb(4,"option",58),m.Ec(5,"Choose Pathology "),m.Rb(),m.Cc(6,$n,2,2,"option",52),m.Rb(),m.Rb(),m.Sb(7,"td",56),m.Sb(8,"button",61),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).deleteRowPathology(t)})),m.Ob(9,"img",62),m.Rb(),m.Rb(),m.Rb(),m.Pb()}if(2&t){var o=e.index,i=m.gc(2);m.zb(1),m.mc("formGroupName",o),m.zb(2),m.mc("compareWith",i.comparePathologies),m.zb(3),m.mc("ngForOf",i.getPathologies())}}function Hn(t,e){if(1&t&&(m.Sb(0,"option",53),m.Ec(1),m.Rb()),2&t){var n=e.$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function Jn(t,e){if(1&t){var n=m.Tb();m.Qb(0,65),m.Sb(1,"tr",55),m.Sb(2,"td",56),m.Sb(3,"select",66),m.Sb(4,"option",58),m.Ec(5,"Choose Arrhythmia "),m.Rb(),m.Cc(6,Hn,2,2,"option",52),m.Rb(),m.Rb(),m.Sb(7,"td",56),m.Sb(8,"button",61),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).deleteRowArrhythmia(t)})),m.Ob(9,"img",62),m.Rb(),m.Rb(),m.Rb(),m.Pb()}if(2&t){var o=e.index,i=m.gc(2);m.zb(1),m.mc("formGroupName",o),m.zb(2),m.mc("compareWith",i.compareArrhythmias),m.zb(3),m.mc("ngForOf",i.getArrhythmias())}}function Un(t,e){if(1&t&&(m.Sb(0,"p"),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Gc(" ",n.animalParameters.physiologicalParameter.specialConfiguration,"")}}function Wn(t,e){1&t&&(m.Sb(0,"p"),m.Ec(1," -"),m.Rb())}function Qn(t,e){if(1&t&&m.Ob(0,"input",75),2&t){var n=m.gc().$implicit;m.nc("value",n.animalParameters.physiologicalParameter.colorLine)}}function Yn(t,e){1&t&&(m.Sb(0,"p",76),m.Ec(1,"-"),m.Rb())}function Xn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",49),m.Sb(2,"p"),m.Ec(3),m.Rb(),m.Rb(),m.Sb(4,"td",68),m.Sb(5,"p"),m.Ec(6),m.Rb(),m.Rb(),m.Sb(7,"td",69),m.Cc(8,Un,2,1,"p",70),m.Cc(9,Wn,2,0,"p",70),m.Rb(),m.Sb(10,"td",56),m.Sb(11,"p"),m.Ec(12),m.Ob(13,"br"),m.Ec(14),m.Rb(),m.Rb(),m.Sb(15,"td",56),m.Cc(16,Qn,1,1,"ng-template",27),m.Cc(17,Yn,2,0,"ng-template",27),m.Rb(),m.Sb(18,"td",71),m.Sb(19,"button",72),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(3).editParameter(t)})),m.Ob(20,"img",73),m.Rb(),m.Sb(21,"span"),m.Sb(22,"button",74),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(3).onDeleteParameter(t)})),m.Ob(23,"img",62),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(3),m.Fc(o.animalParameters.physiologicalParameter.name),m.zb(3),m.Fc(o.value),m.zb(2),m.mc("ngIf",o.animalParameters.physiologicalParameter.specialConfiguration),m.zb(1),m.mc("ngIf",!o.animalParameters.physiologicalParameter.specialConfiguration),m.zb(3),m.Gc("Alert low: ",o.animalParameters.alert_low," "),m.zb(2),m.Gc(" Alert high: ",o.animalParameters.alert_high," "),m.zb(2),m.mc("ngIf",o.animalParameters.physiologicalParameter.colorLine),m.zb(1),m.mc("ngIf",!o.animalParameters.physiologicalParameter.colorLine)}}function Kn(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,Xn,24,8,"tr",67),m.Rb()),2&t){var n=m.gc(2);m.zb(1),m.mc("ngForOf",n.getParameters())}}function Zn(t,e){if(1&t){var n=m.Tb();m.Sb(0,"form",17),m.Sb(1,"div",2),m.Sb(2,"div",18),m.Sb(3,"label",19),m.Ec(4,"Scenario Name"),m.Rb(),m.Ob(5,"input",20),m.Rb(),m.Sb(6,"div",21),m.Sb(7,"label",22),m.Ec(8,"Scenario description"),m.Rb(),m.Ob(9,"textarea",23),m.Rb(),m.Sb(10,"div",3),m.Sb(11,"label",24),m.Ec(12,"Animal Specie"),m.Rb(),m.Sb(13,"select",25),m.Sb(14,"option",26),m.Ec(15,"Choose Animal"),m.Rb(),m.Cc(16,Tn,1,1,"ng-template",27),m.Rb(),m.Rb(),m.Rb(),m.Sb(17,"div",28),m.Sb(18,"div",21),m.Sb(19,"label",29),m.Ec(20,"Medications"),m.Rb(),m.Sb(21,"table",30),m.Sb(22,"thead",31),m.Sb(23,"tr"),m.Sb(24,"th",32),m.Ec(25," Medication "),m.Rb(),m.Sb(26,"th",32),m.Ec(27," dose "),m.Rb(),m.Sb(28,"th",32),m.Ec(29," [unit] "),m.Rb(),m.Ob(30,"th",32),m.Rb(),m.Rb(),m.Sb(31,"tbody"),m.Cc(32,Bn,14,3,"ng-container",33),m.Sb(33,"button",34),m.ec("click",(function(){return m.vc(n),m.gc().addRowMedication()})),m.Ec(34," + Medication "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(35,"div",18),m.Sb(36,"label",35),m.Ec(37,"Pathologies"),m.Rb(),m.Sb(38,"table",36),m.Sb(39,"thead",31),m.Sb(40,"tr"),m.Sb(41,"th",32),m.Ec(42," Pathology "),m.Rb(),m.Ob(43,"th",37),m.Rb(),m.Rb(),m.Sb(44,"tbody"),m.Cc(45,jn,10,3,"ng-container",38),m.Sb(46,"button",34),m.ec("click",(function(){return m.vc(n),m.gc().addRowPathology()})),m.Ec(47," + Pathology "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(48,"div",18),m.Sb(49,"label",39),m.Ec(50,"Arrhythmias"),m.Rb(),m.Sb(51,"table",40),m.Sb(52,"thead",31),m.Sb(53,"tr"),m.Sb(54,"th",32),m.Ec(55," Arrhythmia "),m.Rb(),m.Ob(56,"th",37),m.Rb(),m.Rb(),m.Sb(57,"tbody"),m.Cc(58,Jn,10,3,"ng-container",41),m.Sb(59,"button",34),m.ec("click",(function(){return m.vc(n),m.gc().addRowArrhythmia()})),m.Ec(60," + Arrhythmia "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(61,"div",42),m.Sb(62,"div",43),m.Sb(63,"h3",44),m.Ec(64,"Parameters Configuration"),m.Rb(),m.Rb(),m.Sb(65,"div",45),m.Sb(66,"div",46),m.Ob(67,"div",3),m.Sb(68,"div",10),m.Sb(69,"button",47),m.ec("click",(function(){return m.vc(n),m.gc().onAddParameter()})),m.Ec(70,"Add parameter"),m.Rb(),m.Rb(),m.Rb(),m.Sb(71,"table",48),m.Sb(72,"thead",31),m.Sb(73,"tr"),m.Sb(74,"th",49),m.Ec(75," Parameter "),m.Rb(),m.Sb(76,"th",32),m.Ec(77," Value "),m.Rb(),m.Sb(78,"th",50),m.Ec(79," Special Configuration "),m.Rb(),m.Sb(80,"th",32),m.Ec(81," Alerts "),m.Rb(),m.Sb(82,"th",32),m.Ec(83," Color line "),m.Rb(),m.Ob(84,"th",32),m.Rb(),m.Rb(),m.Cc(85,Kn,2,1,"tbody",51),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o,i=m.gc(),a=m.uc(11),r=(null==(o=i.getParameters())?null:o.length)>0;m.mc("formGroup",i.getForm()),m.zb(13),m.mc("compareWith",i.compareAnimals),m.zb(1),m.mc("ngValue",null),m.zb(2),m.mc("ngIf",i.getAnimals().length),m.zb(16),m.mc("ngForOf",i.getMedicationsForm().controls),m.zb(13),m.mc("ngForOf",i.getPathologiesForm().controls),m.zb(13),m.mc("ngForOf",i.getArrhythmiasForm().controls),m.zb(27),m.mc("ngIf",r)("ngIfElse",a)}}function to(t,e){1&t&&(m.Sb(0,"tr"),m.Sb(1,"td",77),m.Ec(2," Nothing to show you. "),m.Rb(),m.Rb())}var eo,no=((eo=function(){function t(e,n,o,i,a,r,c,s,l,b){_classCallCheck(this,t),this.animalSpecieService=e,this.medicationService=n,this.pathologiesService=o,this.arrhythmiasService=i,this.scenarioService=a,this.parameterService=r,this.fb=c,this.activatedRoute=s,this.toast=l,this.modal=b,this.animals=[],this.medications=[],this.arrhythmias=[],this.pathologies=[],this.parameters=[],this.loading=!0;var u=s.snapshot.params;u&&u.id&&(this.params={id:Number(u.id)})}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadData(),this.params&&this.params.id?this.loadScenario():this.initForm()}},{key:"loadData",value:function(){this.loading=!0,this.loadAnimals(),this.loadArrhythmias(),this.loadMedications(),this.laodPathologies()}},{key:"loadScenario",value:function(){var t=this;this.scenarioService.listByIdWithParams(this.params.id).subscribe((function(e){var n;n=_slicedToArray(e,1),t.scenario=n[0],t.parameters=t.scenario.parametersScenario,t.initForm()}),(function(t){console.error(t)}))}},{key:"loadAnimals",value:function(){var t=this;this.animalSpecieService.list().subscribe((function(e){e&&(t.animals=e.data)}),(function(t){console.error(t)}))}},{key:"loadMedications",value:function(){var t=this;this.medicationService.list().subscribe((function(e){e&&(t.medications=e.data)}),(function(t){console.error(t)}))}},{key:"loadArrhythmias",value:function(){var t=this;this.arrhythmiasService.list().subscribe((function(e){e&&(t.arrhythmias=e.data)}),(function(t){console.error(t)}))}},{key:"laodPathologies",value:function(){var t=this;this.pathologiesService.list().subscribe((function(e){e&&(t.pathologies=e.data)}),(function(t){console.error(t)}))}},{key:"getParameters",value:function(){return this.parameters}},{key:"getArrhythmias",value:function(){return this.arrhythmias}},{key:"getPathologies",value:function(){return this.pathologies}},{key:"getAnimals",value:function(){return this.animals}},{key:"getMedications",value:function(){return this.medications}},{key:"initForm",value:function(){var t,e,n=null===(e=null===(t=this.scenario)||void 0===t?void 0:t.parametersScenario[0])||void 0===e?void 0:e.animalParameters;this.formGroupScenario=this.fb.group({scenarioName:[this.scenario?this.scenario.name:"",C.w.required],scenarioDescription:[this.scenario?this.scenario.description:"",C.w.required],animalSpecie:[n?n.animalSpecie:null,C.w.required],medications:new C.c([]),arrhythmias:new C.c([]),pathologies:new C.c([])}),this.loadMedicationForm(),this.loadPathologiesForm(),this.loadArrhythmiasForm(),this.loading=!1}},{key:"getForm",value:function(){return this.formGroupScenario}},{key:"isLoading",value:function(){return this.loading}},{key:"onSaveChanges",value:function(){var t=this,e=[],n=[],o=[];this.formGroupScenario.get("arrhythmias")&&this.formGroupScenario.get("arrhythmias").value.forEach((function(t){e.push({id_arr:t.arrhythmia.id_arr,name:t.arrhythmia.name,description:t.arrhythmia.description})})),this.formGroupScenario.get("medications")&&(o=this.formGroupScenario.get("medications").value),this.formGroupScenario.get("pathologies")&&this.formGroupScenario.get("pathologies").value.forEach((function(t){n.push({id_pat:t.pathology.id_pat,name:t.pathology.name,description:t.pathology.description})}));var i=this.formGroupScenario.get("scenarioName").value,a=this.formGroupScenario.get("scenarioDescription").value,r=this.formGroupScenario.get("animalSpecie").value;this.parameters.forEach((function(t){t.animalParameters.animalSpecie=r})),this.scenario={name:i,description:a,arrhythmias:e,pathologies:n,medications:o,parametersScenario:this.parameters},this.params&&this.params.id?(this.scenario.id_scenario=this.params.id,this.scenarioService.updateById(this.params.id,this.scenario).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("Scenario updated successfully")}),(function(t){console.error(t)}))):this.scenarioService.create(this.scenario).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("Scenario created successfully")}),(function(t){console.error(t)}))}},{key:"loadMedicationForm",value:function(){var t,e=this,n=null===(t=this.scenario)||void 0===t?void 0:t.medications,o=this.formGroupScenario.get("medications");n&&n.length&&n.forEach((function(t){o.push(e.fb.group({dose:t.dose,unit:t.unit,medication:t.medication?t.medication:null}))}))}},{key:"loadPathologiesForm",value:function(){var t,e=this,n=null===(t=this.scenario)||void 0===t?void 0:t.pathologies,o=this.formGroupScenario.get("pathologies");n&&n.length&&n.forEach((function(t){o.push(e.fb.group({pathology:t}))}))}},{key:"loadArrhythmiasForm",value:function(){var t,e=this,n=null===(t=this.scenario)||void 0===t?void 0:t.arrhythmias,o=this.formGroupScenario.get("arrhythmias");n&&n.length&&n.forEach((function(t){o.push(e.fb.group({arrhythmia:t}))}))}},{key:"getMedicationsForm",value:function(){return this.formGroupScenario.get("medications")}},{key:"getPathologiesForm",value:function(){return this.formGroupScenario.get("pathologies")}},{key:"getArrhythmiasForm",value:function(){return this.formGroupScenario.get("arrhythmias")}},{key:"deleteRowMedication",value:function(t){this.formGroupScenario.get("medications").removeAt(t)}},{key:"addRowMedication",value:function(){this.formGroupScenario.get("medications").push(this.fb.group({dose:"",unit:"",medication:null}))}},{key:"addRowPathology",value:function(){this.formGroupScenario.get("pathologies").push(this.fb.group({pathology:null}))}},{key:"deleteRowPathology",value:function(t){this.formGroupScenario.get("pathologies").removeAt(t)}},{key:"addRowArrhythmia",value:function(){this.formGroupScenario.get("arrhythmias").push(this.fb.group({arrhythmia:null}))}},{key:"deleteRowArrhythmia",value:function(t){this.formGroupScenario.get("arrhythmias").removeAt(t)}},{key:"compareAnimals",value:function(t,e){return t&&e?t.id_as==e.id_as:!t&&!e}},{key:"compareMedications",value:function(t,e){return t&&e?t.id_medication==e.id_medication:!t&&!e}},{key:"comparePathologies",value:function(t,e){return t&&e?t.id_pat==e.id_pat:!t&&!e}},{key:"compareArrhythmias",value:function(t,e){return t&&e?t.id_arr==e.id_arr:!t&&!e}},{key:"existsMedications",value:function(){var t=this.formGroupScenario.get("medications");return t&&t.length>0}},{key:"existsArrhythmias",value:function(){var t=this.formGroupScenario.get("arrhythmias");return t&&t.length>0}},{key:"existsPathologies",value:function(){var t=this.formGroupScenario.get("pathologies");return t&&t.length>0}},{key:"onDeleteParameter",value:function(t){this.parameters.splice(t,1)}},{key:"editParameter",value:function(t){var e=this,n=this.modal.open(Nn);n.componentInstance.setParameter(this.parameters[t]),n.result.then((function(n){n&&(e.parameters[t]=n)})).catch((function(t){console.error(t)}))}},{key:"onAddParameter",value:function(){var t=this,e=this.modal.open(Nn),n=this.formGroupScenario.get("animalSpecie").value,o=this.parameters.map((function(t){return t.animalParameters.physiologicalParameter}));e.componentInstance.setParameter(null),e.componentInstance.setAnimalSpecie(n),e.componentInstance.setCurrentParameters(o),e.result.then((function(e){e&&t.parameters.push(e)})).catch((function(t){console.error(t)}))}}]),t}()).\u0275fac=function(t){return new(t||eo)(m.Nb(h),m.Nb(g),m.Nb(p),m.Nb(d),m.Nb(s.a),m.Nb(yn),m.Nb(C.e),m.Nb(S.a),m.Nb(k.b),m.Nb(x.b))},eo.\u0275cmp=m.Hb({type:eo,selectors:[["app-scenario-params-create"]],decls:12,vars:3,consts:[[1,"container"],[1,"scenario-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"title"],["class","col-2",4,"ngIf"],[1,"container","container-form"],["class","btn btn-primary btn-spinner","type","button","disabled","",4,"ngIf"],[3,"formGroup",4,"ngIf"],["noElements",""],[1,"col-2"],["class","btn btn-primary btn-save",3,"click",4,"ngIf"],["class","btn btn-primary btn-save","disabled","",4,"ngIf"],[1,"btn","btn-primary","btn-save",3,"click"],["disabled","",1,"btn","btn-primary","btn-save"],["type","button","disabled","",1,"btn","btn-primary","btn-spinner"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[3,"formGroup"],[1,"col-3"],["for","scenario-name",1,"form-label"],["type","text","formControlName","scenarioName",1,"form-control"],[1,"col-5"],["for","scenario-description",1,"form-label"],["rows","3","formControlName","scenarioDescription",1,"form-control"],["for","animal-specie"],["name","animal-specie","id","animal-specie","aria-label","Select animal specie","formControlName","animalSpecie",1,"form-select","form-control",3,"compareWith"],["disabled","",3,"ngValue"],[3,"ngIf"],[1,"row","second-row","justify-content-between"],["for","medications",1,"form-label"],[1,"table","table-med","table-hover"],[1,"thead-dark"],["scope","col"],["formArrayName","medications",4,"ngFor","ngForOf"],[1,"btn","btn-add","mt-2","ml-1",3,"click"],["for","pathologies",1,"form-label"],[1,"table","table-path","table-hover"],["scope","col-sm"],["formArrayName","pathologies",4,"ngFor","ngForOf"],["for","arrhythmias",1,"form-label"],[1,"table-arr","table","table-hover"],["formArrayName","arrhythmias",4,"ngFor","ngForOf"],[1,"row","parameters"],[1,"parameter-configuration-text"],[1,"text-params","text-center"],[1,"col-12"],[1,"row","justify-content-between","mb-1"],[1,"btn","btn-primary","btn-param",3,"click"],[1,"table","table-hover","table-params"],["scope","col",1,"col-param"],["scope","col",1,"col-configuration"],[4,"ngIf","ngIfElse"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["formArrayName","medications"],[3,"formGroupName"],["scope","row"],["formControlName","medication",1,"form-select","form-control",3,"compareWith"],["value","null","disabled",""],["type","text","formControlName","dose",1,"form-control"],["type","text","formControlName","unit",1,"form-control"],[1,"btn","btn-trash","btn-light",3,"click"],["src","https://img.icons8.com/color/26/000000/trash--v1.png"],["formArrayName","pathologies"],["formControlName","pathology",1,"form-select","form-control",3,"compareWith"],["formArrayName","arrhythmias"],["formControlName","arrhythmia",1,"form-select","form-control",3,"compareWith"],[4,"ngFor","ngForOf"],["scope","row",1,"col-value"],["scope","row",1,"col-configuration"],[4,"ngIf"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/26/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["type","color","title","Color line","disabled","",1,"form-control","form-control-color","color-picker",3,"value"],[1,"text-color"],["colspan","7"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," New Scenario "),m.Rb(),m.Rb(),m.Cc(6,Dn,3,2,"div",5),m.Rb(),m.Rb(),m.Rb(),m.Sb(7,"div",6),m.Cc(8,qn,3,0,"button",7),m.Cc(9,Zn,86,9,"form",8),m.Rb(),m.Cc(10,to,3,0,"ng-template",null,9,m.Dc)),2&t&&(m.zb(6),m.mc("ngIf",!e.isLoading()),m.zb(2),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()))},directives:[v.l,C.y,C.m,C.g,C.b,C.l,C.f,C.v,C.p,C.x,v.k,C.d,C.h],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.scenario-header[_ngcontent-%COMP%]{margin-top:3%}.container-form[_ngcontent-%COMP%], .file-row[_ngcontent-%COMP%], .parameters[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]{margin-top:2%}.col-configuration[_ngcontent-%COMP%], .col-param[_ngcontent-%COMP%]{max-width:150px}.col-alerts[_ngcontent-%COMP%]{width:200px}.curves-dataset-input[_ngcontent-%COMP%]{background-color:transparent;padding-left:0}.btn-add[_ngcontent-%COMP%], .btn-param[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%], .btn-spinner[_ngcontent-%COMP%], .save-changes[_ngcontent-%COMP%]{margin-left:2%;background-color:#59478d;border-color:#59478d;color:#fff}.btn-param[_ngcontent-%COMP%]{margin-left:18%}.btn-spinner[_ngcontent-%COMP%]{margin-left:0}.btn-add[_ngcontent-%COMP%]:hover, .btn-param[_ngcontent-%COMP%]:hover, .btn-save[_ngcontent-%COMP%]:hover, .save-changes[_ngcontent-%COMP%]:hover{color:#59478d;border-color:#fff;background-color:#fff}.btn-save[_ngcontent-%COMP%]{width:150px;height:60px;border-radius:6px;font-size:1.2em}.col-value[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .text-color[_ngcontent-%COMP%]{padding-left:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.parameter-configuration-text[_ngcontent-%COMP%]{width:100%;margin-top:2%}.color-picker[_ngcontent-%COMP%]{width:50px;padding:0}.custom-file-upload[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:5px;display:inline-block;padding:6px 12px;cursor:pointer;background-color:#fff}input[type=file][_ngcontent-%COMP%]{display:none}.spinner-border[_ngcontent-%COMP%]{color:#fff}.spinner-border[_ngcontent-%COMP%]:hover{color:#59478d}.btn-add-animal[_ngcontent-%COMP%]{margin-left:20%}"]}),eo);function oo(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Edit Parameter"),m.Rb())}function io(t,e){1&t&&(m.Sb(0,"h3"),m.Ec(1,"Create Parameter"),m.Rb())}function ao(t,e){if(1&t&&(m.Sb(0,"option",19),m.Ec(1),m.Rb()),2&t){var n=e.$implicit;m.mc("ngValue",n),m.zb(1),m.Gc(" ",n.name," ")}}function ro(t,e){if(1&t&&m.Cc(0,ao,2,2,"option",26),2&t){var n=m.gc();m.mc("ngForOf",n.getParameters())}}function co(t,e){1&t&&(m.Sb(0,"button",27),m.Ec(1,"Save changes"),m.Rb())}function so(t,e){1&t&&(m.Sb(0,"button",28),m.Ec(1,"Save changes"),m.Rb())}var lo,bo=((lo=function(){function t(e,n,o){_classCallCheck(this,t),this.fb=e,this.parameterSvc=n,this.activeModal=o,this.parameters=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadData(),this.initFormGroup()}},{key:"initFormGroup",value:function(){var t;this.formGroup=this.fb.group({name:[this.parameter?this.parameter.name:"",C.w.required],description:[this.parameter?this.parameter.description:"",C.w.required],colorLine:[this.parameter?this.parameter.colorLine:null],label:[this.parameter?this.parameter.label:"",C.w.required],specialConfiguration:[this.parameter?this.parameter.specialConfiguration:null],unit:[this.parameter?this.parameter.unit:"",C.w.required],source:[this.parameter?(null===(t=this.parameter)||void 0===t?void 0:t.source)?this.parameter.source:"noSource":null]})}},{key:"onSubmit",value:function(){this.formGroup.valid&&("noSource"===this.formGroup.get("source").value&&(this.formGroup.value.source=null),this.activeModal.close(this.formGroup.value))}},{key:"getFormGroup",value:function(){return this.formGroup}},{key:"getParameter",value:function(){return this.parameter}},{key:"onCancel",value:function(){this.activeModal.close()}},{key:"setParameter",value:function(t){this.parameter=t}},{key:"loadData",value:function(){var t=this;this.parameterSvc.findAll().subscribe((function(e){e&&(t.parameters=e)}),(function(t){console.error(t)}))}},{key:"getParameters",value:function(){return this.parameters}},{key:"compareParameters",value:function(t,e){return t&&e?t.id_pp==e.id_pp:!t&&!e}}]),t}()).\u0275fac=function(t){return new(t||lo)(m.Nb(C.e),m.Nb(yn),m.Nb(x.a))},lo.\u0275cmp=m.Hb({type:lo,selectors:[["app-new-parameter"]],decls:50,vars:9,consts:[[3,"formGroup","ngSubmit"],[1,"modal-header"],[3,"ngIf"],[1,"modal-body"],[1,"form-group","row"],["for","name",1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["type","text","id","name","formControlName","name",1,"form-control"],["for","description",1,"col-sm-3","col-form-label"],["type","text","id","description","formControlName","description",1,"form-control"],["for","label",1,"col-sm-3","col-form-label"],["type","text","id","label","formControlName","label",1,"form-control"],["for","unit",1,"col-sm-3","col-form-label"],["type","text","id","unit","formControlName","unit",1,"form-control"],["for","color-line",1,"col-sm-3","col-form-label"],["type","color","formControlName","colorLine","title","Color line",1,"form-control","form-control-color","color-picker"],["for","source",1,"col-sm-3","col-form-label"],["name","source","id","source","aria-label","Select animal specie","formControlName","source",1,"form-select","form-control",3,"compareWith"],["disabled","",3,"ngValue"],[3,"ngValue"],["for","specialConfiguration",1,"col-sm-3","col-form-label"],["type","text","formControlName","specialConfiguration","title","Special Configuration",1,"form-control"],[1,"modal-footer"],["type","submit","class","btn btn-primary btn-save",4,"ngIf"],["type","submit","class","btn btn-primary btn-save","disabled","",4,"ngIf"],["type","button",1,"btn","btn-danger",3,"click"],[3,"ngValue",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","btn-save"],["type","submit","disabled","",1,"btn","btn-primary","btn-save"]],template:function(t,e){1&t&&(m.Sb(0,"form",0),m.ec("ngSubmit",(function(){return e.onSubmit()})),m.Sb(1,"div",1),m.Cc(2,oo,2,0,"ng-template",2),m.Cc(3,io,2,0,"ng-template",2),m.Rb(),m.Sb(4,"div",3),m.Sb(5,"div",4),m.Sb(6,"label",5),m.Ec(7,"Name"),m.Rb(),m.Sb(8,"div",6),m.Ob(9,"input",7),m.Rb(),m.Rb(),m.Sb(10,"div",4),m.Sb(11,"label",8),m.Ec(12,"Description"),m.Rb(),m.Sb(13,"div",6),m.Ob(14,"input",9),m.Rb(),m.Rb(),m.Sb(15,"div",4),m.Sb(16,"label",10),m.Ec(17,"Label"),m.Rb(),m.Sb(18,"div",6),m.Ob(19,"input",11),m.Rb(),m.Rb(),m.Sb(20,"div",4),m.Sb(21,"label",12),m.Ec(22,"Unit"),m.Rb(),m.Sb(23,"div",6),m.Ob(24,"input",13),m.Rb(),m.Rb(),m.Sb(25,"div",4),m.Sb(26,"label",14),m.Ec(27,"Color Line"),m.Rb(),m.Sb(28,"div",6),m.Ob(29,"input",15),m.Rb(),m.Rb(),m.Sb(30,"div",4),m.Sb(31,"label",16),m.Ec(32,"Source"),m.Rb(),m.Sb(33,"div",6),m.Sb(34,"select",17),m.Sb(35,"option",18),m.Ec(36,"Choose Source"),m.Rb(),m.Sb(37,"option",19),m.Ec(38,"No Source"),m.Rb(),m.Cc(39,ro,1,1,"ng-template",2),m.Rb(),m.Rb(),m.Rb(),m.Sb(40,"div",4),m.Sb(41,"label",20),m.Ec(42,"Special Configuration"),m.Rb(),m.Sb(43,"div",6),m.Ob(44,"input",21),m.Rb(),m.Rb(),m.Sb(45,"div",22),m.Cc(46,co,2,0,"button",23),m.Cc(47,so,2,0,"button",24),m.Sb(48,"button",25),m.ec("click",(function(){return e.onCancel()})),m.Ec(49,"Cancel"),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.mc("formGroup",e.getFormGroup()),m.zb(2),m.mc("ngIf",e.getParameter()),m.zb(1),m.mc("ngIf",!e.getParameter()),m.zb(31),m.mc("compareWith",e.compareParameters),m.zb(1),m.mc("ngValue",null),m.zb(2),m.mc("ngValue","noSource"),m.zb(2),m.mc("ngIf",e.getParameters().length),m.zb(7),m.mc("ngIf",e.getFormGroup().valid),m.zb(1),m.mc("ngIf",!e.getFormGroup().valid))},directives:[C.y,C.m,C.g,v.l,C.b,C.l,C.f,C.v,C.p,C.x,v.k],styles:[".modal-body[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]{background-color:#b7a9e2}.modal-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#212529}.btn-save[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-save[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}.color-picker[_ngcontent-%COMP%]{padding:0;width:50px}"]}),lo);function uo(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",26),m.Ec(3," Loading... "),m.Rb(),m.Rb(),m.Rb())}function mo(t,e){if(1&t&&m.Ob(0,"input",40),2&t){var n=m.gc().$implicit;m.nc("value",n.colorLine)}}function fo(t,e){1&t&&(m.Sb(0,"p",41),m.Ec(1,"-"),m.Rb())}function po(t,e){if(1&t&&(m.Sb(0,"p",41),m.Ec(1),m.Rb()),2&t){var n=m.gc().$implicit;m.zb(1),m.Fc(n.source.name)}}function go(t,e){1&t&&(m.Sb(0,"p",41),m.Ec(1,"-"),m.Rb())}function ho(t,e){if(1&t&&m.Ec(0),2&t){var n=m.gc().$implicit;m.Gc(" ",n.label," ")}}function vo(t,e){1&t&&(m.Sb(0,"p",41),m.Ec(1,"-"),m.Rb())}function So(t,e){if(1&t&&m.Ec(0),2&t){var n=m.gc().$implicit;m.Gc(" ",n.unit," ")}}function yo(t,e){1&t&&(m.Sb(0,"p",41),m.Ec(1,"-"),m.Rb())}function Co(t,e){if(1&t){var n=m.Tb();m.Sb(0,"tr"),m.Sb(1,"td",28),m.Ec(2),m.Rb(),m.Sb(3,"td",29),m.Sb(4,"p"),m.Ec(5),m.Rb(),m.Rb(),m.Sb(6,"td",30),m.Cc(7,mo,1,1,"ng-template",31),m.Cc(8,fo,2,0,"ng-template",31),m.Rb(),m.Sb(9,"td",32),m.Cc(10,po,2,1,"ng-template",31),m.Cc(11,go,2,0,"ng-template",31),m.Rb(),m.Sb(12,"td",33),m.Cc(13,ho,1,1,"ng-template",31),m.Cc(14,vo,2,0,"ng-template",31),m.Rb(),m.Sb(15,"td",34),m.Cc(16,So,1,1,"ng-template",31),m.Cc(17,yo,2,0,"ng-template",31),m.Rb(),m.Sb(18,"td",35),m.Sb(19,"button",36),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onEditParameter(t)})),m.Ob(20,"img",37),m.Rb(),m.Sb(21,"span"),m.Sb(22,"button",38),m.ec("click",(function(){m.vc(n);var t=e.index;return m.gc(2).onDeleteParameter(t)})),m.Ob(23,"img",39),m.Rb(),m.Rb(),m.Rb(),m.Rb()}if(2&t){var o=e.$implicit;m.zb(2),m.Gc(" ",o.name," "),m.zb(3),m.Fc(o.description),m.zb(2),m.mc("ngIf",o.colorLine),m.zb(1),m.mc("ngIf",!o.colorLine),m.zb(2),m.mc("ngIf",null==o.source?null:o.source.name),m.zb(1),m.mc("ngIf",!(null!=o.source&&o.source.name)),m.zb(2),m.mc("ngIf",o.label),m.zb(1),m.mc("ngIf",!o.label),m.zb(2),m.mc("ngIf",o.unit),m.zb(1),m.mc("ngIf",!o.unit)}}function Ro(t,e){if(1&t&&(m.Sb(0,"tbody"),m.Cc(1,Co,24,10,"tr",27),m.Rb()),2&t){var n=m.gc();m.zb(1),m.mc("ngForOf",n.getParameters())}}function ko(t,e){1&t&&(m.Sb(0,"tbody"),m.Sb(1,"tr"),m.Sb(2,"td",26),m.Ec(3," Nothing to show you. "),m.Rb(),m.Rb(),m.Rb())}var Oo,Po,_o,xo=[{path:"",component:Lt},{path:"animalSpecie",component:le},{path:"pathologies",component:_e},{path:"medications",component:je},{path:"arrhythmias",component:sn},{path:"scenarios",component:vn},{path:"scenarios/create",component:no},{path:"scenarios/edit/:id",component:no},{path:"parameters",component:(Oo=function(){function t(e,n,o,i){_classCallCheck(this,t),this.parameterSvc=e,this.fb=n,this.toast=o,this.modal=i,this.parameters=[],this.loading=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.initFormGroup(),this.loadData()}},{key:"initFormGroup",value:function(){var t=this;this.formGroup=this.fb.group({q:[""]}),this.formGroup.get("q").valueChanges.subscribe((function(e){t.loading=!0,t.loadData(e)}))}},{key:"loadData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading=!0,this.parameterSvc.findAll({q:e||this.formGroup.get("q").value}).subscribe((function(e){e&&(t.parameters=e),t.loading=!1}),(function(t){console.error(t)}))}},{key:"getFormGroup",value:function(){return this.formGroup}},{key:"isLoading",value:function(){return this.loading}},{key:"onAddParameter",value:function(){var t=this;this.modal.open(bo).result.then((function(e){e&&t.parameterSvc.createParameter(e).subscribe((function(){t.toast.toastrConfig.timeOut=1e3,t.toast.toastrConfig.positionClass="toast-bottom-full-width",t.toast.success("Parameter added successfully"),t.loadData()}),(function(t){console.error(t)}))})).catch((function(t){console.error(t)}))}},{key:"onEditParameter",value:function(t){var e=this,n=this.modal.open(bo);n.componentInstance.setParameter(this.parameters[t]);var o=this.parameters[t].id_pp;n.result.then((function(t){t&&e.parameterSvc.updateParameter(o,t).subscribe((function(){e.toast.toastrConfig.timeOut=1e3,e.toast.toastrConfig.positionClass="toast-bottom-full-width",e.toast.success("Parameter updated successfully"),e.loadData()}),(function(t){console.error(t)}))})).catch((function(t){console.error(t)}))}},{key:"clearSearch",value:function(){this.formGroup.get("q").reset(),this.loading=!0,this.loadData()}},{key:"getParameters",value:function(){return this.parameters}},{key:"onDeleteParameter",value:function(t){var e=this,n=this.parameters[t].id_pp;if(n){var o=this.modal.open(Bt);o.componentInstance.setTitle("You will delete the scenario "+this.parameters[t].name),o.componentInstance.setContent("Are you sure?"),o.result.then((function(t){t&&(e.loading=!0,e.parameterSvc.deleteParameter(n).subscribe((function(){e.toast.toastrConfig.timeOut=1e3,e.toast.toastrConfig.positionClass="toast-bottom-full-width",e.toast.success("Parameter deleted successfully"),e.loading=!0,e.loadData()}),(function(t){console.error(t)})))}))}}}]),t}(),Oo.\u0275fac=function(t){return new(t||Oo)(m.Nb(yn),m.Nb(C.e),m.Nb(k.b),m.Nb(x.b))},Oo.\u0275cmp=m.Hb({type:Oo,selectors:[["app-parameters"]],decls:46,vars:4,consts:[[1,"container"],[1,"parameters-header"],[1,"row"],[1,"col"],[1,"title"],[1,"col","text-right"],[1,"btn","btn-primary","btn-add",3,"click"],[1,"search-form","row"],[1,"col-10"],[1,"form","mt-3",3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-8"],["for","name"],[1,"input-group"],["type","text","id","q","formControlName","q",1,"form-control"],[1,"input-group-text"],["src","https://img.icons8.com/color/24/000000/search--v1.png"],[1,"form-group","col-md-4","d-flex","align-items-end"],[1,"btn","btn-link","btn-clear",3,"click"],["aria-hidden","true",1,"fa","fa-times"],[1,"col","table-bg"],[1,"table","table-hover","table-parameters"],[1,"thead-dark"],["scope","col"],["scope","col",1,"text-center"],[4,"ngIf"],["colspan","7"],[4,"ngFor","ngForOf"],["scope","row",1,"row-name"],["scope","row",1,"row-description"],["scope","row",1,"row-color"],[3,"ngIf"],["scope","row",1,"row-source"],["scope","row",1,"row-label"],["scope","row",1,"row-unit"],["scope","row",1,"text-right"],[1,"btn","btn-light",3,"click"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/18/000000/external-pencil-interface-kiranshastry-lineal-color-kiranshastry-1.png"],[1,"btn","btn-trash","btn-light","ml-2",3,"click"],["src","https://img.icons8.com/color/18/000000/trash--v1.png"],["type","color","title","Color line","disabled","",1,"form-control","form-control-color","color-picker",3,"value"],[1,"text-center"]],template:function(t,e){1&t&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Sb(4,"h3",4),m.Ec(5," Physiological Parameters "),m.Rb(),m.Rb(),m.Sb(6,"div",5),m.Sb(7,"button",6),m.ec("click",(function(){return e.onAddParameter()})),m.Ec(8," + Parameter "),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(9,"div",7),m.Sb(10,"div",8),m.Sb(11,"form",9),m.Sb(12,"div",10),m.Sb(13,"div",11),m.Sb(14,"label",12),m.Ec(15,"Search"),m.Rb(),m.Sb(16,"div",13),m.Ob(17,"input",14),m.Sb(18,"div",15),m.Ob(19,"img",16),m.Rb(),m.Rb(),m.Rb(),m.Sb(20,"div",17),m.Sb(21,"button",18),m.ec("click",(function(){return e.clearSearch()})),m.Ob(22,"i",19),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Sb(23,"div",0),m.Sb(24,"div",2),m.Sb(25,"div",20),m.Sb(26,"table",21),m.Sb(27,"thead",22),m.Sb(28,"tr"),m.Sb(29,"th",23),m.Ec(30," Name "),m.Rb(),m.Sb(31,"th",23),m.Ec(32," Description "),m.Rb(),m.Sb(33,"th",24),m.Ec(34," ColorLine "),m.Rb(),m.Sb(35,"th",24),m.Ec(36," Source Param "),m.Rb(),m.Sb(37,"th",23),m.Ec(38," Label "),m.Rb(),m.Sb(39,"th",23),m.Ec(40," Unit "),m.Rb(),m.Ob(41,"th",24),m.Rb(),m.Rb(),m.Ob(42,"tbody"),m.Cc(43,uo,4,0,"tbody",25),m.Cc(44,Ro,2,1,"tbody",25),m.Cc(45,ko,4,0,"tbody",25),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&t&&(m.zb(11),m.mc("formGroup",e.getFormGroup()),m.zb(32),m.mc("ngIf",e.isLoading()),m.zb(1),m.mc("ngIf",!e.isLoading()&&e.getParameters()),m.zb(1),m.mc("ngIf",!(e.isLoading()||e.getParameters()&&0!==e.getParameters().length)))},directives:[C.y,C.m,C.g,C.b,C.l,C.f,v.l,v.k],styles:["h3[_ngcontent-%COMP%]{font-size:2em;text-align:left}.parameters-header[_ngcontent-%COMP%]{margin-top:3%}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#616161}.table-parameters[_ngcontent-%COMP%], .table-parameters[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border:2px solid #272626}.btn-add[_ngcontent-%COMP%]{background-color:#42336e;border:1px solid #42336e}.btn-add[_ngcontent-%COMP%]:hover{background-color:#fff;color:#42336e}.color-picker[_ngcontent-%COMP%]{width:50px;padding:0;margin-left:22%}.row-description[_ngcontent-%COMP%]{max-width:200px}.row-name[_ngcontent-%COMP%]{max-width:150px}ngb-pagination[_ngcontent-%COMP%]     ul>li:not(.active)>a{background-color:#42336e!important;color:#fff}ngb-pagination[_ngcontent-%COMP%]     ul>li.active>a{background-color:#fff!important;color:#42336e!important}"]}),Oo)}],Io=((Po=function t(){_classCallCheck(this,t)}).\u0275mod=m.Lb({type:Po}),Po.\u0275inj=m.Kb({factory:function(t){return new(t||Po)},imports:[[S.d.forChild(xo)],S.d]}),Po),Eo=n("tRQ3"),zo=n("PCNd"),wo=n("lAuc"),Mo=n("Zck+"),Go=n("MCdb"),No=((_o=function t(){_classCallCheck(this,t)}).\u0275mod=m.Lb({type:_o}),_o.\u0275inj=m.Kb({factory:function(t){return new(t||_o)},providers:[h,d,g,p,s.a,c.a,O.a,Mo.a,yn],imports:[[v.b,Io,C.t,Eo.AuthorizationModule,C.i,k.a.forRoot(),zo.a,x.c,wo.SimulationModule,Go.MonitorModule]]}),_o)}}]);