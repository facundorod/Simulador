(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"FkO/":function(t,e,n){"use strict";function r(t,e,n,r,a,i){return{stroke:{curve:"smooth",width:2},markers:{size:0},xaxis:{type:"numeric",labels:{show:!1},axisTicks:{show:!1},axisBorder:{show:!0},max:e,min:n},chart:{id:"curves",type:i||"line",height:t?130:143,redrawOnParentResize:!0,redrawOnWindowResize:!0,zoom:{enabled:t},toolbar:{show:t}},fill:{type:"solid"},yaxis:{labels:{show:t},show:t,max:r,min:0},dataLabels:{enabled:!1},legend:{show:!1},grid:{show:!1},tooltip:{enabled:t}}}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));class a{constructor(t){this.chartOptions=t}setChart(t,e){this.apexChartOptions={series:[{data:t,color:this.chartOptions.colorLine}],stroke:{curve:"smooth",width:2},markers:{size:0},xaxis:{type:"numeric",labels:{show:!1},axisTicks:{show:!1},max:this.chartOptions.maxX,min:this.chartOptions.minX,axisBorder:{show:!0}},chart:{id:"curves",animations:{enabled:!0,easing:"linear",animateGradually:{enabled:!0},dynamicAnimation:{enabled:!0}},redrawOnParentResize:!0,redrawOnWindowResize:!0,height:this.chartOptions.height,type:e||"line",zoom:{enabled:!1},width:"100%",toolbar:{show:this.chartOptions.toolbar}},fill:{type:"solid"},yaxis:{labels:{show:!1},show:!1,max:this.chartOptions.maxY,min:0},dataLabels:{enabled:!1},legend:{show:!1},grid:{show:!1},tooltip:{enabled:this.chartOptions.toolbar}}}getChart(){return this.apexChartOptions}}},MCdb:function(t,e,n){"use strict";n.r(e),n.d(e,"MonitorModule",(function(){return W}));var r=n("ofXK"),a=n("lAuc"),i=n("Ut+n"),o=n("tyNb"),s=n("oaey"),c=n("kzyy"),l=n("FkO/"),u=n("ZtOR"),h=n("fXoL"),g=n("Zck+");const m=["audio"];function p(t,e){if(1&t&&h.Ob(0,"audio",2,3),2&t){const t=h.gc(2);h.mc("src",t.src,h.xc)}}function f(t,e){if(1&t&&(h.Sb(0,"div"),h.Cc(1,p,2,1,"audio",1),h.Rb()),2&t){const t=h.gc();h.zb(1),h.mc("ngIf",t.play)}}let d=(()=>{class t{constructor(){this.play=!1,this.playRate=1}ngOnChanges(t){const e=document.querySelector("audio");e&&t.playRate&&(e.playbackRate=t.playRate.currentValue)}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Hb({type:t,selectors:[["app-audio"]],viewQuery:function(t,e){var n;1&t&&h.Jc(m,!0),2&t&&h.tc(n=h.fc())&&(e.audio=n.first)},inputs:{src:"src",play:"play",playRate:"playRate"},features:[h.xb],decls:1,vars:1,consts:[[4,"ngIf"],["id","audio","playbackRate","playRate","type","audio/mp3","loop","true","autoplay","true","preload","auto",3,"src",4,"ngIf"],["id","audio","playbackRate","playRate","type","audio/mp3","loop","true","autoplay","true","preload","auto",3,"src"],["audio",""]],template:function(t,e){1&t&&h.Cc(0,f,2,1,"div",0),2&t&&h.mc("ngIf",e.play)},directives:[r.l],styles:[""]}),t})();var b=n("CV0D");const v=["chart"];function C(t,e){if(1&t&&(h.Sb(0,"span",16),h.Ec(1),h.Rb()),2&t){const t=h.gc(2);h.zb(1),h.Gc(" ",t.animalSpecie.name," ")}}function S(t,e){1&t&&(h.Sb(0,"h4",17),h.Ob(1,"img",18),h.Ec(2,"Simulation stopped "),h.Rb())}function x(t,e){1&t&&(h.Sb(0,"h4",17),h.Ob(1,"img",19),h.Ec(2,"Simulation paused"),h.Rb())}function O(t,e){1&t&&(h.Sb(0,"h4",17),h.Ob(1,"img",20),h.Ec(2," \xa0Alarms off"),h.Rb())}function y(t,e){if(1&t){const t=h.Tb();h.Sb(0,"button",21),h.ec("click",(function(){return h.vc(t),h.gc(2).openFullscreen()})),h.Ob(1,"img",22),h.Ec(2," FullScreen"),h.Rb()}}function I(t,e){if(1&t){const t=h.Tb();h.Sb(0,"button",21),h.ec("click",(function(){return h.vc(t),h.gc(2).closeFullscreen()})),h.Ob(1,"img",22),h.Ec(2," Exit FullScreen"),h.Rb()}}function M(t,e){if(1&t&&h.Ob(0,"app-audio",25),2&t){const t=h.gc(3);h.mc("play",!0)("src","/assets/sounds/monitor.mp3")("playRate",t.calculatePlayRate())}}function R(t,e){if(1&t&&h.Ec(0),2&t){const t=h.gc().$implicit;h.Gc(" ",t.curveConfiguration.label.toUpperCase()," ")}}function w(t,e){if(1&t&&h.Ob(0,"apx-chart",31,32),2&t){const t=h.gc().$implicit;h.mc("series",t.chart.series)("stroke",t.chart.stroke)("xaxis",t.chart.xaxis)("yaxis",t.chart.yaxis)("markers",t.chart.markers)("dataLabels",t.chart.dataLabels)("chart",t.chart.chart)("grid",t.chart.grid)("tooltip",t.chart.tooltip)("autoUpdateSeries",!0)("legend",t.chart.legend)("fill",t.chart.fill)}}const P=function(t,e){return{"curve-label curve-label-left":t,"no-curves-label":e}},z=function(t,e){return{curves:t,"no-curves":e}};function k(t,e){if(1&t&&(h.Sb(0,"div",23),h.Sb(1,"div",28),h.Sb(2,"p",29),h.Cc(3,R,1,1,"ng-template",10),h.Rb(),h.Rb(),h.Sb(4,"div",30),h.Cc(5,w,2,12,"ng-template",10),h.Rb(),h.Rb()),2&t){const t=e.$implicit;h.zb(1),h.mc("ngClass",h.rc(4,P,t.chart&&t.chart.series,!t.chart||!t.chart.series)),h.zb(2),h.mc("ngIf",t.chart&&t.chart.series),h.zb(1),h.mc("ngClass",h.rc(7,z,t.chart&&t.chart.series,!t.chart||!t.chart.series)),h.zb(1),h.mc("ngIf",t.chart&&t.chart.series)}}function T(t,e){if(1&t&&(h.Sb(0,"p",41),h.Ec(1),h.Rb()),2&t){const t=h.gc(2).$implicit,e=h.gc(3);h.Bc("color",e.getColor(t)),h.zb(1),h.Gc(" ",e.getSourceRateValue(t)," ")}}function A(t,e){if(1&t&&(h.Sb(0,"p",41),h.Ec(1," -- "),h.Rb()),2&t){const t=h.gc(2).$implicit,e=h.gc(3);h.Bc("color",e.getColor(t))}}function E(t,e){if(1&t&&h.Ec(0),2&t){const t=h.gc(4).index,e=h.gc(3);h.Gc(" ",e.getMinValue(t)," ")}}function V(t,e){1&t&&h.Ec(0," -- ")}function _(t,e){if(1&t&&(h.Ec(0),h.Cc(1,E,1,1,"ng-template",10),h.Cc(2,V,1,0,"ng-template",10)),2&t){const t=h.gc(3).index,e=h.gc(3);h.Gc(" ",e.getMaxValue(t)," / "),h.zb(1),h.mc("ngIf",e.getMinValue(t)),h.zb(1),h.mc("ngIf",!e.getMinValue(t))}}function D(t,e){1&t&&h.Ec(0," -- / -- ")}function U(t,e){1&t&&h.Ec(0," -- ")}function B(t,e){if(1&t&&h.Ec(0),2&t){const t=h.gc(3).index,e=h.gc(3);h.Gc(" ",e.getMeanValue(t)," ")}}function F(t,e){if(1&t&&(h.Sb(0,"p",42),h.Cc(1,_,3,3,"ng-template",10),h.Cc(2,D,1,0,"ng-template",10),h.Ob(3,"br"),h.Cc(4,U,1,0,"ng-template",10),h.Cc(5,B,1,1,"ng-template",10),h.Rb()),2&t){const t=h.gc(2),e=t.$implicit,n=t.index,r=h.gc(3);h.Bc("color",r.getColor(e)),h.zb(1),h.mc("ngIf",r.getMaxValue(n)&&"stop"!==(null==r.currentState?null:r.currentState.action)),h.zb(1),h.mc("ngIf",!r.getMaxValue(n)||"stop"==(null==r.currentState?null:r.currentState.action)),h.zb(2),h.mc("ngIf",!r.getMeanValue(n)||"stop"==(null==r.currentState?null:r.currentState.action)),h.zb(1),h.mc("ngIf",r.getMeanValue(n)&&"stop"!==(null==r.currentState?null:r.currentState.action))}}const L=function(t){return{"alert-enabled":t}};function H(t,e){if(1&t&&(h.Sb(0,"div",35),h.Sb(1,"div",23),h.Ob(2,"div",36),h.Sb(3,"div",37),h.Cc(4,T,2,3,"p",38),h.Cc(5,A,2,2,"p",38),h.Cc(6,F,6,6,"p",39),h.Rb(),h.Sb(7,"div",40),h.Sb(8,"p"),h.Ec(9),h.Rb(),h.Sb(10,"p"),h.Ec(11),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&t){const t=h.gc(),e=t.index,n=t.$implicit,r=h.gc(3);h.mc("ngClass",h.qc(10,L,r.getAlerts()[e])),h.zb(4),h.mc("ngIf",!r.showMinAndMax(n)&&"stop"!==(null==r.currentState?null:r.currentState.action)),h.zb(1),h.mc("ngIf",!r.showMinAndMax(n)&&"stop"==(null==r.currentState?null:r.currentState.action)),h.zb(1),h.mc("ngIf",r.showMinAndMax(n)),h.zb(2),h.Bc("color",r.getColor(n)),h.zb(1),h.Gc(" ",null==n.curveConfiguration?null:n.curveConfiguration.label,""),h.zb(1),h.Bc("color",r.getColor(n)),h.zb(1),h.Gc(" ",null==n.curveConfiguration?null:n.curveConfiguration.unit,"")}}function G(t,e){if(1&t&&(h.Sb(0,"div",43),h.Sb(1,"p",29),h.Ec(2),h.Rb(),h.Rb()),2&t){const t=h.gc(),e=t.index,n=t.$implicit,r=h.gc(3);h.mc("ngClass",h.qc(4,L,r.getAlerts()[e])),h.zb(1),h.Bc("color",r.getColor(n)),h.zb(1),h.Gc(" ",null==n.curveConfiguration?null:n.curveConfiguration.label," ")}}function N(t,e){if(1&t&&(h.Sb(0,"div",23),h.Cc(1,H,12,12,"div",33),h.Cc(2,G,3,6,"div",34),h.Rb()),2&t){const t=e.$implicit;h.zb(1),h.mc("ngIf","CAR"!=(null==t.curveConfiguration?null:t.curveConfiguration.label.toUpperCase())&&"RESP"!=(null==t.curveConfiguration?null:t.curveConfiguration.label.toUpperCase())),h.zb(1),h.mc("ngIf","CAR"!=(null==t.curveConfiguration?null:t.curveConfiguration.label.toUpperCase())&&"RESP"!=(null==t.curveConfiguration?null:t.curveConfiguration.label.toUpperCase()))}}function X(t,e){if(1&t&&(h.Sb(0,"div",23),h.Cc(1,M,1,3,"app-audio",24),h.Ob(2,"app-audio",25),h.Sb(3,"div",4),h.Sb(4,"div",23),h.Sb(5,"div",26),h.Cc(6,k,6,10,"div",27),h.Rb(),h.Sb(7,"div",11),h.Cc(8,N,3,2,"div",27),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&t){const t=h.gc(2);h.zb(1),h.mc("ngIf","stop"!==(null==t.currentState?null:t.currentState.action)),h.zb(1),h.mc("play",t.enableSoundAlarm)("src","/assets/sounds/alarmLimit.mp3")("playRate",1),h.zb(4),h.mc("ngForOf",t.curvesAndParams),h.zb(2),h.mc("ngForOf",t.curvesAndParams)}}function Y(t,e){if(1&t&&(h.Sb(0,"div",4),h.Sb(1,"div",5),h.Sb(2,"div",6),h.Sb(3,"p",7),h.Ec(4),h.hc(5,"date"),h.Cc(6,C,2,1,"span",8),h.Rb(),h.Rb(),h.Sb(7,"div",9),h.Cc(8,S,3,0,"ng-template",10),h.Cc(9,x,3,0,"ng-template",10),h.Cc(10,O,3,0,"ng-template",10),h.Rb(),h.Sb(11,"div",11),h.Sb(12,"div",5),h.Ob(13,"div",12),h.Sb(14,"div",13),h.Cc(15,y,3,0,"button",14),h.Cc(16,I,3,0,"button",14),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Cc(17,X,9,6,"div",15),h.Rb()),2&t){const t=h.gc(),e=h.uc(4);h.zb(4),h.Gc(" ",h.jc(5,9,t.today,"medium")," "),h.zb(2),h.mc("ngIf",t.animalSpecie),h.zb(2),h.mc("ngIf","stop"===(null==t.currentState?null:t.currentState.action)),h.zb(1),h.mc("ngIf","pause"===(null==t.currentState?null:t.currentState.action)),h.zb(1),h.mc("ngIf",t.currentState.muteAlarms&&"stop"!==(null==t.currentState?null:t.currentState.action)),h.zb(5),h.mc("ngIf",!t.isFullScren()),h.zb(1),h.mc("ngIf",t.isFullScren()),h.zb(1),h.mc("ngIf",t.existDataset())("ngIfElse",e)}}function $(t,e){1&t&&(h.Sb(0,"div",44),h.Ob(1,"div",45),h.Sb(2,"div",46),h.Sb(3,"h3",17),h.Ec(4,"Waiting for simulation"),h.Rb(),h.Rb(),h.Rb())}function q(t,e){1&t&&(h.Sb(0,"div",44),h.Sb(1,"p"),h.Ec(2,"NO SIMULATION "),h.Rb(),h.Rb())}const J=[{path:"",component:(()=>{class t extends s.a{constructor(t){super(),this.monitorService=t,this.today=new Date,this.maxSize=51,this.currentIndex=0,this.curvesAndParams=[],this.curvesHelper=new u.a,this.enableAlerts=[],this.monitorConfiguration=new c.a,this.trackByFn=(t,e)=>e.curveConfiguration.id_pp,this.enableSoundAlarm=!1,this.tooltipPause={enabled:!0},this.noDataset=!1,this.initVariables()}ngOnInit(){this.checkLocalStorage()}ngOnDestroy(){clearInterval(this.simulationTimer)}openFullscreen(){document.fullscreenElement||document.documentElement.requestFullscreen()}closeFullscreen(){document.fullscreenElement&&document.exitFullscreen()}isFullScren(){return null!=document.fullscreenElement}checkLocalStorage(){this.monitorService.getInfo().subscribe(t=>{t?(this.updateParameterInfo(),this.updateCurves(t)):this.initVariables()},t=>{console.log(t)},()=>{console.log("Simulation finished!")})}updateParameterInfo(){this.parameterInfo=JSON.parse(localStorage.getItem("parameterState"))}initVariables(){this.currentState=null,this.animalSpecie=null,this.enableAlerts=[],this.firstSimulationHeart=!0,this.firstSimulationBreath=!0,this.curvesAndParams=[],this.chartsOptions=[],this.currentIndex=0,this.maxSize=51,this.breathTimer=0,this.heartTimer=0,clearInterval(this.simulationTimer)}updateCurves(t){this.noDataset=!1,this.currentState=t,this.animalSpecie=t.animalSpecie,this.initCharts(t.newScenario),clearInterval(this.simulationTimer),"pause"!=t.action&&this.simulateCurves(),this.noDataset||this.showToolbar()}initCharts(t=!1){var e;let n=0==(null===(e=this.chartsOptions)||void 0===e?void 0:e.length),r=0;t&&(this.chartsOptions=[],this.firstSimulationHeart=!0,this.firstSimulationBreath=!0,this.chartsOptions=[],this.breathTimer=0,this.heartTimer=0,clearInterval(this.simulationTimer)),this.currentState.curves.forEach((e,a)=>{const i=this.enableAlerts[a];if(0==e.curveValues.length&&(r+=1),(n||t)&&this.createDynamicChart(e),null==i){const t=this.enableAlert(e.curveConfiguration)&&"stop"!==this.currentState.action;this.enableAlerts.push(t)}else this.enableAlerts[a]=this.enableAlert(e.curveConfiguration)&&"stop"!==this.currentState.action;this.enableSoundAlarm=this.enableAlerts.includes(!0)&&!this.currentState.muteAlarms&&"stop"!==this.currentState.action}),r==this.currentState.curves.length&&(this.noDataset=!0,this.initVariables())}createDynamicChart(t){if(t.curveValues.length>0){const e=this.curvesHelper.getMaxY(t.curveValues)+1,n=this.curvesHelper.getMinY(t.curveValues)-1,r=new l.a({colorLine:t.curveConfiguration.colorLine,height:143,minX:0,maxX:this.monitorConfiguration.getMonitorConfiguration().maxSamples,minY:n,maxY:"CO2"==t.curveConfiguration.label.toUpperCase()||"ETCO2"==t.curveConfiguration.label.toUpperCase()?2*e:e,toolbar:!1});let a=null;"ETCO2"!=t.curveConfiguration.label.toUpperCase()&&"CO2"!=t.curveConfiguration.label.toUpperCase()||"stop"===this.currentState.action||(a="area"),r.setChart([],a),this.chartsOptions.push(r.getChart()),this.curvesAndParams.push({chart:r.getChart(),curveConfiguration:t.curveConfiguration})}else this.curvesAndParams.push({curveConfiguration:t.curveConfiguration})}simulateCurves(){this.currentState&&!this.noDataset&&(this.simulationTimer=setInterval(()=>{this.updateHeartTimer(),this.updateBreathTimer(),this.updateCurrentIndex(),this.currentState.curves.forEach((t,e)=>{t.curveValues.length>0&&this.simulateCurve(t,e)}),this.updateCharts(),this.heartTimer+=this.monitorConfiguration.getMonitorConfiguration().freqHeart/1e3,this.breathTimer+=this.monitorConfiguration.getMonitorConfiguration().freqBreath/1e3,this.currentIndex+=1,this.today=new Date},this.monitorConfiguration.getMonitorConfiguration().clockTimer))}simulateCurve(t,e){var n,r,a,i;if((this.firstSimulationHeart&&!this.isBreathCurve(e)||this.firstSimulationBreath&&this.isBreathCurve(e))&&t.curveValues.length>0)this.updateDataset(e,t.curveValues);else if(t.curveValues.length>0&&(null===(r=null===(n=this.curvesAndParams[e])||void 0===n?void 0:n.chart)||void 0===r?void 0:r.series)){const t=null===(i=null===(a=this.curvesAndParams[e])||void 0===a?void 0:a.chart)||void 0===i?void 0:i.series.slice();this.updateDatasetSimulation(t,e)}}updateCurrentIndex(){this.currentIndex>=this.maxSize&&(this.currentIndex=0)}getAlerts(){return this.enableAlerts}updateDataset(t,e){var n,r,a;const i=null===(a=null===(r=null===(n=this.curvesAndParams[t])||void 0===n?void 0:n.chart)||void 0===r?void 0:r.series)||void 0===a?void 0:a.slice();if(i){let n=this.isBreathCurve(t);if("stop"==this.currentState.action){const e=this.charts.toArray()[t];i[0].data.push([n?this.breathTimer:this.heartTimer,e.yaxis.max/2])}else i[0].data.push([n?this.breathTimer:this.heartTimer,e[this.currentIndex][1]])}}updateDatasetSimulation(t,e){let n=t[0].data,r=this.isBreathCurve(e),a=t[1].data;if("stop"==this.currentState.action){const t=this.charts.toArray()[e];a.push([r?this.breathTimer:this.heartTimer,(t.yaxis.max+t.yaxis.min)/2])}else a.push([r?this.breathTimer:this.heartTimer,this.currentState.curves[e].curveValues[this.currentIndex][1]]);this.deleteOldPoints(n,r?this.breathTimer:this.heartTimer),t[0].data=n,t[1].data=a}isBreathCurve(t){var e,n,r;return"RESP"==(null===(r=null===(n=null===(e=this.currentState.curves[t].curveConfiguration)||void 0===e?void 0:e.source)||void 0===n?void 0:n.label)||void 0===r?void 0:r.toUpperCase())}updateHeartTimer(){this.firstSimulationHeart?this.heartTimer>=this.monitorConfiguration.getMonitorConfiguration().maxSamples&&(this.heartTimer=0,this.firstSimulationHeart=!1,this.createSimulationDataset()):this.heartTimer>=this.monitorConfiguration.getMonitorConfiguration().maxSamples&&(this.heartTimer=0,this.swapCurves())}updateBreathTimer(){this.firstSimulationBreath?this.breathTimer>=this.monitorConfiguration.getMonitorConfiguration().maxSamples&&(this.breathTimer=0,this.firstSimulationBreath=!1,this.createSimulationDataset(!0)):this.breathTimer>=this.monitorConfiguration.getMonitorConfiguration().maxSamples&&(this.breathTimer=0,this.swapCurves(!0))}updateCharts(){this.charts.toArray().forEach(t=>{t.updateSeries(t.series,!1)})}updateChart(t,e,n=!0){const r=this.charts.toArray()[e];r&&r.updateSeries(t,!1)}getColor(t){var e;return(null==t?void 0:t.curveConfiguration)&&(null===(e=t.curveConfiguration)||void 0===e?void 0:e.colorLine)?t.curveConfiguration.colorLine:null}getSourceRateValue(t){if((null==t?void 0:t.curveConfiguration)&&t.curveConfiguration.source)switch(t.curveConfiguration.source.label.toUpperCase()){case"CAR":return this.parameterInfo.heartRate;case"RESP":return this.parameterInfo.breathRate;case"SPO2":return this.parameterInfo.spO2}else switch(t.curveConfiguration.label.toUpperCase()){case"TEMP":return this.parameterInfo.temperature;default:return t.curveConfiguration.refValue}return-1}getParameterInfo(){return this.parameterInfo}enableAlert(t){var e,n,r;return"CAR"===(null===(e=t.source)||void 0===e?void 0:e.label.toUpperCase())&&(t.alert_high<=this.parameterInfo.heartRate||t.alert_low>=this.parameterInfo.heartRate)||"RESP"===(null===(n=t.source)||void 0===n?void 0:n.label.toUpperCase())&&(t.alert_high<=this.parameterInfo.breathRate||t.alert_low>=this.parameterInfo.breathRate)||"SPO2"===(null===(r=t.source)||void 0===r?void 0:r.label.toUpperCase())&&(t.alert_high<=this.parameterInfo.spO2||t.alert_low>=this.parameterInfo.spO2)}deleteOldPoints(t,e){let n=0;for(;n<t.length&&t[n][0]<=e;)t.splice(n,1),n++}swapCurves(t=!1){for(let e=0;e<this.currentState.curves.length;e++)if(this.currentState.curves[e].curveValues.length>0&&this.hasToChangeDataset(e,t)){const t=this.chartsOptions[e].series;t[0].data=t[1].data,t[1].data=[],this.updateChart(t,e,!1)}}createSimulationDataset(t=!1){var e;for(let n=0;n<this.currentState.curves.length;n++)if(this.hasToChangeDataset(n,t)){const t=null===(e=this.chartsOptions[n])||void 0===e?void 0:e.series;t&&t.push({data:[],color:t[0].color})}}hasToChangeDataset(t,e){var n,r,a,i,o,s;return e&&"RESP"==(null===(a=null===(r=null===(n=this.currentState.curves[t].curveConfiguration)||void 0===n?void 0:n.source)||void 0===r?void 0:r.label)||void 0===a?void 0:a.toUpperCase())||!e&&"RESP"!=(null===(s=null===(o=null===(i=this.currentState.curves[t].curveConfiguration)||void 0===i?void 0:i.source)||void 0===o?void 0:o.label)||void 0===s?void 0:s.toUpperCase())}showToolbar(){var t;const e=this.charts.toArray();for(let n=0;n<e.length;n++){const r=e[n];if(null===(t=this.currentState.curves[n])||void 0===t?void 0:t.curveConfiguration){const t=this.currentState.curves[n].curveConfiguration,a=Object(l.b)("pause"==this.currentState.action,r.xaxis.max,r.xaxis.min,"IBP"==t.label.toUpperCase()?250:r.yaxis.max,r.yaxis.min,"stop"===this.currentState.action||"ETCO2"!=t.label.toUpperCase()&&"CO2"!=t.label.toUpperCase()?r.chart.type:"area");"stop"!==this.currentState.action&&e[n].updateOptions(a)}}}calculatePlayRate(){return this.parameterInfo.heartRate/1e3}existDataset(){return!this.noDataset}showMinAndMax(t){return"CO2"===t.curveConfiguration.label.toUpperCase()||"IBP"===t.curveConfiguration.label.toUpperCase()||"NIBP"===t.curveConfiguration.label.toUpperCase()}getMinValue(t){const e=this.currentState.curves[t];return e&&e.curveValues&&e.curveValues.length>0?Math.round(e.curveValues[0][1]):null}getMaxValue(t){const e=this.currentState.curves[t];return e&&e.curveValues&&e.curveValues.length>0?Math.round(this.curvesHelper.getMaxY(e.curveValues)):null}getMeanValue(t){const e=this.getMaxValue(t),n=this.getMinValue(t);return e?Math.round((2*n+e)/3):null}}return t.\u0275fac=function(e){return new(e||t)(h.Nb(g.a))},t.\u0275cmp=h.Hb({type:t,selectors:[["app-monitor"]],viewQuery:function(t,e){var n;1&t&&h.Jc(v,!0),2&t&&h.tc(n=h.fc())&&(e.charts=n)},features:[h.wb],decls:5,vars:2,consts:[["class","container-fluid",4,"ngIf","ngIfElse"],["class","mt-4 no-simulation"],["noSimulation",""],["noDataset",""],[1,"container-fluid"],[1,"row","justify-content-between"],[1,"col-4"],[1,"text-left"],["class","text-animal-specie",4,"ngIf"],[1,"col-4","alarms-off"],[3,"ngIf"],[1,"col-3"],[1,"col-5"],[1,"col-7"],["class","btn btn-link",3,"click",4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],[1,"text-animal-specie"],[1,"text-center"],["src","https://img.icons8.com/fluency/24/000000/stop.png",1,"img-status"],["src","https://img.icons8.com/fluency/24/000000/pause.png","title","Freeze simulation",1,"img-status"],["src","https://img.icons8.com/external-kiranshastry-lineal-color-kiranshastry/30/000000/external-mute-multimedia-kiranshastry-lineal-color-kiranshastry.png"],[1,"btn","btn-link",3,"click"],["src","https://img.icons8.com/office/20/000000/fit-to-width.png"],[1,"row"],[3,"play","src","playRate",4,"ngIf"],[3,"play","src","playRate"],[1,"container-fluid","col-9"],["class","row",4,"ngFor","ngForOf"],[1,"col-xs-1","curve-label-left-col",3,"ngClass"],[1,"text-label"],[1,"col-11",3,"ngClass"],[3,"series","stroke","xaxis","yaxis","markers","dataLabels","chart","grid","tooltip","autoUpdateSeries","legend","fill"],["chart",""],["class","col-11 curve-configuration",3,"ngClass",4,"ngIf"],["class","col-xs-1 curve-label",3,"ngClass",4,"ngIf"],[1,"col-11","curve-configuration",3,"ngClass"],[1,"col-2"],[1,"col-6"],["class","text-rate",3,"color",4,"ngIf"],["class","min-max-value",3,"color",4,"ngIf"],[1,"col-4","parameter-box-var"],[1,"text-rate"],[1,"min-max-value"],[1,"col-xs-1","curve-label",3,"ngClass"],[1,"container","row","no-simulation"],["role","status",1,"spinner-border","text-danger"],[1,"ml-4"]],template:function(t,e){if(1&t&&(h.Cc(0,Y,18,12,"div",0),h.Cc(1,$,5,0,"ng-template",1,2,h.Dc),h.Cc(3,q,3,0,"ng-template",1,3,h.Dc)),2&t){const t=h.uc(2);h.mc("ngIf",(null==e.currentState?null:e.currentState.curves.length)>0)("ngIfElse",t)}},directives:[r.l,d,r.k,r.j,b.a],pipes:[r.d],styles:[".text-animal-specie[_ngcontent-%COMP%]{margin-left:20px}.no-simulation[_ngcontent-%COMP%]{height:100%}.icon-pause[_ngcontent-%COMP%], .icon-stopped[_ngcontent-%COMP%]{color:#fff;margin-right:2%}.curve-configuration[_ngcontent-%COMP%]{min-width:250px;-webkit-animation:none;animation:none;margin-left:0}.curve-configuration[_ngcontent-%COMP%], .curve-label[_ngcontent-%COMP%]{border:2px solid #fff;border-radius:10px;max-height:14vh}.curve-label[_ngcontent-%COMP%]{max-width:20px}.text-label[_ngcontent-%COMP%]{writing-mode:vertical-rl;padding:10px 0 25px;font-size:16px;margin-left:-4px}.no-curves[_ngcontent-%COMP%], .no-curves-label[_ngcontent-%COMP%]{display:hidden;max-height:0}.no-curves-label[_ngcontent-%COMP%]{padding-left:0;margin-left:0}.curve-label-left[_ngcontent-%COMP%]{border:none!important;max-width:15px;padding-top:5%;max-height:50px;padding-left:.5%}.label-left[_ngcontent-%COMP%]{letter-spacing:4px}.text-rate[_ngcontent-%COMP%]{font-size:3rem}.container-configuration[_ngcontent-%COMP%]{width:15%}.parameter-box-var[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:.1em}.parameter-box-var[_ngcontent-%COMP%]{padding-top:.7rem}.alert-enabled[_ngcontent-%COMP%]{-webkit-animation:pulse 3s infinite;animation:pulse 3s infinite;font-weight:700}@-webkit-keyframes pulse{0%{background-color:#8b2e3e}to{background-color:#d81812}}@keyframes pulse{0%{background-color:#8b2e3e}to{background-color:#d81812}}h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{color:#fff;-webkit-user-select:none;-moz-user-select:none;user-select:none}.img-status[_ngcontent-%COMP%]{margin-right:2%}.curves[_ngcontent-%COMP%]{width:100%;min-height:20vh;max-height:20vh;margin-right:0}.min-max-value[_ngcontent-%COMP%]{font-size:1.7rem}@media (display-mode:fullscreen){.curves[_ngcontent-%COMP%]{max-height:20vh;margin:0;padding:0}.no-curves[_ngcontent-%COMP%], .no-curves-label[_ngcontent-%COMP%]{display:hidden;max-height:0}.curve-label[_ngcontent-%COMP%]{min-height:13vh}.curve-label-left[_ngcontent-%COMP%]{min-height:20vh}.curve-configuration[_ngcontent-%COMP%]{min-height:14vh}}@media (max-width:1920px){.curves[_ngcontent-%COMP%]{min-width:910px;min-height:18vh;max-height:18vh;margin-right:0}}.btn-link[_ngcontent-%COMP%]{padding:0;margin:0}"]}),t})()}];let j=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},providers:[i.a],imports:[[o.d.forChild(J)],o.d]}),t})();var Z=n("3Pt+"),K=n("PCNd");let W=(()=>{class t{}return t.\u0275mod=h.Lb({type:t}),t.\u0275inj=h.Kb({factory:function(e){return new(e||t)},providers:[i.a,g.a],imports:[[r.b,a.SimulationModule,j,Z.i,K.a,Z.t,b.b]]}),t})()},"Zck+":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("XNiG"),a=n("fXoL");let i=(()=>{class t{constructor(){this.values=new r.a,setInterval(()=>{const t=JSON.parse(localStorage.getItem("simulationState"));this.currentState&&!this.isDiff(t)||(this.currentState=t,this.values.next(this.currentState))},1e3)}getInfo(){return this.values.asObservable()}isDiff(t){return!t&&null!=this.currentState||t.state!==this.currentState.state||t.action!==this.currentState.action||t.muteAlarms!==this.currentState.muteAlarms}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=a.Jb({token:t,factory:t.\u0275fac}),t})()},ZtOR:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){}editX(t,e=null){return e||(e=Math.floor(10*Math.random())),t.forEach(t=>{t[0]&&(t[0]=t[0]+e)}),t}editY(t,e=null){return e||(e=Math.floor(10*Math.random())),t.forEach(t=>{t[1]&&(t[1]=t[1]+e)}),t}getMaxY(t){let e=t[0][1];for(let n of t)n[1]>e&&(e=n[1]);return e}getMinY(t){let e=t[0][1];for(let n of t)n[1]<e&&(e=n[1]);return e}linealInterpolation(t,e,n,r,a){return(a-r)/(e-t)*(n-t)+r}lagrangeInterpolation(t,e){let n=0;for(let r=0;r<t.length;r++)n+=t[r][1]*this.lagrangeFunction(t,e,r);return n}lagrangeFunction(t,e,n){let r=1,a=1;for(let i=0;i<t.length-1;i++)n!=i&&(r*=e-t[i][0],a*=t[n][0]-t[i][0]);return r/a}getClosestIndex(t,e){for(let n=0;n<t.length;n++)if(t[n][0]>e)return 0!=n?{lessValue:t[n-1],greaterValue:t[n]}:{lessValue:t[n],greaterValue:t[n+1]};return{lessValue:t[t.length-1],greaterValue:t[t.length-2]}}calculateRate(t,e){const n=60/t;return n?e/1e3*n:-1}}},kzyy:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){this.monitorConfiguration={clockTimer:10,freqHeart:20,freqBreath:15,maxSamples:5};const t=JSON.parse(localStorage.getItem("monitor"));t&&(this.monitorConfiguration=t)}setMonitorConfiguration(t){this.monitorConfiguration=t}getMonitorConfiguration(){return this.monitorConfiguration}}}}]);