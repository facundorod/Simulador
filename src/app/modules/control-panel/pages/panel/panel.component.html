<!-- <div class="spinner-border text-primary" role="status" *ngIf="isLoading()">
    <span class="sr-only">Loading...</span>
</div> -->


<div class="panel-header">
    <div class="visualizationHeader">
        <h3 class="textSimulation"><em>Visualization Area and Simulation Edition</em></h3>
        <button type="submit" *ngIf="formGroup.valid" class="btn btn-primary col-md-3 saveChanges"
            (click)="onSaveChanges()">Save
            changes</button>
        <button type="submit" *ngIf="!formGroup.valid" class="btn btn-primary col-md-3 saveChanges"
            (click)="onSaveChanges()" disabled>Save
            changes</button>
        <!-- <p class="textScenario"><em>Visualization Area and Scenario Edition</em></p> -->
    </div>

</div>

<div class="container">


    <form [formGroup]="formGroup">
        <!-- Start Row 1-->
        <div class="row">


            <div class="col-md-3">
                <label for="simulationName" class="form-label">Simulation Name</label>
                <input class="form-control" formControlName="simulationName">
                <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'simulationName'">
                </app-message>
            </div>

            <div class="col-md-3">
                <label for="animalSpecies" class="form-label">Animal Specie</label>
                <select class="form-select form-control" id="animalSpecie" formControlName="animalSpecie">
                    <option value="">Choose Animal Specie</option>
                    <ng-template [ngIf]="animalSpecies.length > 0">

                        <option *ngIf="formGroup.value.animalSpecie?.name" [ngValue]="formGroup.value.animalSpecie">
                            {{formGroup.value.animalSpecie.name}}</option>
                        <ng-template ngFor let-animalS [ngForOf]="animalSpecies">
                            <option
                                *ngIf="formGroup.value.animalSpecie && animalS.name !== formGroup.value.animalSpecie.name"
                                [ngValue]="animalS">
                                {{ animalS.name }}
                            </option>
                        </ng-template>

                    </ng-template>
                </select>

                <app-message *ngIf="isSubmitForm() " [errors]="getErrors()" [key]="'animalSpecie'"></app-message>
            </div>

            <div class="col-md-6">
                <label class="form-label">Simulation description</label>
                <textarea class="form-control" rows="4" formControlName="simulationDescription"></textarea>
            </div>
        </div>



        <!-- End Row 1 -->

        <!-- Start Row 2 -->
        <div class="row mt-4">
            <div class="col-md-12">
                <app-scenarios [scenariosSelected]="scenariosSimulation" (posScenarios)="getPosScenarios($event)"
                    (returnScenarios)="getScenarios($event)">
                </app-scenarios>

            </div>
            <!-- Scenarios -->
        </div>


        <!-- Curves -->
        <!-- <button class="btn btn-primary" (click)="onLoadCurves()">
            Load Curves
        </button> -->

        <div class="mt-4 progress">
            <div class="progress-bar bg-info" role="progressbar" style="width: 100%" aria-valuenow="50" aria-valuemin="0"
                aria-valuemax="100"></div>
        </div>
        <div class="mt-4 form-row ml-5">
            <div class="form-group col-md-4">
                <label class="col-md-6 control-label">Cardiac Frequency</label>
                <div class="col-md-6">
                    <input class="form-control" formControlName="cardiacFrequency" >
                </div>
            </div>

            <div class="form-group col-md-5">
                <label class="col-md-6 control-label">Respiration Frequency</label>
                <div class="col-md-6">
                    <input class="form-control" formControlName="respFrequency">
                </div>
            </div>

            <div class="form-group col-md-3">
                <label class="col-md-6 control-label">Temperature</label>
                <div class="col-md-6">
                    <input class="form-control" formControlName="temperature">
                </div>
            </div>

        </div>

        <!-- Curve 1-->

        <div class="mt-4" *ngIf="curves && curves.length > 0">
            <div class="row" *ngIf="nibpCurve && nibpCurve[0].length > 0">
                <div class="col-md-3" style="border: 2px solid red">
                    <h4> ECG Configuration</h4>


                    <div class="container mt-3">
                        <div class="row">
                            <label class="form-label mr-4"> Altitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>

                        <div class="row mt-3">
                            <label class="form-label mr-2"> Amplitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>


                        <div class="row mt-3" *ngIf="nibpConfiguration">
                            <p class="col-md-12"> Label: {{nibpConfiguration.label}}</p>
                            <p class="col-md-12"> Unit: {{nibpConfiguration.unit }}</p>
                        </div>
                        <div class="container row mt-3">
                            <button class="btn btn-primary" (click)="onAddNoiseNIBP()">Add Gaussean Noise</button>

                        </div>

                    </div>
                </div>
                <div class="col-md-9" style="border: 2px solid red">
                    <app-curves [colorLine]="'#718E70'" [series]="nibpCurve" [minX]="-40" [maxX]="40" [minY]="-100"
                        [maxY]="100" class="curves"></app-curves>
                </div>


            </div>
            <div class="row mt-4" *ngIf="capnographyCurve[1] && capnographyCurve[1].length > 0">

                <div class="col-md-3" style="border: 2px solid red">
                    <h4> ETCO2 Configuration </h4>

                    <div class="container mt-3">
                        <div class="row">
                            <label class="form-label mr-4"> Altitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>

                        <div class="row mt-3">
                            <label class="form-label mr-2"> Amplitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>
                        <div class="row mt-3" *ngIf="capnographyConfiguration">

                            <p class="col-md-12">Label: {{capnographyConfiguration.label}}</p>
                            <p class="col-md-12">Unit: {{capnographyConfiguration.unit }}</p>
                        </div>
                        <div class="container row mt-3">
                            <button class="btn btn-primary" (click)="onAddNoiseNIBP()">Add Gaussean Noise</button>

                        </div>

                    </div>


                </div>

                <div class="col-md-9" style="border: 2px solid red">
                    <app-curves [colorLine]="'#6EC1ED'" [series]="capnographyCurve" [minX]="0" [maxX]="1"
                        [minY]="-2.53164556962025" [maxY]="36.0759493670886" class="curves"></app-curves>
                </div>
            </div>

            <div class="row mt-4" *ngIf="ecgCurve[1] && ecgCurve[1].length > 0">
                <div class="col-md-3" style="border: 2px solid red">
                    <h4> ART1 Configuration </h4>

                    <div class="container mt-3">
                        <div class="row">
                            <label class="form-label mr-4"> Altitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>

                        <div class="row mt-3">
                            <label class="form-label mr-2"> Amplitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>

                        <div class="row mt-3" *ngIf="ecgCurveConfiguration">

                            <p class="col-md-12">Label: {{ecgCurveConfiguration.label}}</p>
                            <p class="col-md-12">Unit: {{ecgCurveConfiguration.unit }}</p>
                        </div>

                        <div class="container row mt-3">
                            <button class="btn btn-primary" (click)="onAddNoiseNIBP()">Add Gaussean Noise</button>

                        </div>

                    </div>


                </div>
                <div class="col-md-9" style="border: 2px solid red">
                    <app-curves [colorLine]="'#4D4260'" [series]="ecgCurve" [minX]="-80" [maxX]="80" [minY]="-200"
                        [maxY]="300">
                    </app-curves>
                </div>
            </div>


            <div class="row mt-4" *ngIf="plethCurve[1] && plethCurve[1].length > 0">
                <div class="col-md-3" style="border: 2px solid red">
                    <h4> SPO2 Configuration </h4>

                    <div class="container mt-3">
                        <div class="row">
                            <label class="form-label mr-4"> Altitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>

                        <div class="row mt-3">
                            <label class="form-label mr-2"> Amplitude </label>
                            <input type="number" class="form-control col-md-3">
                        </div>

                        <div class="row mt-3" *ngIf="plethConfiguration">
                            <p class="col-md-12">Label: {{plethConfiguration.label}}</p>
                            <p class="col-md-12">Unit: {{plethConfiguration.unit }}</p>

                        </div>
                        <div class="container row mt-3">
                            <button class="btn btn-primary" (click)="onAddNoiseNIBP()">Add Gaussean Noise</button>

                        </div>

                    </div>
                </div>

                <div class="col-md-9" style="border: 2px solid red">
                    <app-curves [colorLine]="'#B9957B'" [series]="plethCurve" [minX]="0" [maxX]="0.997823721436344"
                        [minY]="34.4829219764082" [maxY]="84.9282296650718"></app-curves>
                </div>
            </div>



        </div>

        <!-- </div> -->



    </form>


</div>




<footer class="footer">
    <div class="container footerBtn" style="border: 2px solid blue;">
        <button class="btn"> <i class="fas fa-play" style="color: white"></i></button>
        <button class="btn"> <i class="fas fa-pause" style="color: white"></i></button>
        <button class="btn"> <i class="fas fa-stop" style="color: white"></i></button>
    </div>
</footer>
