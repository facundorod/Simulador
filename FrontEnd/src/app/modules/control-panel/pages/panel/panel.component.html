<div class="panel-header">
    <div class="visualizationHeader">
        <p class="textSimulation"><em>Visualization Area and Simulation Edition</em></p>
        <p class="textScenario"><em>Visualization Area and Scenario Edition</em></p>
    </div>

</div>

<div class="container">


    <form [formGroup]="formGroup" (ngSubmit)="onSaveChanges()">
        <!-- Start Row 1-->
        <div class="row">


            <div class="col-md-3">
                <label for="simulationName" class="form-label">Simulation Name</label>
                <input class="form-control" formControlName="simulationName">
                <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'simulationName'"></app-message>
            </div>


            <!-- </div> -->
            <div class="col-md-3">
                <label for="scenarioName" class="form-label">Scenario Name</label>
                <input class="form-control" formControlName="scenarioName" placeholder="{{activeScenario?.name}}">
                <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'scenarioName'"></app-message>
            </div>

            <div class="col-md-3">
                <label for="scenarioId" class="form-label"> Scenario ID</label>
                <input class="form-control" placeholder="{{activeScenario?.id_scenario}}" disabled readonly>
            </div>

            <div class="col-md-3">
                <button type="submit" class="btn btn-primary btn-sm saveChanges">Save changes</button>
            </div>



        </div>

        <!-- End Row 1 -->

        <!-- Start Row 2 -->
        <div class="row mt-3">

            <div class="col-md-3">
                <label for="animalSpecies" class="form-label">Animal Specie</label>
                <select class="form-select form-control" formControlName="animalSpecie">
                    <option value="" selected>Choose Animal Specie</option>
                    <ng-template [ngIf]="animalSpecies.length > 0">
                        <option *ngFor="let animalS of animalSpecies; trackBy: trackByFnAnimalSpecies">
                            {{ animalS.name }}
                        </option>
                    </ng-template>
                </select>
                <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'animalSpecie'"></app-message>
            </div>

            <div class="col-md-3">
                <label class="form-label">Medications list</label>
                <div class="row">
                    <div class="col-md-6">
                        <label for="medications" class="form-label">Medications</label>
                        <select class="form-control" formControlName="medication">
                            <option selected value="">Choose</option>
                            <ng-template [ngIf]="medications.length > 0">
                                <option *ngFor="let medication of medications; trackByFnMedications">
                                    {{medication?.medication?.name}}
                                </option>
                            </ng-template>
                        </select><app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'medication'"></app-message>
                    </div>
                    <div class="col-md-3">
                        <label for="doses" class="form-label">Doses</label>
                        <input class="form-control" formControlName="dose">
                        <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'dose'"></app-message>
                    </div>
                    <div class="col-md-3">
                        <label for="units" class="form-label">[units]</label>
                        <input class="form-control" formControlName="units">
                        <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'units'"></app-message>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <label class="form-label">Pathology list</label>
                <div class="row">
                    <div class="col-md-12">
                        <label class="form-label">Pathology </label>
                        <select class="form-control" formControlName="pathology">
                            <option selected value="">Choose</option>
                            <ng-template [ngIf]="pathologies.length > 0">
                                <option *ngFor="let pat of pathologies; trackByFnPathologies">
                                    {{pat.name}}
                                </option>
                            </ng-template>
                        </select>
                        <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'pathology'"></app-message>
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <label class="form-label">Arrhythmia list</label>
                <div class="row">
                    <div class="col-md-12">
                        <label class="form-label">Arrhythmia </label>
                        <select class="form-control" formControlName="arrhythmia">
                            <option selected value="">Choose</option>
                            <ng-template [ngIf]="arrhythmias.length > 0">
                                <option *ngFor="let arr of arrhythmias; trackByFnArrhythmias">
                                    {{arr.name}}
                                </option>
                            </ng-template>
                        </select>
                        <app-message *ngIf="isSubmitForm()" [errors]="getErrors()" [key]="'arrhythmia'"></app-message>
                    </div>
                </div>
            </div>


        </div>
        <!-- End Row 2-->

        <div class="row mt-3">

            <div class="col-md-3">
                <label class="form-label">Simulation description</label>
                <textarea class="form-control" rows="5"></textarea>
                <div class="row mt-3">
                    <div class="col scenarios">
                        <label for="scenarios"> Scenarios </label>
                        <ng-template [ngIf]="scenariosSimulation && scenariosSimulation.length > 0">

                                <button class="ml-3 btn btn-link align-end" (click)="onLoadScenario()">Load </button>
                                <button class="ml-1 btn btn-link align-end" *ngIf="containsTrue()" (click)="onDeleteScenario()">Delete</button>

                            <table class="table table-hover">
                                <thead class="thead-dark">
                                    <tr>

                                        <th scope="col">Name</th>
                                        <th scope="col">Description</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr formArrayName="scenarioSelected" *ngFor="let sc of scenariosSimulation; let i = index">

                                        <td scope="col">
                                            {{sc.name}}
                                        </td>
                                        <td scope="col">
                                            {{sc.description}}
                                        </td>
                                        <div [formGroupName]="i">
                                            <td scope="col">

                                                <input class="form-check-input" type="checkbox" value="{{i}}"
                                                    formControlName="value">
                                            </td>
                                        </div>
                                    </tr>
                                </tbody>
                            </table>
                        </ng-template>
                        <div *ngIf="scenariosSimulation.length == 0">
                            <button type="submit" class="btn btn-primary" (click)="onLoadScenario()">Load Scenarios</button>
                        </div>

                    </div>
                </div>
            </div>

            <div class="col-md-9 parameters">
                <hr class="separatorLine">
                <div class="row">
                    <div class="col-sm-4">
                        <label for="cyclec" class="form-label">Cardiac Rate [rpm]</label>
                        <input class="form-control" formControlName="cardiacCycle">
                    </div>

                    <div class="col-sm-4">
                        <label for="temp" class="form-label">TEMP [Â°C]</label>
                        <input class="form-control" formControlName="temp">
                    </div>

                    <div class="col-sm-4">
                        <label for="resp" class="form-label">RESP [rpm]</label>
                        <input class="form-control" formControlName="respirationRate">
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-5 mt-3">
                        <label class="form-label">ECG</label>
                        <div class="card">
                            <div class="card-title">
                                <p> ECG</p>
                            </div>
                            <div class="card-body">
                                <p> Curve configuration </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 mt-3 imgs">
                        <img src="/assets/images/egc_curve.png" class="rounded float-start ">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5 mt-3">

                        <label class="form-label">SPO2</label>
                        <div class="card">
                            <div class="card-title">
                                <p>SPO2</p>
                            </div>
                            <div class="card-body">
                                <p>Curve configuration</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 mt-3 imgs">
                        <img src="" class="rounded float-start" alt="spo2 curve">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5 mt-3">
                        <label class="form-label">ETC02</label>
                        <div class="card">
                            <div class="card-title">
                                <p>ETCO2</p>
                            </div>
                            <div class="card-body">
                                <p>Curve configuration</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 mt-3 imgs">
                        <img src="" class="rounded float-start" alt="ETC02 curve">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5 mt-3">
                        <label class="form-label">IBP</label>
                        <div class="card">
                            <div class="card-title">
                                <p>IBP</p>
                            </div>
                            <div class="card-body">
                                <p>Curve configuration</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 mt-3 imgs">
                        <img src="" class="rounded float-start" alt="IBP curve">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-5 mt-3">
                        <label class="form-label">NIBP</label>
                        <div class="card">
                            <div class="card-title">
                                <p>NIBP</p>
                            </div>
                            <div class="card-body">
                                <p>Curve configuration</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-7 mt-3 imgs">
                        <img src="" class="rounded float-start" alt="NIBP curve">
                    </div>
                </div>

            </div>

            <!-- End row 3-->


        </div>



    </form>
</div>
